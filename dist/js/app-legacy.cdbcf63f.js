(function(){var e={46700:function(e,t,a){var i={"./af":72398,"./af.js":72398,"./ar":44207,"./ar-dz":33382,"./ar-dz.js":33382,"./ar-kw":96525,"./ar-kw.js":96525,"./ar-ly":17098,"./ar-ly.js":17098,"./ar-ma":56483,"./ar-ma.js":56483,"./ar-sa":73961,"./ar-sa.js":73961,"./ar-tn":27401,"./ar-tn.js":27401,"./ar.js":44207,"./az":70903,"./az.js":70903,"./be":41174,"./be.js":41174,"./bg":94615,"./bg.js":94615,"./bm":20225,"./bm.js":20225,"./bn":69751,"./bn-bd":30544,"./bn-bd.js":30544,"./bn.js":69751,"./bo":46894,"./bo.js":46894,"./br":38566,"./br.js":38566,"./bs":40959,"./bs.js":40959,"./ca":52683,"./ca.js":52683,"./cs":14231,"./cs.js":14231,"./cv":999,"./cv.js":999,"./cy":64302,"./cy.js":64302,"./da":63601,"./da.js":63601,"./de":95509,"./de-at":42479,"./de-at.js":42479,"./de-ch":72924,"./de-ch.js":72924,"./de.js":95509,"./dv":19838,"./dv.js":19838,"./el":55113,"./el.js":55113,"./en-au":27377,"./en-au.js":27377,"./en-ca":29626,"./en-ca.js":29626,"./en-gb":55912,"./en-gb.js":55912,"./en-ie":12931,"./en-ie.js":12931,"./en-il":52243,"./en-il.js":52243,"./en-in":9779,"./en-in.js":9779,"./en-nz":49813,"./en-nz.js":49813,"./en-sg":54318,"./en-sg.js":54318,"./eo":74957,"./eo.js":74957,"./es":99243,"./es-do":67409,"./es-do.js":67409,"./es-mx":75188,"./es-mx.js":75188,"./es-us":16927,"./es-us.js":16927,"./es.js":99243,"./et":87731,"./et.js":87731,"./eu":21072,"./eu.js":21072,"./fa":29462,"./fa.js":29462,"./fi":29838,"./fi.js":29838,"./fil":73626,"./fil.js":73626,"./fo":6421,"./fo.js":6421,"./fr":70974,"./fr-ca":77780,"./fr-ca.js":77780,"./fr-ch":59719,"./fr-ch.js":59719,"./fr.js":70974,"./fy":98373,"./fy.js":98373,"./ga":83861,"./ga.js":83861,"./gd":44896,"./gd.js":44896,"./gl":20739,"./gl.js":20739,"./gom-deva":86737,"./gom-deva.js":86737,"./gom-latn":31979,"./gom-latn.js":31979,"./gu":32001,"./gu.js":32001,"./he":99671,"./he.js":99671,"./hi":82038,"./hi.js":82038,"./hr":11228,"./hr.js":11228,"./hu":30087,"./hu.js":30087,"./hy-am":83569,"./hy-am.js":83569,"./id":91977,"./id.js":91977,"./is":86853,"./is.js":86853,"./it":82140,"./it-ch":25626,"./it-ch.js":25626,"./it.js":82140,"./ja":24123,"./ja.js":24123,"./jv":26457,"./jv.js":26457,"./ka":30638,"./ka.js":30638,"./kk":16823,"./kk.js":16823,"./km":9493,"./km.js":9493,"./kn":11288,"./kn.js":11288,"./ko":29663,"./ko.js":29663,"./ku":70805,"./ku.js":70805,"./ky":87550,"./ky.js":87550,"./lb":76272,"./lb.js":76272,"./lo":99135,"./lo.js":99135,"./lt":91452,"./lt.js":91452,"./lv":35782,"./lv.js":35782,"./me":32181,"./me.js":32181,"./mi":50258,"./mi.js":50258,"./mk":35715,"./mk.js":35715,"./ml":50538,"./ml.js":50538,"./mn":83086,"./mn.js":83086,"./mr":75663,"./mr.js":75663,"./ms":35100,"./ms-my":92663,"./ms-my.js":92663,"./ms.js":35100,"./mt":50880,"./mt.js":50880,"./my":19099,"./my.js":19099,"./nb":38709,"./nb.js":38709,"./ne":32201,"./ne.js":32201,"./nl":21016,"./nl-be":61681,"./nl-be.js":61681,"./nl.js":21016,"./nn":25330,"./nn.js":25330,"./oc-lnc":27132,"./oc-lnc.js":27132,"./pa-in":30251,"./pa-in.js":30251,"./pl":93948,"./pl.js":93948,"./pt":89836,"./pt-br":36421,"./pt-br.js":36421,"./pt.js":89836,"./ro":28443,"./ro.js":28443,"./ru":20004,"./ru.js":20004,"./sd":54510,"./sd.js":54510,"./se":63148,"./se.js":63148,"./si":10542,"./si.js":10542,"./sk":77637,"./sk.js":77637,"./sl":85852,"./sl.js":85852,"./sq":90611,"./sq.js":90611,"./sr":10242,"./sr-cyrl":90302,"./sr-cyrl.js":90302,"./sr.js":10242,"./ss":91367,"./ss.js":91367,"./sv":42927,"./sv.js":42927,"./sw":5240,"./sw.js":5240,"./ta":82692,"./ta.js":82692,"./te":42132,"./te.js":42132,"./tet":88300,"./tet.js":88300,"./tg":37211,"./tg.js":37211,"./th":14050,"./th.js":14050,"./tk":53849,"./tk.js":53849,"./tl-ph":3964,"./tl-ph.js":3964,"./tlh":23650,"./tlh.js":23650,"./tr":44195,"./tr.js":44195,"./tzl":55529,"./tzl.js":55529,"./tzm":17520,"./tzm-latn":60298,"./tzm-latn.js":60298,"./tzm.js":17520,"./ug-cn":84134,"./ug-cn.js":84134,"./uk":95456,"./uk.js":95456,"./ur":15679,"./ur.js":15679,"./uz":89277,"./uz-latn":66446,"./uz-latn.js":66446,"./uz.js":89277,"./vi":53992,"./vi.js":53992,"./x-pseudo":8882,"./x-pseudo.js":8882,"./yo":12899,"./yo.js":12899,"./zh-cn":94017,"./zh-cn.js":94017,"./zh-hk":84831,"./zh-hk.js":84831,"./zh-mo":32881,"./zh-mo.js":32881,"./zh-tw":30057,"./zh-tw.js":30057};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id=46700},48126:function(e,t,a){"use strict";a(66992),a(88674),a(19601),a(17727);var i,n,o=a(28935),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},l=[],r={name:"App"},d=r,c=a(1001),u=(0,c.Z)(d,s,l,!1,null,null,null),p=u.exports,m=a(38262),h=a(13266),g=(a(70044),a(12809)),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v(e._s(e.name))])])},f=[],_={name:"HomePage",data:function(){return{name:"ThankZ"}}},b=_,S=(0,c.Z)(b,v,f,!1,null,"2e0117e9",null),C=S.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("validation-observer",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.invalid;return[a("div",{staticClass:"login-page"},[a("img",{staticClass:"image login-page__image",attrs:{src:"https://www.ahasoft.co.kr/login/images/logo_nobkg.png"}}),a("div",{staticClass:"title login-page__title"},[e._v("SALON ADMIN")]),a("form",{staticClass:"form login-page__form",attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[a("validation-provider",{attrs:{name:"user",rules:"required|min:3|max:16|alpha_dash"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataUser.username,expression:"dataUser.username"}],attrs:{required:"",autofocus:"",maxlength:"16",placeholder:"Ex: ThankZ, ThankZ_Salon"},domProps:{value:e.dataUser.username},on:{input:function(t){t.target.composing||e.$set(e.dataUser,"username",t.target.value)}}}),a("div",{staticClass:"error-message form__error-message",class:{"error-message-text":!!i[0]}},[e._v(" "+e._s(i[0]?i[0]:"Ex: ThankZ, ThankZ_Salon")+" ")])]}}],null,!0)}),a("validation-provider",{attrs:{name:"password",rules:"required|min:8|max:16"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataUser.password,expression:"dataUser.password"}],attrs:{required:"",maxlength:"16",type:"password",autocomplete:"off",placeholder:"Ex: abcd@1234"},domProps:{value:e.dataUser.password},on:{input:function(t){t.target.composing||e.$set(e.dataUser,"password",t.target.value)}}}),a("div",{staticClass:"error-message form__error-message",class:{"error-message-text":!!i[0]}},[e._v(" "+e._s(i[0]?i[0]:"Ex: abcd@1234")+" ")])]}}],null,!0)}),a("button",{staticClass:"login-page__btn",class:{"login-page__btn--disabled":e.disabledBtn||i},attrs:{type:"submit",disabled:e.disabledBtn||i}},[e._v(" Login ")])],1),a("notification-modal",{ref:"notificationRef",attrs:{modalTitle:"Login Failed"}})],1),e.isLoading?a("loading"):e._e()]}}])})},w=[],x=a(67906),I=a(16198),k=(a(73210),a(51386)),T=a(93019),N=a(26166),D=a.n(N),P=(a(38862),{getSaleAllSetup:function(){return JSON.parse(sessionStorage.getItem("saleAllSetup"))},getAllPaymentMethods:function(){var e=JSON.parse(sessionStorage.getItem("saleAllSetup"));return null===e||void 0===e?void 0:e.paymentMethodSetups},setSaleAllSetup:function(e){return sessionStorage.setItem("saleAllSetup",JSON.stringify(e))},removeSaleAllSetup:function(){sessionStorage.removeItem("saleAllSetup")}}),G=P,A=(a(68309),{getShopId:function(){var e,t=JSON.parse(sessionStorage.getItem("shopInfo"));return null===t||void 0===t||null===(e=t.shopBasicInfo)||void 0===e?void 0:e.shopId},getChainId:function(){var e,t,a=JSON.parse(sessionStorage.getItem("shopInfo"));return null===a||void 0===a||null===(e=a.shopBasicInfo)||void 0===e||null===(t=e.chainInfo)||void 0===t?void 0:t.chainId},getBranchInfo:function(){var e,t,a,i,n=JSON.parse(sessionStorage.getItem("shopInfo"));return{type:null===n||void 0===n||null===(e=n.shopBasicInfo)||void 0===e||null===(t=e.chainInfo)||void 0===t?void 0:t.branchType,number:null===n||void 0===n||null===(a=n.shopBasicInfo)||void 0===a||null===(i=a.chainInfo)||void 0===i?void 0:i.branchNumber}},getSessionToken:function(){var e,t=JSON.parse(sessionStorage.getItem("shopInfo"));return null===t||void 0===t||null===(e=t.userAuthInfo)||void 0===e?void 0:e.session_token},getUserAccount:function(){var e,t,a,i,n=JSON.parse(sessionStorage.getItem("shopInfo"));return{name:null!==(e=null===n||void 0===n||null===(t=n.userAuthInfo)||void 0===t?void 0:t.name)&&void 0!==e?e:"",id:null!==(a=null===n||void 0===n||null===(i=n.userAuthInfo)||void 0===i?void 0:i.userAccountId)&&void 0!==a?a:0}},getShopInfo:function(){return JSON.parse(sessionStorage.getItem("shopInfo"))},setShopInfo:function(e){return sessionStorage.setItem("shopInfo",JSON.stringify(e))},removeShopInfo:function(){sessionStorage.removeItem("shopInfo")},getStaffActive:function(){return JSON.parse(sessionStorage.getItem("staffActive"))},setStaffActive:function(e){return sessionStorage.setItem("staffActive",JSON.stringify(e))},removeStaffActive:function(){sessionStorage.removeItem("staffActive")}}),M=A,L={getClientSetup:function(){return JSON.parse(sessionStorage.getItem("clientSetup"))},setClientSetup:function(e){return sessionStorage.setItem("clientSetup",JSON.stringify(e))},removeClientSetup:function(){sessionStorage.removeItem("clientSetup")}},$=L,j={saleSession:G,shopSession:M,clientSession:$},E=j,F={DEFAULT_API_GATEWAY:{LOCAL:"https://localhost:44001",DEV:"https://ahasoft-salon-admin-http-aggregator-dev.azurewebsites.net",PRODUCTION:"https://ahasoft-salon-admin-http-aggregator.azurewebsites.net",STAGING:"https://ahasoft-salon-admin-http-aggregator-staging.azurewebsites.net"},SOLUTION_ID:{SALON_ADMIN:3002},DEFAULT_HEADER:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Origin, Origin, Accept, Content-Type",Accept:"application/json"},DEFAULT_URL_IMAGE:{CLIENT:"https://ahasoftsaloncommondev.blob.core.windows.net/clients"}},O=F,Z={prepaidCardHistoryType:[{value:1,text:"Sales"},{value:6,text:"Refund"},{value:14,text:"Import"},{value:4,text:"Deduction"},{value:2,text:"Sales Edited"},{value:3,text:"Sales Deleted"},{value:7,text:"Refund Deleted"},{value:12,text:"Balance Edited"},{value:10,text:"Balance Move In"},{value:11,text:"Balance Move Out"},{value:15,text:"Deduction Edited"},{value:5,text:"Deduction Deleted"},{value:8,text:"Refund By Balance"},{value:17,text:"Sales Date Edited"},{value:13,text:"Expiry Date Edited"},{value:9,text:"Refund By Balance Deleted"}],prepaidCardHistoryTypeEnum:{sales:1,refund:6,import:14,deduction:4,salesEdited:2,salesDeleted:3,refundDeleted:7,balanceMoveIn:10,balanceEdited:12,refundByBalance:8,balanceMoveOut:11,discountEdited:16,deductionDeleted:5,deductionEdited:15,salesDateEdited:17,expiryDateEdited:13,refundByBalanceDeleted:9},typePrepaidGood:{card:0,service:1},itemSalesType:{services:{id:1,text:"Services"},products:{id:2,text:"Products"},prepaidCard:{id:3,text:"Prepaid Cards"},prepaidService:{id:4,text:"Prepaid Service"},packages:{id:5,text:"Packages"}},packages:5,services:1,products:2,prepaidCard:3,prepaidService:4},B=Z,z={screenSize:{maxScreenDesktop:1199.98,maxScreenLaptop:991.98,maxScreenTablet:767.98,maxScreenPhone:575.98},status:{active:1,inactive:0}},U=z,R={DEFAULT_PAGE_SIZE:10,DEFAULT_COUNTRY:"VN",DEFAULT_SHOP_LOCATION:"vi-vn",DEFAULT_DATA_CLIENT:{sex:3,email:null,notes:null,birthDD:"0",memberType:1,address1:null,address2:null,birthYear:"0",clientName:"",postcode:null,birthMonth:"0",birthdayType:1,country:"vi-vn",phoneNumber:null,shopLocation:"VN",memberNumber:null,mobileNumber:null,mobileNumber2:null,recommenderId:null,clientGroupId:null,clientRatingId:null,allowedMessageType:1,clientGroupName:null,preferredStaffId:null,clientRatingName:null,preferredStaffName:null,clientReferralSourceId:null,clientReferralSourceName:null,shopId:null!==(i=null===E||void 0===E||null===(n=E.shopSession)||void 0===n?void 0:n.getShopId())&&void 0!==i?i:null,clientInputDateTimeTS:null,sessionToken:E.shopSession.getSessionToken()}},H=R,q={DEFAULT_ERROR_MESSAGES:{isShow:!1,errorMessages:[]}},W=q,V={api:O,sales:B,common:U,payload:H,message:W},Y=V,K=D().create({baseURL:Y.api.DEFAULT_API_GATEWAY.DEV});K.interceptors.request.use((function(e){var t,a=E.shopSession.getShopInfo();return e.headers=(0,T.Z)({Authorization:"Bearer ".concat(null===a||void 0===a||null===(t=a.userAuthInfo)||void 0===t?void 0:t.authToken)},Y.api.DEFAULT_HEADER),e}));var J=K,Q={login:function(e){var t="/api/aggr/v1/auth/login/subscriber?culture=en-US&ui-culture=en-US";return J.post(t,e)}},X=Q,ee={getStaffActive:function(e){var t="/api/read/v1/staffs/Staff/Active";return J.post(t,e)},getShopInfo:function(e){var t="/api/read/v1/clients/Client/ShopInfo";return J.post(t,e)},getNextMemberNumber:function(e){var t="/api/read/v1/clients/Client/NextMemberNumber";return J.post(t,e)},getSalesSetUp:function(e){var t="/api/read/v1/sales/SalesSetup/AllSalesSetups/Live";return J.post(t,e)}},te=ee,ae={getServiceCategory:function(e){var t="/api/read/v1/goods/ServiceCategory";return J.post(t,e)},getServiceByCategory:function(e){var t="/api/read/v1/goods/Service";return J.post(t,e)},getProductCategory:function(e){var t="/api/read/v1/goods/ProductCategory";return J.post(t,e)},getProductByCategory:function(e){var t="/api/read/v1/inventory/Product";return J.post(t,e)}},ie=ae,ne={getPrepaidServiceHistory:function(e){var t="/api/read/v1/sales/ClientPrepaidService/ClientPrepaidServiceHistories/Live";return J.post(t,e)},getPrepaidCardHistory:function(e){var t="/api/read/v1/sales/ClientPrepaidCard/ClientPrepaidCardHistories/Live";return J.post(t,e)},getSalesDetail:function(e){var t="/api/read/v1/sales/Sales/Sales/Live";return J.post(t,e)},addSales:function(e){var t="/api/cmd/v1/sales/Sales";return J.post(t,e)},getAllSalesSetup:function(e){var t="/api/read/v1/sales/SalesSetup/AllSalesSetups/Live";return J.post(t,e)}},oe=ne,se={getAllClientByShop:function(e){var t="/api/read/v1/clients/Client/Active";return J.post(t,e)},createNewClient:function(e){var t="/api/aggr/v1/Client/CreateClient";return J.post(t,e)},editClient:function(e){var t="/api/aggr/v1/Client/EditClient";return J.put(t,e)},deleteClient:function(e){var t="/api/aggr/v1/Client/UpdateClientToDeleted";return J.post(t,e)},getNextMemberNumber:function(e){var t="/api/read/v1/clients/Client/NextMemberNumber";return J.post(t,e)},getClientByClientId:function(e){var t="/api/aggr/v1/Client/GetClient";return J.post(t,e)},getClientAccount:function(e){var t="api/read/v1/sales/ClientAccount/ClientAccounts/Live";return J.post(t,e)},uploadClientImage:function(e){var t="/api/cmd/v1/clients/ClientImage";return J.post(t,e)},deleteClientImage:function(e){var t="/api/cmd/v1/clients/ClientImage";return J["delete"](t,{data:e})},getClientPrepaidServices:function(e){var t="/api/read/v1/sales/ClientPrepaidService/ClientPrepaidServices/Live";return J.post(t,e)},getClientPrepaidCards:function(e){var t="/api/read/v1/sales/ClientPrepaidCard/ClientPrepaidCards/Live";return J.post(t,e)},getTotalValidPrepaidGoods:function(e){var t="/api/read/v1/sales/SalesSetup/PriorityPrepaidGoodsDisplay/Live";return J.post(t,e)},getClientWithSales:function(e){var t="/api/read/v1/sales/ClientAccount/ClientAccounts/Live";return J.post(t,e)},getSalesHistoryByClient:function(e){var t="api/read/v1/sales/Sales/SalesHistoriesByClient/Live";return J.post(t,e)}},le=se,re={userApis:X,shopApis:te,goodApis:ie,salesApis:oe,clientApis:le},de=re,ce=(a(41539),a(39714),{S4:pe,guid:ue,randomIndex:me});function ue(){return(pe()+pe()+"-"+pe()+"-4"+pe().substr(0,3)+"-"+pe()+"-"+pe()+pe()+pe()).toLowerCase()}function pe(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function me(){return 1e7*Math.random()}var he=ce,ge=a(17133),ve=a.n(ge),fe={GetHours:Ie,FormatDate:ye,GetMinutes:ke,DateIntoUnix:_e,FormatDateTime:we,DateNowIntoUnix:be,FormatFullDateTime:xe,UnixSecondsIntoDate:Se,UnixMiliSecondsIntoDate:Ce};function _e(e){return ve()(e).unix()}function be(){var e=Date.now();return ve()(e).unix()}function Se(e){return ve().unix(1e3*e)._d}function Ce(e){return ve().unix(e)._d}function ye(e){return ve()(e).format("YYYY-MM-DD")}function we(e){return ve()(e).format("YYYY-MM-DD HH:MM")}function xe(e){return ve()(e).format("dddd, YYYY-MM-DD")}function Ie(){return ve()().hours()}function ke(){return ve()().minutes()}var Te=fe,Ne={ResetDataClient:De};function De(){return H.DEFAULT_DATA_CLIENT}var Pe=Ne,Ge=a(68932),Ae=(a(74916),a(23123),a(40561),a(69600),a(47941),a(56977),a(21249),a(71642)),Me=a.n(Ae),Le=a(53706),$e={concatURL:Oe,hourSelect:He,exportExcel:Be,minuteSelect:qe,showLongText:ze,formatSaleItem:Ue,formatPhoneNumber:je,formatMoneyNumber:Ee,trimAllDataObject:Fe,formatPaymentMethod:Re,covertSizeFileIntoMB:Ze};function je(e){var t=e.split("");return t.length>9&&t.length<12&&(t.splice(4,0,"-"),t.splice(8,0,"-")),t=t.join(""),t}function Ee(e){return e.toLocaleString("en-US")}function Fe(e){for(var t=Object.keys(e),a=0;a<t.length;a++)"string"===typeof e[t[a]]&&(e[t[a]]=e[t[a]].trim());return e}function Oe(e){for(var t=e.defaultURL,a=e.pathURL,i=t,n=0;n<a.length;n++)a[n].trim()&&(i+="/"+a[n].trim());return i}function Ze(e){return(e/1024/1024).toFixed(4)}function Be(e){var t=new(Me().Workbook),a=t.addWorksheet(e.title);a.mergeCells("A1:F1");var i=a.getCell("A1");i.value=e.header,i.font={family:4,size:18,bold:!0,name:"Time New Roman"},i.height=40,i.alignment={vertical:"middle",horizontal:"center"};var n=e.columns.map((function(e){return e.text})),o=a.addRow((0,Ge.Z)(n));o.height=30,o.alignment={vertical:"middle",horizontal:"center"};for(var s=0;s<e.columns.length;s++)console.log(e.columns[s].width,o),o._cells[s]._column.width=e.columns[s].width,o._cells[s].border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}};e.rows.map((function(e){var t=(0,Ge.Z)(e),i=a.addRow(t);i.height=20;for(var n=0;n<t.length;n++)i._cells[n].alignment={horizontal:"center"},i._cells[n].border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}}})),t.xlsx.writeBuffer().then((function(t){return(0,Le.saveAs)(new Blob([t]),"".concat(e.fileName,".xlsx"))})).catch((function(e){return console.log("Error writing excel export",e)}))}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e&&e.trim().length>t?e.substring(0,t)+"...":e}function Ue(e){var t=0,a="";return 1===e.type&&(t=e.goodInfo.serviceId,a=e.goodInfo.serviceName),2===e.type&&(t=e.goodInfo.productId,a=e.goodInfo.productName),{amount:e.goodInfo.price*e.qty,clientPrepaidGoodsId:0,deductedByPrepaidGoodsGuid:"",deductedPrepaidGoodsRef:0,deductedPrepaidGoodsRefName:"",deductionAmount:0,deductionPoints:0,deductionType:0,discountCategoryId:0,discountCategoryName:"",discountForClient:!1,discountForProduct:0,discountForService:0,discountType:2,discountValue:0,giftCardType:0,goodsCategoryId:e.categoryInfo.id,goodsCategoryName:e.categoryInfo.name,goodsId:t,goodsName:a,goodsType:e.type,isCustomizePrepaidGoods:!1,prepaidCardInitialBalance:0,prepaidCardType:0,prepaidGoodsExpiryDateTS:0,prepaidGoodsGuid:"",prepaidServiceInitialQuantity:0,productCode:"",quantity:e.qty,relatedServiceId:0,relatedServiceName:"",relatedServiceUnitPrice:0,salesItemId:0,salesTypeId:null,salesTypeName:"",smallCutDiscountEnumDefault:0,staffs:[],supplierPrice:0,unitPrice:e.goodInfo.price}}function Re(e,t){return{paidDateTimeTS:t,paymentAmount:0,paymentMethodId:e.id,paymentMethodName:e.name,paymentType:1,salesPaymentId:0}}function He(){for(var e=[],t=0;t<24;t++)e.push({value:t,text:t});return e}function qe(){for(var e=[],t=0;t<60;t++)e.push({value:t,text:t});return e}var We=$e,Ve={ResetErrorMessages:Ye};function Ye(){return W.DEFAULT_ERROR_MESSAGES}var Ke=Ve,Je={randomFunctions:he,momentFunctions:Te,clientFunctions:Pe,commonFunctions:We,messageFunctions:Ke},Qe=Je,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notification-modal"},[a("b-modal",{ref:"modal",attrs:{static:"",scrollable:"","hide-footer":"",title:e.modalTitle,"header-bg-variant":"warning","no-close-on-backdrop":!0,"modal-class":"modal notification-modal__modal"}},[e._l(e.listMessage,(function(t){return a("div",{key:t.errorCode,staticClass:"message modal__message"},[e._v(" "+e._s(t.errorMessage)+" ")])})),a("footer",{staticClass:"footer modal__footer"},[a("button",{staticClass:"btn footer__btn",on:{click:e.onCancel}},[e._v("OK")])])],2)],1)},et=[],tt={name:"NotificationModal",data:function(){return{listMessage:[]}},props:{modalTitle:{type:String,default:"Error"}},methods:{showModal:function(e){this.listMessage=e.listMessage,this.$refs.modal&&this.$refs.modal.show()},hideModal:function(){this.$refs.modal&&this.$refs.modal.hide()},onCancel:function(){this.hideModal()}}},at=tt,it=(0,c.Z)(at,Xe,et,!1,null,"dd59c0d6",null),nt=it.exports,ot=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},st=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading-component"},[a("div",{staticClass:"loading loading-component__loading"})])}],lt={name:"SalonThankzLoading",data:function(){return{}},props:{},mounted:function(){},methods:{}},rt=lt,dt=(0,c.Z)(rt,ot,st,!1,null,"46036997",null),ct=dt.exports,ut={name:"LoginPage",data:function(){return{dataUser:{username:"",password:""},isLoading:!1}},mounted:function(){E.shopSession.removeShopInfo()},components:{ValidationProvider:k.d_,ValidationObserver:k._j,Loading:ct,NotificationModal:nt},computed:{disabledBtn:function(){return""===this.dataUser.username||""===this.dataUser.password}},methods:{onSubmit:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={userID:e.dataUser.username.trim(),password:e.dataUser.password.trim(),solutionId:Y.api.SOLUTION_ID.SALON_ADMIN},""!==a.userID.trim()&&""!==a.password.trim()){t.next=5;break}e.$refs.notificationRef.showModal({listMessage:[{errorCode:"Login",errorMessage:"Username and password cannot be empty"}]}),t.next=29;break;case 5:return t.prev=5,e.isLoading=!0,t.next=9,de.userApis.login(a);case 9:if(i=t.sent,200===i.status){t.next=12;break}throw i.statusText;case 12:if(!i.data.isOK){t.next=22;break}return i.data.result.userAuthInfo.session_token=Qe.randomFunctions.guid(),t.next=16,E.shopSession.setShopInfo(i.data.result);case 16:return t.next=18,e.loadClientSetUp(i.data.result.shopBasicInfo.shopId);case 18:e.$router.push("/client"),e.isLoading=!1,t.next=24;break;case 22:e.isLoading=!1,e.$refs.notificationRef.showModal({listMessage:i.data.errorMessages});case 24:t.next=29;break;case 26:t.prev=26,t.t0=t["catch"](5),console.log(t.t0);case 29:case"end":return t.stop()}}),t,null,[[5,26]])})))()},loadClientSetUp:function(e){return(0,I.Z)((0,x.Z)().mark((function t(){var a,i;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={shopId:e},t.prev=1,t.next=4,de.shopApis.getShopInfo(a);case 4:if(i=t.sent,200===i.status){t.next=7;break}throw i.message;case 7:i.data.isOK?E.clientSession.setClientSetup(i.data.result):alert("Error Set up client"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()}}},pt=ut,mt=(0,c.Z)(pt,y,w,!1,null,"22240242",null),ht=mt.exports,gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clients-page"},[a("div",{staticClass:"header clients-page__header"},[a("img",{staticClass:"image header__image",attrs:{src:"https://www.ahasoft.co.kr/login/images/logo_nobkg.png"}}),a("button",{staticClass:"header__btn",on:{click:e.clickSignout}},[e._v("Sign out")])]),a("div",{staticClass:"title clients-page__title"},[a("div",{staticClass:"title-text title__title-text"},[e._v("Client")]),a("div",{staticClass:"group-button title__group-button"},[a("button",{staticClass:"btn--print group-button__btn group-button__btn--print",on:{click:e.handleClickPrintListClient}},[e._v(" Export ")]),a("button",{staticClass:"btn--add-client group-button__btn group-button__btn--add-client",on:{click:e.handleClickAddClient}},[e._v(" Add ")])])]),a("div",{staticClass:"content clients-page__content"},[a("label",{staticClass:"title content__title"},[e._v("Total "+e._s(e.clientTotal)+" client(s) searched")]),e.statusScreenLaptop||!e.clients.length?a("table",{staticClass:"table content__table"},[a("thead",[a("tr",[e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),a("th",{attrs:{colspan:"3"}},[e._v("Actions")])],2)]),e.clients.length?a("tbody",e._l(e.clients,(function(t){return a("tr",{key:t.clientId},[a("td",{staticClass:"table-data table-data--registration-date table__table-data table__table-data--registration-date"},[e._v(" "+e._s(t.registrationDate)+" ")]),a("td",{staticClass:"table-data table-data--client-name table__table-data table__table-data--client-name"},[e._v(" "+e._s(e.showLongText(t.clientName,50))+" ")]),a("td",{staticClass:"table-data table-data--phone table__table-data table__table-data--phone"},[e._v(" "+e._s(t.phone)+" ")]),a("td",{staticClass:"table-data table-data--total-sales-amount table__table-data table__table-data--total-sales-amount"},[e._v(" "+e._s(t.totalSales)+" ")]),a("td",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"table-data table-data--notes table__table-data table__table-data--notes",attrs:{title:t.notes&&t.notes.trim().length>50?t.notes:""}},[e._v(" "+e._s(e.showLongText(t.notes,20))+" ")]),a("td",{staticClass:"table-data table-data--btn table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--edit",on:{click:function(){return e.handleClickEditClient(t)}}},[e._v(" Edit ")])]),a("td",{staticClass:"table-data table-data--btn table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--calendar",on:{click:e.onClickCalendar}},[e._v(" Calender ")])]),a("td",{staticClass:"table-data table-data--btn table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--sales",on:{click:function(a){return e.onClickSales(t)}}},[e._v(" Sales ")])])])})),0):a("tbody",[e._m(0)])]):a("div",{staticClass:"client-info content__client-info"},e._l(e.clients,(function(t){return a("div",{key:t.clientId,staticClass:"client-info__info"},[a("client-info",{attrs:{client:t},on:{onClickSales:e.onClickSales,onClickCalendar:e.onClickCalendar,handleClickEditClient:e.handleClickEditClient}})],1)})),0),e.page.pageTotal>1?a("div",{staticClass:"page content__page"},[a("label",{staticClass:"page-total page__page-total"},[e._v("Page "+e._s(e.page.pageNumber)+" of "+e._s(e.page.pageTotal))]),a("button",{staticClass:"page__btn page__btn--go-to-first-page",on:{click:e.clickGoToFirstPage}},[e._v(" << ")]),a("button",{staticClass:"page__btn page__btn--go-to-previous-page",on:{click:e.clickGoToPreviousPage}},[e._v(" < ")]),a("button",{staticClass:"page__btn page__btn--go-to-next-page",on:{click:e.clickGoToNextPage}},[e._v(" > ")]),a("button",{staticClass:"page__btn page__btn--go-to-last-page",on:{click:e.clickGoToLastPage}},[e._v(" >> ")]),a("button",{staticClass:"page__btn page__btn--go-to",on:{click:e.clickGoto}},[e._v(" "+e._s(e.isShowSelectPage?"Goto":"Hide")+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.page.pageSelected,expression:"page.pageSelected"}],attrs:{hidden:e.isShowSelectPage},on:{click:e.clickSelectedPage,change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.page,"pageSelected",t.target.multiple?a:a[0])}}},e._l(e.optionsPage,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)]):e._e()]),a("client-actions",{ref:"clientActionsRef",on:{loadClient:e.loadDataClient,loading:e.handleSetLoading}}),e.isLoading?a("loading",{staticClass:"loading"}):e._e(),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}}),a("sales-action",{ref:"refSalesAction",on:{loading:e.handleSetLoading}})],1)},vt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"table__table-no-data",attrs:{colspan:"8"}},[e._v("No data")])])}],ft=(a(92222),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"client-info"},[a("div",{staticClass:"client-info__title"},[a("div",{staticClass:"title__text"},[a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"text__name",attrs:{title:e.client.clientName.length>25?e.client.clientName:""}},[e._v(" "+e._s(e.client.clientName)+" ")]),e.client.phone?a("div",[e._v(e._s("("+e.client.phone+")"))]):e._e(),a("div",{staticClass:"text__date"},[e._v(e._s(e.client.registrationDate))])]),a("div",{staticClass:"title__group-button"},[e.statusScreenTablet?a("div",{staticClass:"group-button-action group-button__group-button-action"},[a("button",{on:{click:e.handleClickEditClient}},[e._v("Edit")]),a("button",{on:{click:e.onClickCalendar}},[e._v("Calendar")]),a("button",{on:{click:e.onClickSales}},[e._v("Sales")])]):e._e(),a("button",{on:{click:e.onClickShowInfoClient}},[e._v(" "+e._s(e.isShowClientInfo?"⇧":"⇨")+" ")])])]),e.isShowClientInfo?a("div",{staticClass:"client-info__content"},[e.client.phone?a("div",{staticClass:"content__data"},[a("div",{staticClass:"data__title"},[e._v("Phone Number")]),a("div",[e._v(e._s(e.client.phone))])]):e._e(),a("div",{staticClass:"content__data"},[a("div",{staticClass:"data__title"},[e._v("Total Sales")]),a("div",[e._v(e._s(e.client.totalSales))])]),e.client.notes?a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"content__data content__data--notes",attrs:{title:e.client.notes.length>30?e.client.notes:""}},[e._v(" "+e._s(e.showLongText(e.client.notes,30))+" ")]):e._e(),a("div",{staticClass:"group-button-action content__group-button"},[a("button",{on:{click:e.handleClickEditClient}},[e._v("Edit")]),a("button",{on:{click:e.onClickCalendar}},[e._v("Calendar")]),a("button",{on:{click:e.onClickSales}},[e._v("Sales")])])]):e._e()])}),_t=[],bt={name:"SalonThankzClientInfo",data:function(){return{isShowClientInfo:!1,windowWidth:window.innerWidth}},props:{client:{type:Object,default:function(){return Y.payload.DEFAULT_DATA_CLIENT}}},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},computed:{statusScreenTablet:function(){return this.windowWidth>1.2*Y.common.screenSize.maxScreenPhone}},methods:{showLongText:function(e,t){return Qe.commonFunctions.showLongText(e,t)},handleClickEditClient:function(){this.$emit("handleClickEditClient",this.client)},onClickCalendar:function(){this.$emit("onClickCalendar")},onClickSales:function(){this.$emit("onClickSales",this.client)},onClickShowInfoClient:function(){this.isShowClientInfo=!this.isShowClientInfo},onResize:function(){this.windowWidth=window.innerWidth}}},St=bt,Ct=(0,c.Z)(St,ft,_t,!1,null,"1347a55c",null),yt=Ct.exports,wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sales-action"},[a("b-modal",{ref:"salesActionModal",attrs:{static:"",size:"xl","hide-footer":"","header-bg-variant":"info",title:e.typeAction.text,"no-close-on-backdrop":!0,"modal-class":"modal sales-action-modal__modal"},on:{hide:e.resetModal}},[e.typeAction.type?a("div",[a("div",[e._v("Edit Sales")])]):a("div",{staticClass:"modal__add-sales"},[a("div",{staticClass:"add-sales__client-name"},[e._v(" "+e._s(e.dataClient.clientName)+" ")]),a("div",{staticClass:"add-sales__select-item"},[a("div",{staticClass:"select-item__list-category"},[a("good-type",{attrs:{goodTypeSelected:e.goodTypeSelected},on:{handleGoodTypeSelect:e.handleGetGoodCategory,handleShowSelectSalesItem:e.handleShowSelectSalesItem}})],1),a("div",{staticClass:"select-item__table"},[a("table",[a("thead",[a("tr",e._l(e.fields,(function(t){return a("th",{key:t.text+e.handleRandomIndex()},[e._v(" "+e._s(t.text)+" ")])})),0)]),e.isShow?a("tbody",e._l(e.goodListSelectedShow,(function(t,i){return a("tr",{key:i+e.handleRandomIndex()},[a("td",{staticClass:"table__table-data table__table-data--sales-item"},[e._v(" "+e._s(t.showDataTable.salesItem)+" ")]),a("td",{staticClass:"table__table-data table__table-data--unit-price"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.showDataTable.unitPrice,expression:"good.showDataTable.unitPrice"}],attrs:{min:"1",type:"number"},domProps:{value:t.showDataTable.unitPrice},on:{change:function(a){return e.handleUnitPrice(t.showDataTable.goodId,t.showDataTable.unitPrice)},input:function(a){a.target.composing||e.$set(t.showDataTable,"unitPrice",a.target.value)}}})]),a("td",{staticClass:"table__table-data table__table-data--qty"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.showDataTable.qTy,expression:"good.showDataTable.qTy"}],attrs:{min:"1",type:"number"},domProps:{value:t.showDataTable.qTy},on:{change:function(a){return e.handleQty(t.showDataTable.goodId,t.showDataTable.qTy)},input:function(a){a.target.composing||e.$set(t.showDataTable,"qTy",a.target.value)}}})]),a("td",{staticClass:"table__table-data table__table-data--unit-discount",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.discount)+" ")]),a("td",{staticClass:"table__table-data table__table-data--amount"},[e._v(" "+e._s(t.showDataTable.amount)+" ")]),a("td",{staticClass:"table__table-data table__table-data--staff",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.staff)+" ")]),a("td",{staticClass:"table__table-data table__table-data--sales-type",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.salesType)+" ")]),a("td",{staticClass:"table__table-data table__table-data--points-deduct",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.pointDeduct)+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance-deduct",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.balanceDeduct)+" ")]),a("td",{staticClass:"table__table-data table__table-data--delete",on:{click:function(a){return e.handleDeleteItemSelected(t.showDataTable.goodId)}}},[e._v(" X ")])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"10"}},[e._v("No data")])])])])])]),a("div",{staticClass:"add-sales__content-footer"},[a("div",{staticClass:"content-footer__title"},[e._v("Payment")]),a("div",{staticClass:"content-footer__detail"},[a("div",{staticClass:"detail__payment-detail"},[a("div",{staticClass:"payment-detail__total-amount"},[a("span",{staticClass:"payment-detail__title"},[e._v("Total Amount")]),a("span",{staticClass:"payment-detail__data"},[e._v(e._s(e.totalAmount))])]),a("div",{staticClass:"payment-detail__point-deduction"},[a("span",{staticClass:"payment-detail__title"},[e._v("Point Deduction")]),a("span",[e._v("0")])]),a("div",{staticClass:"payment-detail__balance-deduction"},[a("span",{staticClass:"payment-detail__title"},[e._v("Balance Deduction")]),a("span",[e._v("0")])]),a("div",{staticClass:"payment-detail__outstanding"},[a("span",{staticClass:"payment-detail__title"},[e._v("Outstanding")]),a("span",[e._v(e._s(e.outstanding))])]),a("div",{staticClass:"payment-detail__earn-loyalty-points"},[a("span",{staticClass:"payment-detail__title"},[e._v("Earn Loyalty Points")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.salesLoyaltyPoint,expression:"salesLoyaltyPoint"}],attrs:{type:"number",min:"0"},domProps:{value:e.salesLoyaltyPoint},on:{input:function(t){t.target.composing||(e.salesLoyaltyPoint=t.target.value)}}})])]),a("div",{staticClass:"detail__deduction-notes-payment-date"},[a("div",{staticClass:"deduction-notes-payment__deduction"},[a("div",{staticClass:"deduction__text"},[e._v("DEDUCTION")]),a("div",{staticClass:"deduction__group-button"},[a("button",{staticClass:"group-button__btn group-button__btn--point",on:{click:e.handleNotification}},[e._v(" Point ")]),a("button",{staticClass:"group-button__btn group-button__btn--balance",on:{click:e.handleNotification}},[e._v(" Balance ")])])]),a("div",{staticClass:"deduction-notes-payment-date__payment"},[a("div",{staticClass:"payment__title"},[e._v("PAYMENT")]),a("div",{staticClass:"payment__payment-method"},e._l(e.paymentMethods,(function(t){return a("button",{key:t.id+e.handleRandomIndex(),staticClass:"payment-method__button",on:{click:function(a){return e.handlePaymentSelected(t)}}},[e._v(" "+e._s(t.name)+" ")])})),0)]),a("div",{staticClass:"deduction-notes-payment-date__notes"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.salesNotes,expression:"salesNotes"}],attrs:{rows:"2"},domProps:{value:e.salesNotes},on:{input:function(t){t.target.composing||(e.salesNotes=t.target.value)}}})]),a("div",{staticClass:"deduction-notes-payment-date__date"},[a("span",{staticClass:"date__tittle"},[e._v("Sales Date")]),a("v-date-picker",{staticClass:"date-picker date__date-picker",attrs:{masks:e.masks},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,n=t.inputEvents;return[a("input",e._g({staticClass:"input-date-picker date-picker__input-date-picker",domProps:{value:i}},n))]}}],null,!1,1686376726),model:{value:e.registeredDate,callback:function(t){e.registeredDate=t},expression:"registeredDate"}}),a("div",{staticClass:"date__time"},[a("b-form-select",{attrs:{options:e.hourOptions},model:{value:e.hoursSales,callback:function(t){e.hoursSales=t},expression:"hoursSales"}}),e._v(" : "),a("b-form-select",{attrs:{options:e.minuteOptions},model:{value:e.minutesSales,callback:function(t){e.minutesSales=t},expression:"minutesSales"}})],1)],1)])]),a("div",{staticClass:"content-footer__group-button"},[a("group-button",{attrs:{isShowButton:e.isShowButton},on:{confirm:e.handleAddSales,cancel:e.hideModal}})],1)])])]),a("select-sales-item",{ref:"refSelectSalesItem",attrs:{dataGoodList:e.goodList,dataCategories:e.categories},on:{loading:e.handleSetLoading,resetGoodType:e.handleResetGoodType,getServiceCategory:e.handleGetServiceCategory,getProductCategory:e.handleGetProductCategory,confirmItemSelected:e.handleConfirmItemSelected,getProductByCategory:e.handleGetProductByCategory,getServiceByCategory:e.handleGetServiceByCategory,resetDataCategoryGood:e.handleResetDataCategoryGood}}),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}})],1)},xt=[],It=(a(26833),a(54747),a(26699),a(34553),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-good-type"},e._l(Object.values(e.goodTypes),(function(t,i){return a("div",{key:i,staticClass:"good-type",class:{"good-type--selected":e.handleGoodTypeSelected(t.id)},on:{click:function(){return e.handleClickGoodType(t)}}},[e._v(" "+e._s(t.text)+" ")])})),0)}),kt=[],Tt=(a(9653),{name:"SalonThankzGoodType",data:function(){return{windowWidth:window.innerWidth,goodTypes:Object.assign({},Y.sales.itemSalesType)}},props:{goodTypeSelected:{type:Number,default:Object.values(Y.sales.itemSalesType)[0].id}},components:{},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},computed:{statusScreenLaptop:function(){return this.windowWidth>Y.common.screenSize.maxScreenLaptop}},methods:{handleGoodTypeSelected:function(e){return e===this.goodTypeSelected},handleClickGoodType:function(e){this.$emit("handleGoodTypeSelect",e.id),this.$emit("handleShowSelectSalesItem")}}}),Nt=Tt,Dt=(0,c.Z)(Nt,It,kt,!1,null,"32b1c798",null),Pt=Dt.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group-button"},[e.isShowButton.confirm?a("button",{staticClass:"btn--confirm group-button__btn group-button__btn--confirm",class:{"group-button__btn--disable":e.disableConfirm},attrs:{disabled:e.disableConfirm},on:{click:e.handleClickConfirm}},[e._v(" "+e._s(e.nameButton.confirm)+" ")]):e._e(),e.isShowButton.delete?a("button",{staticClass:"btn--delete group-button__btn group-button__btn--delete",on:{click:e.handleClickDelete}},[e._v(" "+e._s(e.nameButton.delete)+" ")]):e._e(),e.isShowButton.cancel?a("button",{staticClass:"btn--cancel group-button__btn group-button__btn--cancel",on:{click:e.handleClickCancel}},[e._v(" "+e._s(e.nameButton.cancel)+" ")]):e._e()])},At=[],Mt={name:"SalonThankzGroupButton",data:function(){return{}},props:{disableConfirm:{type:Boolean,default:!1},isShowButton:{type:Object,default:function(){return{delete:!0,cancel:!0,confirm:!0}}},nameButton:{type:Object,default:function(){return{confirm:"Save",delete:"Delete",cancel:"Cancel"}}}},mounted:function(){},methods:{handleClickConfirm:function(){this.$emit("confirm")},handleClickDelete:function(){this.$emit("delete")},handleClickCancel:function(){this.$emit("cancel")}}},Lt=Mt,$t=(0,c.Z)(Lt,Gt,At,!1,null,"26cfd588",null),jt=$t.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-sales-item"},[a("b-modal",{ref:"selectSalesItemModal",attrs:{static:"",size:"xl","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal select-sales-item-modal__modal"},on:{hide:e.resetModal}},[a("div",{staticClass:"modal__content"},[a("div",{staticClass:"content__list-good"},[a("good-type",{attrs:{goodTypeSelected:e.goodTypeSelected},on:{handleGoodTypeSelect:e.handleGetGoodCategory}})],1),a("div",{staticClass:"content__body"},[a("div",{staticClass:"body__category-item"},[a("category-good",{attrs:{typeGood:e.typeGood,goodList:e.dataGoodList,categories:e.dataCategories,categorySelected:e.categorySelected},on:{handleAddGoodSelected:e.handleAddGoodSelected,handleGetServiceByCategory:e.handleGetServiceByCategory,handleGetProductByCategory:e.handleGetProductByCategory}})],1),a("div",{staticClass:"body__group-button-list-item-select"},[a("div",{staticClass:"group-button-list-item-select__group-button"},[a("group-button",{attrs:{nameButton:e.nameButton,isShowButton:e.isShowButton},on:{cancel:e.handleCloseModal,confirm:e.handleConfirmItemSelected}})],1),a("div",{staticClass:"group-button-list-item-select__list-item-select"},[a("div",{staticClass:"list-item-select__select-staff"}),e.iShowSelectedItem?a("div",{staticClass:"list-item-select__list-item"},[a("div",{staticClass:"list-item__title"},[e._v(e._s(e.goodTypeSelectedName)+" Selected")]),a("good-selected",{attrs:{isTypeGood:e.isTypeGood,goodListSelected:e.goodListSelectedShow},on:{handleDeleteItemSelected:e.handleDeleteItemSelected}})],1):e._e()])])])])]),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}})],1)},Ft=[],Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"good-selected"},[e.isTypeGood.services?a("div",{staticClass:"good-selected__good-type"},[a("table",[a("thead",[a("tr",e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),0)]),a("tbody",e._l(e.goodListSelected,(function(t,i){return a("tr",{key:i,staticClass:"good-type__table-data"},[a("td",{staticClass:"table-data__name"},[e._v(e._s(t.goodInfo.serviceName))]),a("td",{staticClass:"table-data__qty"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"goodSelected.qty"}],staticClass:"item__qty",attrs:{min:"1",type:"number"},domProps:{value:t.qty},on:{input:function(a){a.target.composing||e.$set(t,"qty",a.target.value)}}})]),a("td",{staticClass:"table-data__btn"},[a("button",{staticClass:"btn--del",on:{click:function(a){return e.handleDeleteItem(t,1)}}},[e._v("X")])])])})),0)])]):e._e(),e.isTypeGood.products?a("div",{staticClass:"good-selected__good-type"},[a("table",[a("thead",[a("tr",e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),0)]),a("tbody",e._l(e.goodListSelected,(function(t,i){return a("tr",{key:i,staticClass:"good-type__table-data"},[a("td",{staticClass:"table-data__name"},[e._v(e._s(e.showLongText(t.goodInfo.productName,15)))]),a("td",{staticClass:"table-data__qty"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"goodSelected.qty"}],staticClass:"item__qty",attrs:{min:"1",type:"number"},domProps:{value:t.qty},on:{input:function(a){a.target.composing||e.$set(t,"qty",a.target.value)}}})]),a("td",{staticClass:"table-data__btn"},[a("button",{staticClass:"btn--del",on:{click:function(a){return e.handleDeleteItem(t,2)}}},[e._v("X")])])])})),0)])]):e._e(),e.isTypeGood.prepaidCard?a("div",{staticClass:"good-selected__good-type"}):e._e(),e.isTypeGood.prepaidService?a("div",{staticClass:"good-selected__good-type"}):e._e(),e.isTypeGood.packages?a("div",{staticClass:"good-selected__good-type"}):e._e()])},Zt=[],Bt={item:{text:"Selected Items"},qty:{text:"Qty"},del:{text:"Del"}},zt={data:function(){return{fields:Object.assign({},Bt)}},mounted:function(){},props:{isTypeGood:{type:Object,default:function(){return{}}},goodListSelected:{type:Array,default:function(){return[]}}},computed:{},methods:{handleDeleteItem:function(e,t){1===t&&this.$emit("handleDeleteItemSelected",e.goodInfo.serviceId.toString()),2===t&&this.$emit("handleDeleteItemSelected",e.goodInfo.productId.toString())},showLongText:function(e,t){return Qe.commonFunctions.showLongText(e,t)}}},Ut=zt,Rt=(0,c.Z)(Ut,Ot,Zt,!1,null,"734167de",null),Ht=Rt.exports,qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category-good"},[a("div",{staticClass:"category"},[a("div",{staticClass:"category__title"},[e._v("Category")]),e.isTypeGood.products?a("div",e._l(e.categories,(function(t){return a("div",{key:t.orderNo,staticClass:"category__item",class:{"category__item--selected":t.productCategoryId===e.isCategorySelected},on:{click:function(){return e.handleGetProductByCategory(t.productCategoryId,t.productCategoryName)}}},[e._v(" "+e._s(t.productCategoryName)+" ")])})),0):e._e(),e.isTypeGood.services?a("div",e._l(e.categories,(function(t){return a("div",{key:t.orderNo,staticClass:"category__item",class:{"category__item--selected":t.serviceCategoryId===e.isCategorySelected},on:{click:function(){return e.handleGetServiceByCategory(t.serviceCategoryId,t.serviceCategoryName)}}},[e._v(" "+e._s(t.serviceCategoryName)+" ")])})),0):e._e(),e.isTypeGood.prepaidCard?a("div"):e._e(),e.isTypeGood.prepaidService?a("div"):e._e(),e.isTypeGood.packages?a("div"):e._e()]),a("div",{staticClass:"good"},[e.isTypeGood.products?a("div",[a("div",{staticClass:"good__title"},[e._v(e._s(e.categorySelected.id?e.categorySelected.name:e.categories.length&&e.categories[0].productCategoryName))]),e._l(e.goodList,(function(t){return a("div",{key:t.productId,staticClass:"good__item",on:{click:function(a){return e.handleAddGood(t,2,e.categorySelected)}}},[a("span",[e._v(e._s(t.productName))]),a("span",{staticClass:"item__price"},[e._v("("+e._s(e.handleFormatNumber(t.retailPrice))+")")])])}))],2):e._e(),e.isTypeGood.services?a("div",[a("div",{staticClass:"good__title"},[e._v(e._s(e.categorySelected.id?e.categorySelected.name:e.categories.length&&e.categories[0].serviceCategoryName))]),e._l(e.goodList,(function(t){return a("div",{key:t.serviceId,staticClass:"good__item",on:{click:function(a){return e.handleAddGood(t,1,e.categorySelected)}}},[a("span",[e._v(e._s(t.serviceName))]),a("span",{staticClass:"item__price"},[e._v("("+e._s(e.handleFormatNumber(t.price))+")")])])}))],2):e._e(),e.isTypeGood.prepaidCard?a("div"):e._e(),e.isTypeGood.prepaidService?a("div"):e._e(),e.isTypeGood.packages?a("div"):e._e()])])},Wt=[],Vt={name:"SalonThankzCategoryGood",data:function(){return{}},props:{categories:{type:Array,default:function(){return[]}},goodList:{type:Array,default:function(){return[]}},typeGood:{type:Number,default:1},categorySelected:{type:Object,default:function(){return{id:0,name:""}}}},computed:{isTypeGood:function(){return{products:this.typeGood===Y.sales.products,packages:this.typeGood===Y.sales.packages,services:this.typeGood===Y.sales.services,prepaidCard:this.typeGood===Y.sales.prepaidCard,prepaidService:this.typeGood===Y.sales.prepaidService}},isCategorySelected:function(){var e,t,a,i;return 0===this.categorySelected.id?1===this.typeGood?null===(e=this.categories)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.serviceCategoryId:null===(a=this.categories)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.productCategoryId:this.categorySelected.id}},mounted:function(){},methods:{handleGetServiceByCategory:function(e,t){this.$emit("handleGetServiceByCategory",{serviceCategoryId:e,serviceCategoryName:t})},handleGetProductByCategory:function(e,t){this.$emit("handleGetProductByCategory",{productCategoryId:e,productCategoryName:t})},handleFormatNumber:function(e){var t=0;return e>0&&(t=Qe.commonFunctions.formatMoneyNumber(e)),t},handleAddGood:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={id:0,name:null};0===a.id?(1===t&&(i.id=this.categories[0].serviceCategoryId,i.name=this.categories[0].serviceCategoryName),2===t&&(i.id=this.categories[0].productCategoryId,i.name=this.categories[0].productCategoryName)):i=a,this.$emit("handleAddGoodSelected",{good:e,type:t,category:i})}}},Yt=Vt,Kt=(0,c.Z)(Yt,qt,Wt,!1,null,"232cc8cd",null),Jt=Kt.exports,Qt={id:0,name:""},Xt={name:"SalonThankzSalesAction",data:function(){return{typeGood:1,goodList:[],categories:[],goodListSelected:{},goodListSelectedShow:[],iShowSelectedItem:!1,title:"Select Sales Item",windowWidth:window.innerWidth,categorySelected:Object.assign({},Qt),goodTypeSelected:Object.values(Y.sales.itemSalesType)[0].id,goodTypeSelectedName:Object.values(Y.sales.itemSalesType)[0].text}},components:{GoodType:Pt,GroupButton:jt,CategoryGood:Jt,GoodSelected:Ht,Notification:nt},props:{dataCategories:{type:Array,default:function(){return[]}},dataGoodList:{type:Array,default:function(){return[]}}},mounted:function(){var e=this;this.handleGetServiceCategory(),this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},computed:{statusScreenLaptop:function(){return this.windowWidth>Y.common.screenSize.maxScreenLaptop},isShowModal:function(){return this.dataCategories},isShowButton:function(){return{confirm:!0,delete:!1,cancel:!0}},nameButton:function(){return{confirm:"Confirm",cancel:"Cancel"}},isTypeGood:function(){return{products:this.typeGood===Y.sales.products,packages:this.typeGood===Y.sales.packages,services:this.typeGood===Y.sales.services,prepaidCard:this.typeGood===Y.sales.prepaidCard,prepaidService:this.typeGood===Y.sales.prepaidService}}},watch:{goodTypeSelected:function(e,t){e!==t&&(this.goodListSelected={},this.iShowSelectedItem=!1,this.goodListSelectedShow=[])}},methods:{showModal:function(e){var t=this;this.typeGood=e.typeGood,this.goodList=e.goodList,this.categories=e.categories,this.goodTypeSelected=e.typeGood;var a=Object.values(Y.sales.itemSalesType);this.goodTypeSelectedName=a[a.findIndex((function(e){return e.id===t.goodTypeSelected}))].text,this.isShowModal&&this.$refs.selectSalesItemModal&&this.$refs.selectSalesItemModal.show()},hideModal:function(){this.$refs.selectSalesItemModal&&this.$refs.selectSalesItemModal.hide()},handleGetGoodCategory:function(e){var t=this;if(e===Y.sales.services||e===Y.sales.products){if(!0===confirm("Change Data")){this.typeGood=e,this.goodTypeSelected=e;var a=Object.values(Y.sales.itemSalesType);this.goodTypeSelectedName=a[a.findIndex((function(e){return e.id===t.goodTypeSelected}))].text,e===Y.sales.services&&(this.categorySelected=Object.assign({},Qt),this.handleGetServiceCategory()),e===Y.sales.products&&(this.categorySelected=Object.assign({},Qt),this.handleGetProductCategory())}}else this.handleNotification()},handleGetServiceCategory:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("getServiceCategory");case 1:case"end":return t.stop()}}),t)})))()},handleGetProductCategory:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("getProductCategory");case 1:case"end":return t.stop()}}),t)})))()},handleGetProductByCategory:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o,s;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e.productCategoryId,n=void 0===i?0:i,o=e.productCategoryName,s=void 0===o?"":o,t.categorySelected={id:n,name:s},t.$emit("getProductByCategory",n);case 3:case"end":return a.stop()}}),a)})))()},handleGetServiceByCategory:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o,s;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e.serviceCategoryId,n=void 0===i?0:i,o=e.serviceCategoryName,s=void 0===o?"":o,t.categorySelected={id:n,name:s},t.$emit("getServiceByCategory",n);case 3:case"end":return a.stop()}}),a)})))()},resetModal:function(){this.typeGood=1,this.goodListSelected={},this.iShowSelectedItem=!1,this.categorySelected=Object.assign({},Qt),this.goodTypeSelected=Object.values(Y.sales.itemSalesType)[0].id,this.goodTypeSelectedName=Object.values(Y.sales.itemSalesType)[0].text,this.$emit("resetGoodType"),this.$emit("resetDataCategoryGood")},handleAddGoodSelected:function(e){var t,a=e.good,i=e.type,n=e.category;1===i?t=a.serviceId.toString():2===i&&(t=a.productId.toString()),this.goodListSelected[t]?this.goodListSelected[t].qty+=1:this.goodListSelected[t]={qty:1,type:i,goodInfo:a,categoryInfo:n},this.goodListSelectedShow=Object.values(this.goodListSelected),this.iShowSelectedItem=!0},handleDeleteItemSelected:function(e){delete this.goodListSelected[e],this.goodListSelectedShow=Object.values(this.goodListSelected),this.goodListSelectedShow.length||(this.iShowSelectedItem=!1)},handleConfirmItemSelected:function(){this.$emit("confirmItemSelected",this.goodListSelected),this.$refs.selectSalesItemModal.hide()},handleCloseModal:function(){this.hideModal()},handleNotification:function(){this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Not Support Yet!"}]})}}},ea=Xt,ta=(0,c.Z)(ea,Et,Ft,!1,null,"6f913054",null),aa=ta.exports,ia=[{type:0,text:"Add Sales"},{type:1,text:"Edit Sales"}],na={id:0,name:""},oa={salesItem:{text:"Sales Items"},unitPrice:{text:"Unit Price"},qTy:{text:"Q'ty"},discount:{text:"Discount"},amount:{text:"Amount"},staff:{text:"Staff"},salesType:{text:"Sales Type"},pointDeduct:{text:"Points Deduct"},balanceDeduct:{text:"Balance Deduct"},delete:{text:"Delete"}},sa={name:"SalonThankzSalesAction",data:function(){return{title:"",typeGood:1,goodList:[],salesPaid:0,salesNotes:"",hoursSales:0,categories:[],typeAction:{},dataClient:{},totalAmount:0,outstanding:0,minutesSales:0,paymentMethods:[],paymentSelected:[],goodListSelected:{},invoiceDateTimeTS:0,salesLoyaltyPoint:0,goodListSelectedShow:[],registeredDate:Date.now(),registeredTime:Date.now(),windowWidth:window.innerWidth,fields:Object.assign({},oa),categorySelected:Object.assign({},na),goodTypeSelected:Object.values(Y.sales.itemSalesType)[0].id,masks:{input:"YYYY-MM-DD"}}},components:{GoodType:Pt,GroupButton:jt,Notification:nt,SelectSalesItem:aa},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},computed:{statusScreenLaptop:function(){return this.windowWidth>Y.common.screenSize.maxScreenLaptop},isShow:function(){return this.goodListSelectedShow.length},isShowButton:function(){return{confirm:!0,delete:!1,cancel:!0}},minuteOptions:function(){return Qe.commonFunctions.minuteSelect()},hourOptions:function(){return Qe.commonFunctions.hourSelect()}},methods:{showModal:function(e){var t=this;this.hoursSales=Qe.momentFunctions.GetHours(),this.minutesSales=Qe.momentFunctions.GetMinutes();var a=["Cash","Credit Card"],i=E.saleSession.getAllPaymentMethods();i.forEach((function(e){a.includes(e.name)&&t.paymentMethods.push(e)})),this.dataClient=e.client,this.invoiceDateTimeTS=e.invoiceDateTimeTS,this.typeAction=ia[ia.findIndex((function(t){return t.type===e.type}))],this.$refs.salesActionModal&&this.$refs.salesActionModal.show(),this.typeAction.type||(this.handleGetServiceCategory(),this.$refs.refSelectSalesItem&&this.$refs.refSelectSalesItem.showModal({typeGood:1,goodList:this.goodList,categories:this.categories}))},hideModal:function(){this.resetModal(),this.$refs.salesActionModal&&this.$refs.salesActionModal.hide()},handleSetLoading:function(e){this.$emit("loading",e)},handleGetServiceCategory:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i,n;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={status:1,pageSize:100,pageNumber:1,shopId:E.shopSession.getShopId()},e.$emit("loading",!0),t.prev=2,t.next=5,de.goodApis.getServiceCategory(a);case 5:if(i=t.sent,200===i.status){t.next=9;break}throw e.$emit("loading",!1),i;case 9:return i.data.isOK?(e.categories=i.data.result.items,e.handleGetServiceByCategory(null===(n=i.data.result.items[0])||void 0===n?void 0:n.serviceCategoryId)):console.log("error",i),e.$emit("loading",!1),t.abrupt("return");case 14:t.prev=14,t.t0=t["catch"](2),console.log("errors",t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))()},handleGetProductCategory:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={pageNumber:1,pageSize:100,shopId:E.shopSession.getShopId(),status:1},e.$emit("loading",!0),t.prev=2,t.next=5,de.goodApis.getProductCategory(a);case 5:if(i=t.sent,200===i.status){t.next=9;break}throw e.$emit("loading",!1),i;case 9:i.data.isOK?(e.handleGetProductByCategory(),e.categories=i.data.result.items):console.log("error",i),e.$emit("loading",!1),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),console.log("errors",t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))()},handleGetProductByCategory:function(){var e=arguments,t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:0,n={status:1,keyWord:"",pageSize:100,pageNumber:1,usageStatus:"1,3",isCalculateValuation:!1,productCategoryId:i,shopId:E.shopSession.getShopId()},t.$emit("loading",!0),a.prev=3,a.next=6,de.goodApis.getProductByCategory(n);case 6:if(o=a.sent,200===o.status){a.next=10;break}throw t.$emit("loading",!1),o;case 10:o.data.isOK?t.goodList=o.data.result.items:console.log("error",o),t.$emit("loading",!1),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](3),console.log("errors",a.t0);case 17:case"end":return a.stop()}}),a,null,[[3,14]])})))()},handleGetServiceByCategory:function(){var e=arguments,t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:0,n={status:1,pageSize:100,pageNumber:1,serviceCategoryId:i,shopId:E.shopSession.getShopId()},t.$emit("loading",!0),a.prev=3,a.next=6,de.goodApis.getServiceByCategory(n);case 6:if(o=a.sent,200===o.status){a.next=10;break}throw t.$emit("loading",!1),o;case 10:o.data.isOK?t.goodList=o.data.result.items:console.log("error",o),t.$emit("loading",!1),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](3),console.log("errors",a.t0);case 17:case"end":return a.stop()}}),a,null,[[3,14]])})))()},handleResetDataCategoryGood:function(){this.goodList=[],this.categories=[]},handleAddSales:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i,n,o,s,l,r;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Object.values(e.goodListSelected).length){t.next=50;break}if(a=Qe.momentFunctions.FormatDate(e.registeredDate),i="".concat(a,"  ").concat(e.hoursSales,":").concat(e.minutesSales),n=Qe.momentFunctions.DateIntoUnix(i),!(n>Qe.momentFunctions.DateIntoUnix())){t.next=7;break}return e.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Can not add sales in future."}]}),t.abrupt("return");case 7:if(o=Object.values(e.goodListSelected).map((function(e){var t=Qe.commonFunctions.formatSaleItem(e);return t})),e.paymentSelected[0]&&(e.paymentSelected[0].paymentAmount=e.salesPaid),s={balanceDeduction:0,balanceMoves:[],bookingId:0,branchNumber:E.shopSession.getBranchInfo().number,chainId:E.shopSession.chainId,clientId:e.dataClient.clientId,createdById:E.shopSession.getUserAccount().id,createdByName:E.shopSession.getUserAccount().name,createdDateTimeTS:n,deductionPoints:0,deletedById:0,deletedByName:"",deletedDateTimeTS:0,earnedPoints:e.salesLoyaltyPoint,editedById:0,editedByName:"",editedDateTimeTS:0,editedSalesId:0,hourOfDay:Qe.momentFunctions.GetHours(),invoiceDateTimeTS:e.invoiceDateTimeTS,isSalesConnect:!1,notes:e.salesNotes.trim(),outstanding:e.outstanding,payments:e.paymentSelected,salesId:0,salesItems:o,salesNumber:"",sessionToken:E.shopSession.getSessionToken(),shopId:E.shopSession.getShopId(),shopLocation:Y.payload.DEFAULT_SHOP_LOCATION,status:0,totalAmount:e.totalAmount},e.$emit("loading",!0),!(e.outstanding>0)){t.next=33;break}if(!0!==confirm("The outstanding is ".concat(e.handleFormatNumber(e.outstanding),". Do you want to save?"))){t.next=30;break}return t.prev=13,t.next=16,de.salesApis.addSales(s);case 16:if(l=t.sent,200===l.status){t.next=20;break}throw e.$emit("loading",!1),l;case 20:l.data.isOK?(e.hideModal(),e.resetModal()):alert(l.data.errorMessages),e.$emit("loading",!1),t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](13),console.log("errors",t.t0);case 27:e.$emit("loading",!1),t.next=31;break;case 30:e.$emit("loading",!1);case 31:t.next=48;break;case 33:return t.prev=33,t.next=36,de.salesApis.addSales(s);case 36:if(r=t.sent,200===r.status){t.next=40;break}throw e.$emit("loading",!1),r;case 40:r.data.isOK?(e.hideModal(),e.resetModal()):alert(r.data.errorMessages),e.$emit("loading",!1),t.next=47;break;case 44:t.prev=44,t.t1=t["catch"](33),console.log("errors",t.t1);case 47:e.$emit("loading",!1);case 48:t.next=51;break;case 50:e.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Sales items list can not be empty."}]});case 51:case"end":return t.stop()}}),t,null,[[13,24],[33,44]])})))()},resetModal:function(){this.salesPaid=0,this.hoursSales=0,this.dataClient={},this.outstanding=0,this.totalAmount=0,this.salesNotes="",this.minutesSales=0,this.paymentSelected=[],this.goodListSelected={},this.salesLoyaltyPoint=0,this.goodListSelectedShow=[]},handleConfirmItemSelected:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(a){e.goodListSelected[a]?e.goodListSelected[a].qty+=t[a].qty:e.goodListSelected[a]=t[a]})),this.goodListSelectedShow=this.handleFormatDataSalesItem()},handleDeleteItemSelected:function(e){delete this.goodListSelected[e],this.goodListSelectedShow=Object.values(this.goodListSelected)},handlePaymentSelected:function(e){this.outstanding=0,this.salesPaid=this.totalAmount;var t=Qe.momentFunctions.DateIntoUnix(),a=Qe.commonFunctions.formatPaymentMethod(e,t);this.paymentSelected=[a]},handleGetGoodCategory:function(e){this.typeGood=e,this.goodTypeSelected=e,e===Y.sales.services&&(this.categorySelected=Object.assign({},na),this.handleGetServiceCategory()),e===Y.sales.products&&(this.categorySelected=Object.assign({},na),this.handleGetProductCategory())},handleShowSelectSalesItem:function(){this.typeGood===Y.sales.services||this.typeGood===Y.sales.products?this.$refs.refSelectSalesItem&&this.$refs.refSelectSalesItem.showModal({typeGood:this.typeGood,goodList:this.goodList,categories:this.categories}):this.handleNotification()},handleResetGoodType:function(){this.typeGood=1,this.goodTypeSelected=Object.values(Y.sales.itemSalesType)[0].id},handleQty:function(e,t){this.goodListSelected[e.toString()].qty=t,this.goodListSelectedShow=this.handleFormatDataSalesItem()},handleUnitPrice:function(e,t){var a=this.goodListSelected[e.toString()].type;1===a&&(this.goodListSelected[e.toString()].goodInfo.price=t),2===a&&(this.goodListSelected[e.toString()].goodInfo.retailPrice=t),this.goodListSelectedShow=this.handleFormatDataSalesItem()},handleFormatDataSalesItem:function(){var e=this;this.totalAmount=0,this.outstanding=0;var t=Object.values(this.goodListSelected).map((function(t){return t.showDataTable={goodId:0,salesItem:"",unitPrice:0,qTy:0,discount:0,amount:0,staff:"",salesType:"",pointDeduct:0,balanceDeduct:0},t.type===Y.sales.services&&(t.showDataTable.qTy=t.qty,t.showDataTable.goodId=t.goodInfo.serviceId,t.showDataTable.unitPrice=t.goodInfo.price,t.showDataTable.salesItem=t.goodInfo.serviceName,t.showDataTable.amount=t.goodInfo.price*t.qty),t.type===Y.sales.products&&(t.showDataTable.qTy=t.qty,t.showDataTable.goodId=t.goodInfo.productId,t.showDataTable.unitPrice=t.goodInfo.retailPrice,t.showDataTable.salesItem=t.goodInfo.productName,t.showDataTable.amount=t.goodInfo.retailPrice*t.qty),e.totalAmount+=t.showDataTable.unitPrice*t.showDataTable.qTy,t}));return this.outstanding=this.totalAmount-this.salesPaid,t},handleFormatNumber:function(e){var t=0;return e>0&&(t=Qe.commonFunctions.formatMoneyNumber(e)),t},handleNotification:function(){this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Not Support Yet!"}]})},handleRandomIndex:function(){var e=Qe.randomFunctions.randomIndex();return e}}},la=sa,ra=(0,c.Z)(la,wt,xt,!1,null,"7d746379",null),da=ra.exports,ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"client-actions-modal"},[a("validation-observer",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.invalid;return[a("b-modal",{ref:"clientActionsModal",attrs:{static:"","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,size:e.typeModal?"xl":"lg","modal-class":"modal client-actions-modal__modal"},on:{hide:e.handleResetData}},[a("div",{staticClass:"content modal__content",class:{"modal__content--add-client":!e.typeModal}},[a("div",{staticClass:"data-input content__data-input"},[a("div",{staticClass:"group-input group-input--name data-input__group-input data-input__group-input--name"},[a("validation-provider",{attrs:{name:"name",rules:"required|min:3|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("label",[e._v("Client Name "),a("span",[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataClient.clientName,expression:"dataClient.clientName"}],attrs:{maxlength:"50",placeholder:"Ex: ThankZ"},domProps:{value:e.dataClient.clientName},on:{input:function(t){t.target.composing||e.$set(e.dataClient,"clientName",t.target.value)}}}),a("div",{staticClass:"error-text group-input__error-text"},[e._v(" "+e._s(i[0])+" ")])]}}],null,!0)})],1),a("div",{staticClass:"group-input group-input--number data-input__group-input data-input__group-input--number"},[a("validation-provider",{attrs:{name:"number",rules:"required|max:16"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("label",[e._v("Client Number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataClient.memberNumber,expression:"dataClient.memberNumber"}],attrs:{minlength:"1",type:"number",maxlength:"16",placeholder:"Ex: 1703",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"},domProps:{value:e.dataClient.memberNumber},on:{input:function(t){t.target.composing||e.$set(e.dataClient,"memberNumber",t.target.value)}}}),a("div",{staticClass:"error-text group-input__error-text"},[e._v(" "+e._s(i[0])+" ")])]}}],null,!0)})],1),a("div",{staticClass:"group-input group-input--mobile data-input__group-input data-input__group-input--mobile"},[a("validation-provider",{attrs:{name:"mobile",rules:"min:10|max:11"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("label",[e._v("Mobile Number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataClient.mobileNumber,expression:"dataClient.mobileNumber"}],staticClass:"no-arrow group-input--no-arrow",attrs:{type:"number",minlength:"10",maxlength:"11",placeholder:"Ex: 0385076161",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"},domProps:{value:e.dataClient.mobileNumber},on:{input:function(t){t.target.composing||e.$set(e.dataClient,"mobileNumber",t.target.value)}}}),a("div",{staticClass:"error-text group-input__error-text"},[e._v(" "+e._s(i[0])+" ")])]}}],null,!0)})],1),a("div",{staticClass:"group-input group-input--sex data-input__group-input data-input__group-input--sex"},[a("label",[e._v("Gender")]),a("b-form-radio",{attrs:{name:"sex-radios",value:"1"},model:{value:e.dataClient.sex,callback:function(t){e.$set(e.dataClient,"sex",t)},expression:"dataClient.sex"}},[e._v("Male")]),a("b-form-radio",{attrs:{name:"sex-radios",value:"2"},model:{value:e.dataClient.sex,callback:function(t){e.$set(e.dataClient,"sex",t)},expression:"dataClient.sex"}},[e._v("Female")])],1),a("div",{staticClass:"group-input group-input--group data-input__group-input data-input__group-input--group"},[a("label",[e._v("Client Group")]),a("b-form-select",{attrs:{options:e.clientGroupOptions},model:{value:e.groupClient,callback:function(t){e.groupClient=t},expression:"groupClient"}})],1),a("div",{staticClass:"group-input group-input--register-date data-input__group-input data-input__group-input--register-date"},[a("label",[e._v("Registered Date "),a("span",[e._v("*")])]),a("v-date-picker",{staticClass:"date-picker group-input--register-date__date-picker",attrs:{masks:e.masks},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,n=t.inputEvents;return[a("input",e._g({staticClass:"input-date-picker date-picker__input-date-picker",domProps:{value:i}},n))]}}],null,!0),model:{value:e.registeredDate,callback:function(t){e.registeredDate=t},expression:"registeredDate"}})],1),e.errorActionClient.isShow?a("div",{staticClass:"error-client data-input__error-client"},e._l(e.errorActionClient.errorMessages,(function(t){return a("div",{key:t.errorCode},[e._v(" "+e._s(t.errorMessage)+" ")])})),0):e._e()]),e.typeModal&&e.statusScreenLaptop?a("div",{staticClass:"avatar-image content__avatar-image",on:{click:e.showUploadImageModal}},[""===e.urlImageAvatar?a("div",{staticClass:"message avatar-image__message"},[e._v(" Click here to upload avatar ")]):e._e(),""!==e.urlImageAvatar?a("img",{staticClass:"avatar-image__img-avatar",attrs:{src:e.urlImageAvatar}}):e._e()]):e._e()]),a("footer",{staticClass:"footer modal__footer"},[e.statusScreenLaptop?e._e():a("button",{staticClass:"footer__btn-upload-image",on:{click:e.showUploadImageModal}},[e._v(" "+e._s(""===e.urlImageAvatar?"Add Avatar":"View Avatar")+" ")]),a("group-button",{staticClass:"footer__group-button",attrs:{isShowButton:e.isShowButton,disableConfirm:i},on:{cancel:e.onClickCancel,confirm:e.onClickConfirm,delete:e.onClickDelete}})],1),a("div",[e.typeModal?a("client-tabs",{ref:"refClientTabs",attrs:{dataSalesHistory:e.dataSalesHistory,dataPrepaidCards:e.dataPrepaidCards,dataPrepaidServices:e.dataPrepaidServices},on:{loading:e.handleLoading,getPrepaidCard:e.handleGetPrepaidCard,getSalesHistory:e.handleGetSalesHistory,getPrepaidService:e.handleGetPrepaidService}}):e._e()],1)])]}}])}),a("upload-image-modal",{ref:"uploadImageModal",on:{loading:e.handleLoading,uploadImage:e.handleUploadAvatar,deleteImage:e.handleDeleteAvatar,updateUrlImage:e.updateUrlImageAvatar}}),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}}),a("confirm-modal",{ref:"refConfirmModal",on:{confirm:e.handleDeleteClient}})],1)},ua=[],pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"client-tabs"},[a("b-tabs",{staticClass:"client-tabs__tabs",attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Sales History"},on:{click:e.handleGetSalesHistory}},[a("div",{staticClass:"tabs__tab"},[a("div",{staticClass:"tab__sales-history"},[a("span",{staticClass:"sales-history__title"},[e._v(" "+e._s(e.dataSalesHistory.pagingInfo&&"All "+e.dataSalesHistory.pagingInfo.totalItems+" records")+" ")]),a("div",{staticClass:"tab__checkbox"},[a("b-form-checkbox",{attrs:{value:"true","unchecked-value":"false",id:"checkbox-sales-history",name:"checkbox-sales-history"},model:{value:e.isShowHistoryDeleted,callback:function(t){e.isShowHistoryDeleted=t},expression:"isShowHistoryDeleted"}},[e._v(" Show Deleted ")])],1)]),a("div",{staticClass:"tab__table"},[a("table",{staticClass:"table tab__table"},[a("thead",[a("tr",e._l(e.fields.salesHistory,(function(t){return a("th",{key:t.text,class:{"th-no-data":e.statusScreenPhone}},[e._v(" "+e._s(t.text)+" ")])})),0)]),e.isShow.salesHistory?a("tbody",e._l(e.dataSalesHistory.items,(function(t){return a("tr",{key:t.salesNumber,class:{"is-expired":null!==t.deletedById}},[a("td",{staticClass:"table__table-data table__table-data--sales-history-date"},[e._v(" "+e._s(e.handleFormatDate(t.createdDateTimeTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--sales-history-items"},e._l(t.items,(function(t,i){return a("div",{key:i},[e._v(" "+e._s(e.showLongText(t.itemName,15))+" ")])})),0),a("td",{staticClass:"table__table-data table__table-data--sales-history-amount"},[e._v(" "+e._s(e.handleFormatNumber(t.totalAmount))+" ")]),a("td",{staticClass:"table__table-data table__table-data--sales-history-payment"},e._l(t.payments,(function(t){return a("div",{key:t.paymentMethodId},[e._v(" "+e._s(t&&e.showLongText(t.paymentMethodName,10))+" ")])})),0),a("td",{staticClass:"table__table-data table__table-data--sales-history-pay-amount"},[t.outstanding?a("div",[e._v(" -"+e._s(e.handleFormatNumber(t.outstanding))+" ")]):a("div",[e._v(" "+e._s(e.handleFormatNumber(t.totalAmount))+" ")])]),a("td",{staticClass:"table__table-data table__table-data--sales-history-notes"},[e._v(" "+e._s(e.showLongText(t.notes,15))+" ")]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--view",on:{click:function(a){return e.onClickShowSalesDetail(t)}}},[e._v(" View ")])])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"9"}},[e._v("No data")])])])])]),e.page.pageTotal>1?a("paging",{attrs:{page:e.page},on:{handlePaging:e.handleGetSalesHistory}}):e._e()],1)]),a("b-tab",{attrs:{title:"Bookings",disabled:""}}),a("b-tab",{attrs:{title:"Prepaid Cards",active:""},on:{click:e.handleGetPrepaidCard}},[a("div",{staticClass:"tabs__tab tabs__tab--prepaid-card"},[a("div",{staticClass:"tab__checkbox"},[a("b-form-checkbox",{attrs:{value:"true",id:"checkbox-card","unchecked-value":"false",name:"checkbox-expired"},model:{value:e.expired.card,callback:function(t){e.$set(e.expired,"card",t)},expression:"expired.card"}},[e._v(" Show Expired ")])],1),e.statusScreenLaptop||!e.isShow.card?a("table",{staticClass:"table tab__table"},[a("thead",[a("tr",[e._l(e.fields.prepaidCard,(function(t){return a("th",{key:t.text,class:{"th-no-data":e.statusScreenPhone}},[e._v(" "+e._s(t.text)+" ")])})),a("th",{attrs:{colspan:"2"}},[e._v("Actions")])],2)]),e.isShow.card?a("tbody",e._l(e.dataPrepaidGoods.cards,(function(t){return a("tr",{key:t.id,class:{"is-expired":e.handleGoodExpired(e.good=t,e.type=e.typePrepaidGood.card)}},[a("td",{staticClass:"table__table-data table__table-data--prepaid-name"},[e._v(" "+e._s(t.prepaidCardName)+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance"},[e._v(" "+e._s(e.handleFormatNumber(t.balance))+" ")]),a("td",{staticClass:"table__table-data table__table-data--date"},[e._v(" "+e._s(e.handleFormatDate(t.expiryDateTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance"},[e._v(" "+e._s(e.handleFormatNumber(t.initialBalance))+" ")]),a("td",{staticClass:"table__table-data table__table-data--discount"},[e._v(" "+e._s(e.handleFormatDiscount(t.discountForService))+" ")]),a("td",{staticClass:"table__table-data table__table-data--discount"},[e._v(" "+e._s(e.handleFormatDiscount(t.discountForProduct))+" ")]),a("td",{staticClass:"table__table-data table__table-data--date"},[e._v(" "+e._s(e.handleFormatDate(t.invoiceDateTimeTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--edit",on:{click:e.handleClickEdit}},[e._v(" Edit ")])]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--view",on:{click:function(){return e.onClickShowHistoryPrepaidGood(t)}}},[e._v(" View ")])])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"9"}},[e._v("No data")])])])]):e._l(e.dataPrepaidGoods.cards,(function(t){return a("div",{key:t.id},[a("prepaid-good-view",{attrs:{"prepaid-good-info":t,"prepaid-good-field":e.fields.prepaidCard,"type-prepaid-good":e.typePrepaidGood.card},on:{handleEdit:e.handleClickEdit,handleView:function(){return e.onClickShowHistoryPrepaidGood(t)}},scopedSlots:e._u([{key:"balance",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatNumber(t.balance)))])]}},{key:"expiryDateTS",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDate(t.expiryDateTS)))])]}},{key:"initialBalance",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatNumber(t.initialBalance)))])]}},{key:"discountForService",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDiscount(t.discountForService)))])]}},{key:"discountForProduct",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDiscount(t.discountForProduct)))])]}},{key:"invoiceDateTimeTS",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDate(t.invoiceDateTimeTS)))])]}}],null,!0)})],1)})),e.page.pageTotal>1?a("paging",{attrs:{page:e.page},on:{handlePaging:e.handleGetPrepaidCard}}):e._e()],2)]),a("b-tab",{attrs:{title:"Prepaid Service"},on:{click:e.handleGetPrepaidService}},[a("div",{staticClass:"tabs__tab tabs__tab--prepaid-service"},[a("div",{staticClass:"tab__checkbox"},[a("b-form-checkbox",{attrs:{value:"true",id:"checkbox-service","unchecked-value":"false",name:"checkbox-expired"},model:{value:e.expired.service,callback:function(t){e.$set(e.expired,"service",t)},expression:"expired.service"}},[e._v(" Show Expired ")])],1),e.statusScreenLaptop||!e.isShow.service?a("table",{staticClass:"table tab__table",attrs:{responsive:""}},[a("thead",[a("tr",[e._l(e.fields.prepaidService,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),a("th",{attrs:{colspan:"2"}},[e._v("Actions")])],2)]),e.isShow.service?a("tbody",e._l(e.dataPrepaidGoods.services,(function(t){return a("tr",{key:t.id,class:{"is-expired":e.handleGoodExpired(e.good=t,e.type=e.typePrepaidGood.service)}},[a("td",{staticClass:"table__table-data table__table-data--prepaid-name"},[e._v(" "+e._s(t.prepaidServiceName)+" ")]),a("td",{staticClass:"table__table-data table__table-data--quantity"},[e._v(" "+e._s(e.handleFormatNumber(t.quantity))+" "),a("button",{staticClass:"data--btn__btn data--btn__btn--deduct",on:{click:e.onClickDeduct}},[e._v(" Deduct ")])]),a("td",{staticClass:"table__table-data table__table-data--date"},[e._v(" "+e._s(e.handleFormatDate(t.expiryDateTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--quantity"},[e._v(" "+e._s(e.handleFormatNumber(t.initialQuantity))+" ")]),a("td",{staticClass:"table__table-data table__table-data--date"},[e._v(" "+e._s(e.handleFormatDate(t.invoiceDateTimeTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--edit",on:{click:e.handleClickEdit}},[e._v(" Edit ")])]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--view",on:{click:e.onClickViewPrepaidService}},[e._v(" View ")])])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"6"}},[e._v("No data")])])])]):e._l(e.dataPrepaidGoods.services,(function(t){return a("div",{key:t.id},[a("prepaid-good-view",{attrs:{"prepaid-good-info":t,"prepaid-good-field":e.fields.prepaidService,"type-prepaid-good":e.typePrepaidGood.service},on:{handleEdit:e.handleClickEdit,handleDeduct:e.onClickDeduct,handleView:e.onClickViewPrepaidService},scopedSlots:e._u([{key:"quantity",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatNumber(t.quantity)))])]}},{key:"expiryDateTS",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDate(t.expiryDateTS)))])]}},{key:"initialQuantity",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatNumber(t.initialQuantity)))])]}},{key:"invoiceDateTimeTS",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDate(t.invoiceDateTimeTS)))])]}}],null,!0)})],1)})),e.page.pageTotal>1?a("paging",{attrs:{page:e.page},on:{handlePaging:e.handleGetPrepaidService}}):e._e()],2)]),a("b-tab",{attrs:{title:"Messages",disabled:""}}),a("b-tab",{attrs:{title:"Photos",disabled:""}})],1),a("prepaid-good-history",{ref:"refPrepaidGoodHistory",on:{loading:e.handleLoading,showHistoryPrepaidGoodPaging:e.onClickShowHistoryPrepaidGoodPaging}}),a("sales-detail",{ref:"refSalesDetail"}),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}})],1)},ma=[],ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paging"},[a("label",{staticClass:"page-total paging__page-total"},[e._v("Page "+e._s(e.page.pageNumber)+" of "+e._s(e.page.pageTotal))]),a("button",{staticClass:"paging__btn paging__btn--go-to-first-page",on:{click:e.clickGoToFirstPage}},[e._v(" << ")]),a("button",{staticClass:"paging__btn paging__btn--go-to-previous-page",on:{click:e.clickGoToPreviousPage}},[e._v(" < ")]),a("button",{staticClass:"paging__btn paging__btn--go-to-next-page",on:{click:e.clickGoToNextPage}},[e._v(" > ")]),a("button",{staticClass:"paging__btn paging__btn--go-to-last-page",on:{click:e.clickGoToLastPage}},[e._v(" >> ")]),a("button",{staticClass:"paging__btn paging__btn--go-to",on:{click:e.clickGoto}},[e._v(" "+e._s(e.isShowSelectPage?"Goto":"Hide")+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.pageSelected,expression:"pageSelected"}],attrs:{hidden:e.isShowSelectPage},on:{click:e.clickSelectedPage,change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageSelected=t.target.multiple?a:a[0]}}},e._l(e.optionsPage,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)])},ga=[],va={pageTotal:1,pageNumber:1},fa={name:"SalonThankzPaging",data:function(){return{pageSelected:1,isShowSelectPage:!0}},props:{page:{type:Object,default:function(){return Object.assign({},va)}}},computed:{optionsPage:function(){for(var e=[],t=1;t<=this.page.pageTotal;t++)e.push({text:t,value:t});return e}},mounted:function(){},methods:{clickGoToFirstPage:function(){this.pageSelected=1,this.$emit("handlePaging",{pageNumber:1})},clickGoToPreviousPage:function(){this.page.pageNumber>1&&(this.pageSelected=this.page.pageNumber-1,this.$emit("handlePaging",{pageNumber:this.page.pageNumber-1}))},clickGoToNextPage:function(){this.page.pageNumber<this.page.pageTotal&&(this.pageSelected=this.page.pageNumber+1,this.$emit("handlePaging",{pageNumber:this.page.pageNumber+1}))},clickGoToLastPage:function(){this.pageSelected=this.page.pageTotal,this.$emit("handlePaging",{pageNumber:this.page.pageTotal})},clickSelectedPage:function(){this.pageSelected!==this.page.pageNumber&&this.$emit("handlePaging",{pageNumber:this.pageSelected})},clickGoto:function(){this.isShowSelectPage=!this.isShowSelectPage}}},_a=fa,ba=(0,c.Z)(_a,ha,ga,!1,null,"4f6935fa",null),Sa=ba.exports,Ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sales-detail"},[a("b-modal",{ref:"salesDetailModal",attrs:{static:"",size:"xl","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal sales-detail-modal__modal"}},[a("div",{staticClass:"content modal__content"},[a("div",{staticClass:"title content__title"},[e._v(e._s(e.title))]),a("div",{staticClass:"client-name content__client-name"},[e._v(" "+e._s(!!e.salesDetail&&e.salesDetail.clientName)+" ")]),a("div",{staticClass:"sales-date content__sales-date"},[e._v(" "+e._s(!!e.salesDetail&&e.handleFormatDate(e.salesDetail.createdDateTimeTS))+" ")]),e.salesDetail&&e.statusScreenLaptop?a("table",{staticClass:"table tab__table"},[a("thead",[a("tr",e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),0)]),a("tbody",e._l(e.salesDetail.salesItems,(function(t,i){return a("tr",{key:i},[a("td",{staticClass:"table__table-data table__table-data--name"},[e._v(" "+e._s(e.showLongText(t.goodsName,20))+" ")]),a("td",{staticClass:"table__table-data table__table-data--price"},[e._v(" "+e._s(e.handleNumber(t.unitPrice))+" ")]),a("td",{staticClass:"table__table-data table__table-data--quantity"},[e._v(" "+e._s(e.handleNumber(t.quantity))+" ")]),a("td",{staticClass:"table__table-data table__table-data--discount"},[e._v(" "+e._s(t.discountValue?t.discountValue+"%":"")+" ")]),a("td",{staticClass:"table__table-data table__table-data--price"},[e._v(" "+e._s(e.handleNumber(t.amount))+" "),a("div",{staticClass:"table-data--price--initial"},[e._v(" "+e._s(t.prepaidCardInitialBalance?"("+e.handleNumber(t.prepaidCardInitialBalance)+")":"")+" ")])]),a("td",{staticClass:"table__table-data table__table-data--staff"},[e._v(" "+e._s(t.staffs)+" ")]),a("td",{staticClass:"table__table-data table__table-data--sales-type"},[e._v(" "+e._s(t.salesTypeName)+" ")]),a("td",{staticClass:"table__table-data table__table-data--point-deduct"},[e._v(" "+e._s(t.deductionPoints?e.handleNumber(t.deductionPoints):"")+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance-deduct"},[e._v(" "+e._s(t.deductionAmount?e.handleNumber(t.deductionAmount):"")+" ")])])})),0)]):e._e(),e.salesDetail&&!e.statusScreenLaptop?a("div",{staticClass:"modal__content-small"},e._l(e.salesDetail.salesItems,(function(t,i){return a("div",{key:i,staticClass:"content-small__detail"},[a("div",{staticClass:"detail__title"},[a("div",{staticClass:"title__good-name"},[e._v(" "+e._s(e.showLongText(t.goodsName,20))+", ")]),a("div",{staticClass:"title__good-amount"},[e._v("   Amount "+e._s(e.handleNumber(t.amount))+" ")])]),a("div",{staticClass:"detail__more"},[a("div",{staticClass:"more__price"},[e._v(" Unit Price "+e._s(e.handleNumber(t.unitPrice))+" ")]),a("div",{staticClass:"more__quatity"},[e._v("   Q'ty "+e._s(e.handleNumber(t.quantity))+" ")]),a("div",{staticClass:"more__discount"},[e._v("   Discount "+e._s(t.discountValue?t.discountValue:0)+" ")])])])})),0):e._e()]),a("div",{staticClass:"footer modal__footer"},[a("div",{staticClass:"payment-name footer__payment-name"},[e._v("Payment")]),a("div",{staticClass:"payment-notes footer__payment-notes"},[a("div",{staticClass:"total-sales payment-notes__total-sales"},[a("div",{staticClass:"total-amount total-sales__total-amount"},[a("span",{staticClass:"payment-method-name"},[e._v("Total Amount")]),e._v(" "+e._s(!!e.salesDetail&&e.handleNumber(e.salesDetail.totalAmount))+" ")]),a("div",{staticClass:"point total-sales__point"},[a("span",{staticClass:"payment-method-name"},[e._v("Point Deduction")]),e._v(" "+e._s(!!e.salesDetail&&e.handleNumber(e.salesDetail.deductionPoints))+" ")]),a("div",{staticClass:"balance total-sales__balance"},[e._v("Balance Deduction 0")]),e._l(!!e.salesDetail&&e.salesDetail.payments,(function(t,i){return a("div",{key:i,staticClass:"payment-used total-sales__payment-used"},[a("div",{staticClass:"payment-type payment-used__payment-type"},[a("div",{staticClass:"payment-name payment-type__payment-name"},[a("span",{staticClass:"payment-method-name"},[e._v(" "+e._s(t.paymentMethodName)+" ")])]),a("div",{staticClass:"payment-value payment-type__payment-value"},[e._v(" "+e._s(e.handleNumber(t.paymentAmount))+" ")])]),a("div",{staticClass:"payment-date payment-used__payment-date"},[e._v(" "+e._s("[Paid ] "+e.handleFormatDateTime(t.paidDateTimeTS))+" ")])])})),a("div",{staticClass:"outstanding total-sales__outstanding"},[a("span",{staticClass:"payment-method-name"},[e._v("Outstanding")]),e._v(" "+e._s(!!e.salesDetail&&e.handleNumber(e.salesDetail.outstanding))+" ")]),a("div",{staticClass:"loyalty-point total-sales__loyalty-point"},[a("span",{staticClass:"payment-method-name"},[e._v("Earn Loyalty Points")]),e._v(" "+e._s(!!e.salesDetail&&e.handleNumber(e.salesDetail.earnedPoints))+" ")])],2),a("div",{staticClass:"notes payment-notes__text-notes"},[a("textarea",{attrs:{disabled:""},domProps:{value:e.salesDetail&&e.salesDetail.notes}})]),a("div",{staticClass:"payment-notes__button--close"},[a("group-button",{attrs:{nameButton:e.nameButton,isShowButton:e.isShowGroupButton},on:{cancel:e.onClickCancel}})],1)])])])],1)},ya=[],wa={salesItems:{text:"Sales Items"},unitPrice:{text:"Unit Price"},quantity:{text:"Q'ty"},discount:{text:"Discount"},amount:{text:"Amount"},staff:{text:"Staff"},salesType:{text:"Sales Type"},pointsDeduct:{text:"Points Deduct"},balanceDeduct:{text:"Balance Deduct"}},xa={name:"SalonThankzSalesDetail",data:function(){return{title:"",salesDetail:null,windowWidth:window.innerWidth,fields:Object.assign({},wa),isShowGroupButton:{cancel:!0,delete:!1,confirm:!1}}},components:{GroupButton:jt},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},computed:{nameButton:function(){return{confirm:"Save",cancel:"Close",delete:"Delete"}},statusScreenLaptop:function(){return this.windowWidth>Y.common.screenSize.maxScreenLaptop}},methods:{showModal:function(e){this.title=e.title,this.salesDetail=e.salesDetail,this.$refs.salesDetailModal&&this.$refs.salesDetailModal.show()},hideModal:function(){this.$refs.salesDetailModal&&this.$refs.salesDetailModal.hide()},onClickCancel:function(){this.hideModal()},handleFormatDate:function(e){return Qe.momentFunctions.FormatFullDateTime(Qe.momentFunctions.UnixMiliSecondsIntoDate(e))},handleFormatDateTime:function(e){return Qe.momentFunctions.FormatDateTime(Qe.momentFunctions.UnixMiliSecondsIntoDate(e))},handleNumber:function(e){var t=!!e&&Qe.commonFunctions.formatMoneyNumber(e);return e>0?t:!1===t?0:t},onResize:function(){this.windowWidth=window.innerWidth},showLongText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return Qe.commonFunctions.showLongText(e,t)}}},Ia=xa,ka=(0,c.Z)(Ia,Ca,ya,!1,null,"0473f11c",null),Ta=ka.exports,Na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"prepaid-good-info",class:{"is-expired":e.isExpired}},[a("div",{staticClass:"prepaid-good-info__title"},[a("div",{staticClass:"title__name"},[a("div",{staticClass:"name__text"},[e._v(" "+e._s(e.prepaidGoodInfo[Object.keys(e.prepaidGoodField)[0]])+" ")]),a("div",{staticClass:"name__button"},[a("button",{on:{click:e.onClickShowPrepaidGood}},[e._v(" "+e._s(e.isShowPrepaidGood?"⇧":"⇨")+" ")])])]),e._l(Object.keys(e.prepaidGoodField).slice(1,3),(function(t){return a("div",{key:t,staticClass:"title__more"},[a("div",{staticClass:"more__title"},[e._t(t+"Field",(function(){return[e._v(" "+e._s(e.prepaidGoodField[t].text)+" ")]}),e._d({},[t,e.prepaidGoodField[t]]))],2),a("div",{staticClass:"more__detail"},[e._t(t,(function(){return[e._v(" "+e._s(e.prepaidGoodInfo[t])+" ")]}),e._d({},[t,e.prepaidGoodInfo[t]]))],2)])}))],2),e.isShowPrepaidGood?a("div",{staticClass:"prepaid-good-info__more"},[e._l(Object.keys(e.prepaidGoodField).slice(3),(function(t){return a("div",{key:t,staticClass:"more__detail"},[a("div",{staticClass:"detail__title"},[e._t(t+"Field",(function(){return[e._v(" "+e._s(e.prepaidGoodField[t].text)+" ")]}),e._d({},[t,e.prepaidGoodField[t]]))],2),a("div",{staticClass:"detail__detail"},[e._t(t,(function(){return[e._v(" "+e._s(e.prepaidGoodInfo[t])+" ")]}),e._d({},[t,e.prepaidGoodInfo[t]]))],2)])})),a("div",{staticClass:"more__group-button"},[e.typePrepaidGood&&!e.isExpired?a("button",{on:{click:e.handleDeduct}},[e._v(" Deduct ")]):e._e(),a("button",{on:{click:e.handleView}},[e._v("View")]),a("button",{on:{click:e.handleEdit}},[e._v("Edit")])])],2):e._e(),a("hr")])},Da=[],Pa={name:"SalonThankzPrepaidGoodView",data:function(){return{isShowPrepaidGood:!1}},props:{prepaidGoodInfo:{type:Object,default:function(){return{}}},prepaidGoodField:{type:Object,default:function(){return{}}},typePrepaidGood:{type:Number,default:Y.sales.typePrepaidGood.card}},mounted:function(){},computed:{isExpired:function(){var e,t,a,i;return!this.typePrepaidGood&&(null===(e=this.prepaidGoodInfo)||void 0===e?void 0:e.isExpired)||this.typePrepaidGood&&(0===(null===(t=this.prepaidGoodInfo)||void 0===t?void 0:t.quantity)||-1!==(null===(a=this.prepaidGoodInfo)||void 0===a?void 0:a.expiryDateTS)&&(null===(i=this.prepaidGoodInfo)||void 0===i?void 0:i.expiryDateTS)<Qe.momentFunctions.DateNowIntoUnix())}},methods:{onClickShowPrepaidGood:function(){this.isShowPrepaidGood=!this.isShowPrepaidGood},handleDeduct:function(){this.$emit("handleDeduct")},handleView:function(){this.$emit("handleView")},handleEdit:function(){this.$emit("handleEdit")}}},Ga=Pa,Aa=(0,c.Z)(Ga,Na,Da,!1,null,"201b2df0",null),Ma=Aa.exports,La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"prepaid-good-history-modal"},[a("b-modal",{ref:"prepaidGoodHistoryModal",attrs:{static:"",size:"xl","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal prepaid-good-history-modal__modal",hide:"onReset"}},[a("div",{staticClass:"good-name modal__good-name"},[e._v(" "+e._s(!!e.infoPrepaidGood&&e.infoPrepaidGood[0]&&e.showLongText(e.infoPrepaidGood[0].cardName,40))+" ")]),!e.infoPrepaidGood||!e.statusScreenLaptop&&e.isShowHistory?e._e():a("table",{staticClass:"table tab__table"},[a("thead",[a("tr",[e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),a("th",[e._v("Detail")])],2)]),e.isShowHistory?a("tbody",e._l(e.infoPrepaidGood,(function(t){return a("tr",{key:t.id},[a("td",{staticClass:"table__table-data table__table-data--created-date-time"},[e._v(" "+e._s(e.handleFormatDateTime(t.createdDateTimeTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--action"},[e._v(" "+e._s(t.actionHistoryText)+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance"},[e._v(" "+e._s(e.handleFormatChangeBalance(e.handleFormatNumber(t.balance-t.balanceBeforeChange)))+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance"},[e._v(" "+e._s(e.handleFormatNumber(t.balance))+" ")]),a("td",{staticClass:"table__table-data table__table-data--notes"},[e._v(" "+e._s(!!t.notes&&t.notes.systemNotes)+" ")]),a("td",{staticClass:"table__table-data table__table-data--btn"},[e.handleShowButtonView(t.prepaidCardHistoryType)?a("button",{staticClass:"data--btn__btn data--btn__btn--view",on:{click:function(){return e.onClickShowSalesDetail(t)}}},[e._v(" View ")]):e._e()])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"6"}},[e._v("No data")])])])]),e.infoPrepaidGood&&!e.statusScreenLaptop&&e.isShowHistory?a("div",{staticClass:"small-screen"},e._l(e.infoPrepaidGood,(function(t){return a("div",{key:t.id,staticClass:"small-screen__prepaid-good"},[a("div",{staticClass:"prepaid-good__header"},[a("div",[e._v(" "+e._s(e.handleFormatDateTime(t.createdDateTimeTS))+" ")]),a("div",[e._v(" "+e._s(t.actionHistoryText)+" ")])]),a("div",{staticClass:"prepaid-good__balance"},[e._v(" Balance: "+e._s(e.handleFormatNumber(t.balanceBeforeChange))+" → "+e._s(e.handleFormatNumber(t.balance))+" ")]),a("div",{staticClass:"prepaid-good__notes"},[e._v(" "+e._s(!!t.notes&&e.showLongText(t.notes.systemNotes,30))+" ")]),e.handleShowButtonView(t.prepaidCardHistoryType)?a("button",{staticClass:"prepaid-good__btn",on:{click:function(){return e.onClickShowSalesDetail(t)}}},[e._v(" View ")]):e._e(),a("hr")])})),0):e._e(),e.page.pageTotal>1?a("paging",{attrs:{page:e.page},on:{handlePaging:e.handleGetHistoryPrepaidGood}}):e._e(),a("footer",{staticClass:"footer modal__footer"},[a("group-button",{attrs:{isShowButton:e.isShowGroupButton},on:{cancel:e.onClickCancel}})],1)],1),a("sales-detail",{ref:"refSalesDetail"})],1)},$a=[],ja=(a(69826),a(32023),{createdDateTime:{text:"Created Date Time"},action:{text:"Action"},change:{text:"Change"},balance:{text:"Balance"},notes:{text:"Notes"}}),Ea={cancel:!0,delete:!1,confirm:!1},Fa={pageTotal:1,pageNumber:1},Oa={name:"SalonThankzPrepaidGoodHistory",data:function(){return{title:"",infoPrepaidGood:null,windowWidth:window.innerWidth,page:Object.assign({},Fa),fields:Object.assign({},ja),isShowGroupButton:Object.assign({},Ea)}},components:{Paging:Sa,GroupButton:jt,SalesDetail:Ta},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},computed:{isShowHistory:function(){return this.infoPrepaidGood.length},statusScreenLaptop:function(){return this.windowWidth>Y.common.screenSize.maxScreenLaptop}},methods:{showModal:function(e){var t,a,i,n,o,s;this.title=e.title,this.infoPrepaidGood=e.dataPrepaidCard.items,this.page={pageTotal:Math.ceil((null===(t=e.dataPrepaidCard)||void 0===t||null===(a=t.pagingInfo)||void 0===a?void 0:a.totalItems)/(null===(i=e.dataPrepaidCard)||void 0===i||null===(n=i.pagingInfo)||void 0===n?void 0:n.pageSize)),pageNumber:null===(o=e.dataPrepaidCard)||void 0===o||null===(s=o.pagingInfo)||void 0===s?void 0:s.pageNumber},this.infoPrepaidGood.map((function(e){var t=Y.sales.prepaidCardHistoryType.find((function(t){return t.value===e.prepaidCardHistoryType}));t&&(e.actionHistoryText=null===t||void 0===t?void 0:t.text)})),this.$refs.prepaidGoodHistoryModal&&this.$refs.prepaidGoodHistoryModal.show()},hideModal:function(){this.$refs.prepaidGoodHistoryModal&&this.$refs.prepaidGoodHistoryModal.hide()},onClickCancel:function(){this.hideModal()},onClickShowSalesDetail:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={status:e.salesStatus,salesNumber:e.salesNumber,shopId:E.shopSession.getShopId()},a.prev=1,t.$emit("loading",!0),a.next=5,de.salesApis.getSalesDetail(i);case 5:if(n=a.sent,200===n.status){a.next=9;break}throw t.$emit("loading",!1),n;case 9:n.data.isOK?(o=n.data.result,t.$emit("loading",!1),t.$refs.refSalesDetail.showModal({title:"Sales Detail",salesDetail:o})):(console.log(n,i),t.$emit("loading",!1)),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](1),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))()},handleFormatDateTime:function(e){return Qe.momentFunctions.FormatDateTime(Qe.momentFunctions.UnixMiliSecondsIntoDate(e))},handleFormatNumber:function(e){var t=!!e&&Qe.commonFunctions.formatMoneyNumber(e);return e>0?t:!1===t?0:t},handleFormatChangeBalance:function(e){return"-"!==e[0]&&0!==e?"+".concat(e):e},handleShowButtonView:function(e){return[Y.sales.prepaidCardHistoryTypeEnum.sales,Y.sales.prepaidCardHistoryTypeEnum.refund,Y.sales.prepaidCardHistoryTypeEnum.deduction,Y.sales.prepaidCardHistoryTypeEnum.salesEdited,Y.sales.prepaidCardHistoryTypeEnum.salesDeleted,Y.sales.prepaidCardHistoryTypeEnum.refundDeleted,Y.sales.prepaidCardHistoryTypeEnum.deductionEdited,Y.sales.prepaidCardHistoryTypeEnum.deductionDeleted].includes(e)},handleGetHistoryPrepaidGood:function(e){var t=e.pageNumber,a=void 0===t?1:t;this.$emit("showHistoryPrepaidGoodPaging",{pageNumber:a,id:this.infoPrepaidGood[this.infoPrepaidGood.length-1].clientPrepaidCardId,clientId:this.infoPrepaidGood[this.infoPrepaidGood.length-1].clientId})},onResize:function(){this.windowWidth=window.innerWidth},onReset:function(){this.infoPrepaidGood=null},showLongText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return Qe.commonFunctions.showLongText(e,t)}}},Za=Oa,Ba=(0,c.Z)(Za,La,$a,!1,null,"5f7cb343",null),za=Ba.exports,Ua={prepaidCard:{prepaidCardName:{text:"Card Name"},balance:{text:"Balance"},expiryDateTS:{text:"Expiry Date"},initialBalance:{text:"Earned Amount"},discountForService:{text:"Service DC"},discountForProduct:{text:"Product DC"},invoiceDateTimeTS:{text:"Issue Date"}},prepaidService:{prepaidServiceName:{text:"Prepaid Service Name"},quantity:{text:"Remaining Quantity"},expiryDateTS:{text:"Expiry Date"},initialQuantity:{text:"Initial Quantity"},invoiceDateTimeTS:{text:"Issue Date"}},salesHistory:{invoiceDateTimeTS:{text:"Date"},itemName:{text:"Sales Items"},totalAmount:{text:"Amount"},payments:{text:"Payment Method"},payAmount:{text:"Pay Amount"},notes:{text:"Notes"},detail:{text:"Detail"}}},Ra={pageTotal:1,pageNumber:1},Ha={card:!1,service:!1},qa={card:Y.sales.typePrepaidGood.card,service:Y.sales.typePrepaidGood.service},Wa={name:"SalonThankzClientTabs",data:function(){return{dataPrepaidGoods:{},dataSalesHistory:{},isShowHistoryDeleted:!1,windowWidth:window.innerWidth,page:Object.assign({},Ra),expired:Object.assign({},Ha),fields:Object.assign({},Ua),typePrepaidGood:Object.assign({},qa)}},props:{},components:{Paging:Sa,SalesDetail:Ta,Notification:nt,PrepaidGoodView:Ma,"prepaid-good-history":za},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},computed:{isShow:function(){var e,t,a,i,n,o;return{card:null===(e=this.dataPrepaidGoods)||void 0===e||null===(t=e.cards)||void 0===t?void 0:t.length,service:null===(a=this.dataPrepaidGoods)||void 0===a||null===(i=a.services)||void 0===i?void 0:i.length,salesHistory:null===(n=this.dataSalesHistory)||void 0===n||null===(o=n.items)||void 0===o?void 0:o.length}},statusScreenLaptop:function(){return this.windowWidth>Y.common.screenSize.maxScreenLaptop},statusScreenPhone:function(){return this.windowWidth<=Y.common.screenSize.maxScreenPhone}},watch:{"expired.card":function(e,t){e!==t&&this.handleGetPrepaidCard({pageNumber:1})},"expired.service":function(e,t){e!==t&&this.handleGetPrepaidService({pageNumber:1})},isShowHistoryDeleted:function(e,t){e!==t&&this.handleGetSalesHistory({pageNumber:1})}},methods:{handleGetPrepaidCard:function(e){var t=e.pageNumber,a=void 0===t?1:t;this.$emit("getPrepaidCard",{expired:this.expired.card,pageNumber:a})},handleGetPrepaidService:function(e){var t=e.pageNumber,a=void 0===t?1:t;this.$emit("getPrepaidService",{expired:this.expired.service,pageNumber:a})},handleGetSalesHistory:function(e){var t=e.pageNumber,a=void 0===t?1:t;this.$emit("getSalesHistory",{fromDateTS:1,pageNumber:a,includeDeleted:this.isShowHistoryDeleted})},handleSetPrepaidGoods:function(e){var t,a,i;this.dataPrepaidGoods=e,this.page={pageTotal:Math.ceil((null===e||void 0===e||null===(t=e.pagingInfo)||void 0===t?void 0:t.totalItems)/(null===e||void 0===e||null===(a=e.pagingInfo)||void 0===a?void 0:a.pageSize)),pageNumber:null===e||void 0===e||null===(i=e.pagingInfo)||void 0===i?void 0:i.pageNumber}},handleSetSalesHistory:function(e){var t,a,i;this.dataSalesHistory=e,this.page={pageTotal:Math.ceil((null===e||void 0===e||null===(t=e.pagingInfo)||void 0===t?void 0:t.totalItems)/(null===e||void 0===e||null===(a=e.pagingInfo)||void 0===a?void 0:a.pageSize)),pageNumber:null===e||void 0===e||null===(i=e.pagingInfo)||void 0===i?void 0:i.pageNumber}},handleFormatDate:function(e){return-1===e?"No Limit":Qe.momentFunctions.FormatDate(Qe.momentFunctions.UnixMiliSecondsIntoDate(e))},handleFormatNumber:function(e){return-1===e?"No Limit":Qe.commonFunctions.formatMoneyNumber(e)},handleFormatDiscount:function(e){return e?e+"%":""},onClickShowHistoryPrepaidGood:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={clientId:e.clientId,clientPrepaidCardId:e.id,pageNumber:1,pageSize:10,shopId:E.shopSession.getShopId()},a.prev=1,t.$emit("loading",!0),a.next=5,de.salesApis.getPrepaidCardHistory(i);case 5:if(n=a.sent,200===n.status){a.next=9;break}throw t.$emit("loading",!1),n;case 9:n.data.isOK?(o=n.data.result,t.$emit("loading",!1),t.$refs.refPrepaidGoodHistory.showModal({title:"Prepaid Card Balance History",dataPrepaidCard:o})):(console.log(n),t.$emit("loading",!1)),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](1),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))()},onClickShowHistoryPrepaidGoodPaging:function(){var e=arguments,t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o,s;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{clientId:0,id:0,pageNumber:1},n={clientId:i.clientId,clientPrepaidCardId:i.id,pageNumber:i.pageNumber,pageSize:10,shopId:E.shopSession.getShopId()},a.prev=2,t.$emit("loading",!0),a.next=6,de.salesApis.getPrepaidCardHistory(n);case 6:if(o=a.sent,200===o.status){a.next=10;break}throw t.$emit("loading",!1),o;case 10:o.data.isOK?(s=o.data.result,t.$emit("loading",!1),t.$refs.refPrepaidGoodHistory.showModal({title:"Prepaid Card Balance History",dataPrepaidCard:s})):(console.log(o),t.$emit("loading",!1)),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](2),console.log(a.t0);case 16:case"end":return a.stop()}}),a,null,[[2,13]])})))()},handleClickEdit:function(){this.handleNotification()},onClickViewPrepaidService:function(){this.handleNotification()},onClickDeduct:function(){this.handleNotification()},handleNotification:function(){this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Not Support Yet!"}]})},handleLoading:function(e){this.$emit("loading",e)},onResize:function(){this.windowWidth=window.innerWidth},handleGoodExpired:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?-1!==(null===e||void 0===e?void 0:e.expiryDateTS)&&(null===e||void 0===e?void 0:e.expiryDateTS)<Qe.momentFunctions.DateNowIntoUnix():null===e||void 0===e?void 0:e.isExpired},showLongText:function(e,t){return Qe.commonFunctions.showLongText(e,t)},onClickShowSalesDetail:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={status:e.refStatus,salesNumber:e.salesNumber,shopId:E.shopSession.getShopId()},a.prev=1,t.$emit("loading",!0),a.next=5,de.salesApis.getSalesDetail(i);case 5:if(n=a.sent,200===n.status){a.next=9;break}throw t.$emit("loading",!1),n;case 9:n.data.isOK?(o=n.data.result,t.$emit("loading",!1),t.$refs.refSalesDetail.showModal({title:"Sales Detail",salesDetail:o})):(console.log(n,i),t.$emit("loading",!1)),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](1),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))()}}},Va=Wa,Ya=(0,c.Z)(Va,pa,ma,!1,null,"d0a47990",null),Ka=Ya.exports,Ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"confirm-modal"},[a("b-modal",{ref:"confirmModal",attrs:{static:"","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal confirm-modal__modal"}},[a("div",{staticClass:"message modal__message"},[e._v(e._s(e.message))]),a("group-button",{attrs:{isShowButton:e.isShowGroupButton},on:{cancel:e.onClickCancel,delete:e.onClickDelete}})],1)],1)},Qa=[],Xa={name:"SalonThankzConfirmModal",data:function(){return{title:"",message:"",isShowGroupButton:{cancel:!0,delete:!0,confirm:!1}}},props:{},components:{GroupButton:jt},created:function(){},mounted:function(){},computed:{},methods:{showModal:function(e){this.title=e.title,this.message=e.message,this.$refs.confirmModal&&this.$refs.confirmModal.show()},hideModal:function(){this.$refs.confirmModal&&this.$refs.confirmModal.hide()},onClickDelete:function(){this.$emit("confirm"),this.hideModal()},onClickCancel:function(){this.hideModal()}}},ei=Xa,ti=(0,c.Z)(ei,Ja,Qa,!1,null,"2475510b",null),ai=ti.exports,ii=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-image-modal"},[a("b-modal",{ref:"uploadImageModal",attrs:{static:"","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal upload-image-modal__modal"}},[a("input",{ref:"inputFileImage",attrs:{hidden:"",type:"file",accept:"image/*"},on:{change:e.onClickChangeFile}}),e.typeUploadImage?a("div",{staticClass:"input-data modal__input-data"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.file,expression:"file"}],attrs:{readonly:""},domProps:{value:e.file},on:{input:function(t){t.target.composing||(e.file=t.target.value)}}}),a("button",{on:{click:e.onClickSelectImage}},[e._v("Search Image")])]):e._e(),a("div",{staticClass:"preview-avatar modal__preview-avatar"},[e.urlImage?a("img",{attrs:{src:e.urlImage}}):e._e()]),a("group-button",{attrs:{disableConfirm:!e.file,isShowButton:e.isShowGroupButton},on:{cancel:e.onClickCancel,confirm:e.onClickSaveImage,delete:e.onClickDeleteImage}})],1),a("confirm-modal",{ref:"confirmModal",on:{confirm:e.handleDeleteImage}}),a("notification",{ref:"notificationModal",attrs:{modalTitle:"Error Image Action"}})],1)},ni=[],oi=a(75200),si=(a(78783),a(33948),a(60285),a(41637),{name:"SalonThankzUploadImage",data:function(){return{file:"",title:"",urlImage:"",dataClient:null,typeUploadImage:1,isShowGroupButton:{cancel:!0,delete:!0,confirm:!0}}},props:{},components:{GroupButton:jt,ConfirmModal:ai,Notification:nt},created:function(){},mounted:function(){},computed:{},methods:{showModal:function(e){this.title=e.title,this.dataClient=e.dataClient,this.urlImage=e.urlImageAvatar,e.urlImageAvatar?this.typeUploadImage=0:this.typeUploadImage=1,this.isShowGroupButton.delete=!!this.urlImage,this.isShowGroupButton.confirm=!this.urlImage,this.$refs.uploadImageModal&&this.$refs.uploadImageModal.show()},hideModal:function(){this.$refs.uploadImageModal&&this.$refs.uploadImageModal.hide()},onClickSelectImage:function(){this.$refs.inputFileImage.click()},onClickSaveImage:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i,n;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$refs.inputFileImage.files||[],i=(0,oi.Z)(a,1),n=i[0],n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$emit("uploadImage",n);case 5:e.hideModal(),e.handleReset();case 7:case"end":return t.stop()}}),t)})))()},onClickCancel:function(){this.hideModal(),this.handleReset()},onClickDeleteImage:function(){this.$refs.confirmModal.showModal({title:"Delete Avatar Client",message:"Are you sure you want to delete this avatar?"})},handleDeleteImage:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$emit("deleteImage");case 2:e.hideModal(),e.handleReset();case 4:case"end":return t.stop()}}),t)})))()},onClickChangeFile:function(e){var t=e.target.files[0],a=Qe.commonFunctions.covertSizeFileIntoMB(t.size);if(a>=1)return this.$refs.notificationModal.showModal({listMessage:[{errorCode:"FileSize",errorMessage:"Data size is not larger than 1M"}]}),void this.handleReset();if(t){this.file=null===t||void 0===t?void 0:t.name;var i=URL.createObjectURL(t);i&&i!==this.urlImage&&(URL.revokeObjectURL(this.urlImage),this.urlImage=i)}},handleReset:function(){this.file="",this.$refs.inputFileImage.value=""}}}),li=si,ri=(0,c.Z)(li,ii,ni,!1,null,"7c8a7208",null),di=ri.exports,ci=["Add Client","Edit Client"],ui={sex:3,email:null,notes:null,birthDD:"0",memberType:1,address1:null,address2:null,postcode:null,clientName:"",birthYear:"0",birthMonth:"0",birthdayType:1,memberNumber:6,phoneNumber:null,mobileNumber:null,mobileNumber2:null,recommenderId:null,clientGroupId:null,clientRatingId:null,allowedMessageType:1,clientGroupName:null,preferredStaffId:null,clientRatingName:null,preferredStaffName:null,clientReferralSourceId:null,clientReferralSourceName:null,shopId:E.shopSession.getShopId(),country:Y.payload.DEFAULT_COUNTRY,sessionToken:E.shopSession.getSessionToken(),clientInputDateTimeTS:1654095624,shopLocation:Y.payload.DEFAULT_SHOP_LOCATION},pi={clientGroupId:null,clientGroupName:null},mi={isShow:!1,errorMessages:[]},hi={name:"SalonThankzClientActions",data:function(){return{typeModal:0,urlImageAvatar:"",dataSalesHistory:{},dataPrepaidCards:{},dataPrepaidServices:{},registeredDate:Date.now(),windowWidth:window.innerWidth,groupClient:Object.assign({},pi),dataClient:Object.assign({},ui),errorActionClient:Object.assign({},mi),inputProps:{class:"input"},masks:{input:"YYYY-MM-DD"}}},props:{},components:{ClientTabs:Ka,GroupButton:jt,Notification:nt,ConfirmModal:ai,UploadImageModal:di,ValidationProvider:k.d_,ValidationObserver:k._j},created:function(){},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("resize",e.onResize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},computed:{title:function(){return ci[this.typeModal]},clientGroupOptions:function(){var e=E.clientSession.getClientSetup().clientGroup.map((function(e){return{value:{clientGroupName:e.itemName,clientGroupId:e.clientGroupId},text:e.itemName}}));return[{value:{clientGroupId:null,clientGroupName:null},text:"Select"}].concat((0,Ge.Z)(e))},statusScreenLaptop:function(){return this.windowWidth>Y.common.screenSize.maxScreenLaptop},statusScreenPhone:function(){return this.windowWidth<Y.common.screenSize.maxScreenPhone},isShowButton:function(){return{delete:this.typeModal,cancel:!0,confirm:!0}}},methods:{showModal:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o,s;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.typeModal=e.typeModal,t.dataClient.memberNumber=(null===e||void 0===e?void 0:e.memberNumber)||0,e.dataClient&&null!==e.dataClient&&(t.dataClient=Object.assign(ui,e.dataClient),t.groupClient={clientGroupId:null===e||void 0===e||null===(i=e.dataClient)||void 0===i?void 0:i.clientGroupId,clientGroupName:null===e||void 0===e||null===(n=e.dataClient)||void 0===n?void 0:n.clientGroupName},t.registeredDate=Qe.momentFunctions.UnixMiliSecondsIntoDate(null===e||void 0===e||null===(o=e.dataClient)||void 0===o?void 0:o.clientInputDateTimeTS)),t.dataClient.imageName&&t.dataClient.imagePath&&(s=[t.dataClient.imagePath,t.dataClient.imageName],t.urlImageAvatar=Qe.commonFunctions.concatURL({defaultURL:Y.api.DEFAULT_URL_IMAGE.CLIENT,pathURL:s})),a.next=6,t.handleGetPrepaidCard();case 6:t.$refs.clientActionsModal&&t.$refs.clientActionsModal.show();case 7:case"end":return a.stop()}}),a)})))()},hideModal:function(){this.$refs.clientActionsModal&&this.$refs.clientActionsModal.hide()},onClickConfirm:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.dataClient.clientGroupId=e.groupClient.clientGroupId,e.dataClient.clientGroupName=e.groupClient.clientGroupName,e.dataClient.clientInputDateTimeTS=Qe.momentFunctions.DateIntoUnix(Qe.momentFunctions.FormatDate(e.registeredDate)),a=Qe.momentFunctions.DateNowIntoUnix(),!(a<e.dataClient.clientInputDateTimeTS)){t.next=7;break}return alert("Registered Date Client cannot be greater than current time"),t.abrupt("return");case 7:if(t.prev=7,e.$emit("loading",!0),e.typeModal){t.next=17;break}return e.dataClient.createdDateTimeTS=Qe.momentFunctions.DateNowIntoUnix(),e.dataClient=Qe.commonFunctions.trimAllDataObject(e.dataClient),t.next=14,de.clientApis.createNewClient(e.dataClient);case 14:i=t.sent,t.next=22;break;case 17:return e.dataClient.editedDateTimeTS=Qe.momentFunctions.DateNowIntoUnix(),e.dataClient=Qe.commonFunctions.trimAllDataObject(e.dataClient),t.next=21,de.clientApis.editClient(e.dataClient);case 21:i=t.sent;case 22:if(200===i.status){t.next=24;break}throw i.message;case 24:i.data.isOK?(e.$emit("loadClient"),e.$emit("loading",!1),e.hideModal(),e.errorActionClient.isShow=!1):(e.$emit("loading",!1),e.errorActionClient.isShow=!0,e.errorActionClient.errorMessages=(0,Ge.Z)(i.data.errorMessages)),t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](7),console.log(t.t0);case 30:case"end":return t.stop()}}),t,null,[[7,27]])})))()},onClickCancel:function(){this.hideModal(),this.handleResetData()},handleResetData:function(){this.groupClient=Object.assign({},pi),this.dataClient=Object.assign({},Qe.clientFunctions.ResetDataClient()),this.registeredDate=Date.now(),this.errorActionClient=Object.assign({},Qe.messageFunctions.ResetErrorMessages()),this.urlImageAvatar="",this.dataSalesHistory={},this.dataPrepaidCards={},this.dataPrepaidServices={}},showUploadImageModal:function(){var e={clientId:this.dataClient.clientId,clientImageId:this.dataClient.clientImageId};this.$refs.uploadImageModal.showModal({dataClient:e,title:this.urlImageAvatar?"Delete Avatar Image":"Upload Avatar Image",urlImageAvatar:this.urlImageAvatar})},updateUrlImageAvatar:function(e){var t=e.clientImageId,a=e.urlImageAvatar;this.urlImageAvatar=a,this.dataClient.clientImageId=t},handleLoading:function(e){this.$emit("loading",e)},handleUploadAvatar:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=new FormData,i.append("fomrFile",e),i.append("clientId",t.dataClient.clientId),i.append("shopId",E.shopSession.getShopId()),i.append("countryCode",Y.payload.DEFAULT_COUNTRY),t.$emit("loading",!0),a.prev=6,a.next=9,de.clientApis.uploadClientImage(i);case 9:if(n=a.sent,200===n.status){a.next=12;break}throw n;case 12:n.data.isOK?(o=[n.data.result.imagePath,n.data.result.imageName],t.urlImageAvatar=Qe.commonFunctions.concatURL({defaultURL:Y.api.DEFAULT_URL_IMAGE.CLIENT,pathURL:o}),t.dataClient.clientImageId=n.data.result.clientImageId,t.$emit("loading",!1)):(t.$emit("loading",!1),console.log(n.data)),a.next=18;break;case 15:a.prev=15,a.t0=a["catch"](6),console.log("errors",a.t0);case 18:case"end":return a.stop()}}),a,null,[[6,15]])})))()},handleDeleteAvatar:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={shopId:E.shopSession.getShopId(),clientImageId:e.dataClient.clientImageId},e.$emit("loading",!0),t.prev=2,t.next=5,de.clientApis.deleteClientImage(a);case 5:if(i=t.sent,200===i.status){t.next=8;break}throw i;case 8:i.data.isOK?(e.urlImageAvatar="",e.dataClient.clientImageId=null,e.$emit("loading",!1)):(e.$emit("loading",!1),console.log(i)),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()},handleGetPrepaidCard:function(){var e=arguments,t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{pageNumber:1,expired:!1},n={pageSize:10,prepaidCardType:-1,includeFamilyService:!0,pageNumber:i.pageNumber,includeExpired:i.expired,clientId:t.dataClient.clientId,shopId:E.shopSession.getShopId()},a.prev=2,t.$emit("loading",!0),a.next=6,de.clientApis.getClientPrepaidCards(n);case 6:if(o=a.sent,200===o.status){a.next=10;break}throw t.$emit("loading",!1),o;case 10:o.data.isOK?(t.dataPrepaidCards=o.data.result,t.dataPrepaidCards.cards=o.data.result.items,t.$refs.refClientTabs&&t.$refs.refClientTabs.handleSetPrepaidGoods(t.dataPrepaidCards),t.$emit("loading",!1)):t.$emit("loading",!1),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](2),console.log(a.t0),t.$emit("loading",!1);case 17:case"end":return a.stop()}}),a,null,[[2,13]])})))()},handleGetPrepaidService:function(){var e=arguments,t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{expired:!1,pageNumber:1},n={pageSize:10,includeFamilyService:!0,pageNumber:i.pageNumber,includeExpired:i.expired,clientId:t.dataClient.clientId,shopId:E.shopSession.getShopId()},a.prev=2,t.$emit("loading",!0),a.next=6,de.clientApis.getClientPrepaidServices(n);case 6:if(o=a.sent,200===o.status){a.next=10;break}throw t.$emit("loading",!1),o;case 10:o.data.isOK?(t.dataPrepaidServices=o.data.result,t.dataPrepaidServices.services=o.data.result.items,t.$refs.refClientTabs&&t.$refs.refClientTabs.handleSetPrepaidGoods(t.dataPrepaidServices),t.$emit("loading",!1)):t.$emit("loading",!1),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](2),console.log(a.t0),t.$emit("loading",!1);case 17:case"end":return a.stop()}}),a,null,[[2,13]])})))()},handleGetSalesHistory:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n,o,s,l,r,d,c;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.pageNumber,n=void 0===i?1:i,o=e.fromDateTS,s=void 0===o?1:o,l=e.includeDeleted,r=void 0!==l&&l,d={pageSize:10,pageNumber:n,fromDateTS:s,includeDeleted:r,clientId:t.dataClient.clientId,clientShopId:t.dataClient.shopId,shopId:E.shopSession.getShopId(),toDateTS:Qe.momentFunctions.DateNowIntoUnix()},a.prev=2,t.$emit("loading",!0),a.next=6,de.clientApis.getSalesHistoryByClient(d);case 6:if(c=a.sent,200===c.status){a.next=10;break}throw t.$emit("loading",!1),c;case 10:c.data.isOK?(t.dataSalesHistory=c.data.result,t.$refs.refClientTabs&&t.$refs.refClientTabs.handleSetSalesHistory(t.dataSalesHistory),t.$emit("loading",!1)):t.$emit("loading",!1),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](2),console.log(a.t0),t.$emit("loading",!1);case 17:case"end":return a.stop()}}),a,null,[[2,13]])})))()},onClickDelete:function(){this.$refs.refConfirmModal.showModal({title:"Delete Client",message:"Are you sure you want to delete client ".concat(this.dataClient.clientName," ?")})},handleDeleteClient:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={clientId:e.dataClient.clientId,shopId:E.shopSession.getShopId(),country:Y.payload.DEFAULT_COUNTRY,sessionToken:E.shopSession.getSessionToken(),shopLocation:Y.payload.DEFAULT_SHOP_LOCATION},e.$emit("loading",!0),t.prev=2,t.next=5,de.clientApis.deleteClient(a);case 5:if(i=t.sent,200===i.status){t.next=9;break}throw e.$emit("loading",!1),e.$refs.refNotification.showModal({listMessage:i.errorMessages});case 9:i.data.isOK?(e.$emit("loadClient"),e.$emit("loading",!1),e.hideModal()):(e.$emit("loading",!1),e.$refs.refNotification.showModal({listMessage:i.errorMessages})),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),e.$refs.refNotification.showModal({listMessage:t.t0});case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()},onResize:function(){this.windowWidth=window.innerWidth}}},gi=hi,vi=(0,c.Z)(gi,ca,ua,!1,null,"1d91c664",null),fi=vi.exports,_i={name:"ClientPage",data:function(){return{clients:[],name:"ThankZ",clientTotal:0,isLoading:!1,isShowSelectPage:!0,isShowClientInfo:!1,windowWidth:window.innerWidth,page:{pageTotal:1,pageNumber:1,pageSelected:1,pageSize:Y.payload.DEFAULT_PAGE_SIZE},fields:{registrationDate:{text:"Registered Date"},clientName:{text:"Client Name"},mobileNumber:{text:"Mobile / Phone"},totalSalesAmount:{text:"Total Sales"},notes:{text:"Notes"}}}},props:{},components:{Loading:ct,ClientInfo:yt,SalesAction:da,Notification:nt,ClientActions:fi},created:function(){this.loadStaffActive()},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("resize",e.onResize)})),this.loadDataClient(),this.handleSetAllSetupSales()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},computed:{optionsPage:function(){for(var e=[],t=1;t<=this.page.pageTotal;t++)e.push({text:t,value:t});return e},statusScreenLaptop:function(){return this.windowWidth>Y.common.screenSize.maxScreenTablet},statusScreenTablet:function(){return this.windowWidth>Y.common.screenSize.maxScreenPhone}},methods:{loadDataClient:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i,n;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={pageSize:e.page.pageSize,pageNumber:e.page.pageNumber,shopId:E.shopSession.getShopId()},i=Object.keys(e.fields),e.isLoading=!0,t.prev=3,t.next=6,de.clientApis.getAllClientByShop(a);case 6:if(n=t.sent,200===n.status){t.next=10;break}throw e.isLoading=!1,n;case 10:n.data.isOK?(e.clientTotal=n.data.result.pagingInfo.totalItems,e.page.pageTotal=Math.ceil(n.data.result.pagingInfo.totalItems/n.data.result.pagingInfo.pageSize),e.clients=n.data.result.items.map((function(e){var t={};for(var a in t["clientId"]=e.clientId,t["memberNumber"]=e.memberNumber,i)t[i[a]]=e[i[a]];return t.mobileNumber2=e.mobileNumber2,t.registrationDate=ve()(Qe.momentFunctions.UnixMiliSecondsIntoDate(e.clientInputDateTimeTS)).format("YYYY-MM-DD"),t.phone="",null!==t.mobileNumber&&(t.phone+=Qe.commonFunctions.formatPhoneNumber(t.mobileNumber)),null!==t.mobileNumber2&&(t.phone+=Qe.commonFunctions.formatPhoneNumber(t.mobileNumber2)),"/"===t.phone[0]&&t.phone.splice(0,1),t.totalSales=Qe.commonFunctions.formatMoneyNumber(t.totalSalesAmount),t})),e.isLoading=!1):(e.isLoading=!1,console.log(n.data)),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})))()},loadStaffActive:function(){return(0,I.Z)((0,x.Z)().mark((function e(){var t,a;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={shopId:E.shopSession.getShopId()},e.prev=1,e.next=4,de.shopApis.getStaffActive(t);case 4:if(a=e.sent,200===a.status){e.next=7;break}throw a.message;case 7:a.data.isOK?E.shopSession.setStaffActive(a.data.result):alert("Error Staff Active"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},clickGoToFirstPage:function(){this.page.pageNumber=1,this.page.pageSelected=this.page.pageNumber,this.loadDataClient()},clickGoToPreviousPage:function(){1!==this.page.pageNumber&&(this.page.pageNumber-=1,this.page.pageSelected=this.page.pageNumber),this.loadDataClient()},clickGoToNextPage:function(){this.page.pageNumber!==this.page.pageTotal&&(this.page.pageNumber+=1,this.page.pageSelected=this.page.pageNumber),this.loadDataClient()},clickGoToLastPage:function(){this.page.pageNumber=this.page.pageTotal,this.page.pageSelected=this.page.pageNumber,this.loadDataClient()},clickGoto:function(){this.isShowSelectPage=!this.isShowSelectPage},clickSelectedPage:function(){this.page.pageSelected!==this.page.pageNumber&&(this.page.pageNumber=this.page.pageSelected,this.loadDataClient())},clickSignout:function(){E.shopSession.removeShopInfo(),E.shopSession.removeStaffActive(),E.saleSession.removeSaleAllSetup(),E.clientSession.removeClientSetup(),this.$router.push("/login")},showLongText:function(e,t){return e&&e.trim().length>t?e.substring(0,t)+"...":e},handleClickAddClient:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getNextMemberNumber();case 2:a=t.sent,e.$refs.clientActionsRef.showModal({typeModal:0,memberNumber:a});case 4:case"end":return t.stop()}}),t)})))()},handleClickEditClient:function(e){var t=this;return(0,I.Z)((0,x.Z)().mark((function a(){var i,n;return(0,x.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={clientId:e.clientId,shopId:E.shopSession.getShopId()},a.prev=1,a.next=4,de.clientApis.getClientByClientId(i);case 4:if(n=a.sent,200===n.status){a.next=7;break}throw n.message;case 7:n.data.isOK?t.$refs.clientActionsRef.showModal({typeModal:1,dataClient:n.data.result}):alert("Get Client Error"),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),console.log("Errors",a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))()},getNextMemberNumber:function(){return(0,I.Z)((0,x.Z)().mark((function e(){var t,a;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={shopId:E.shopSession.getShopId()},e.prev=1,e.next=4,de.clientApis.getNextMemberNumber(t);case 4:if(a=e.sent,200===a.status){e.next=7;break}throw a.message;case 7:if(!a.data.isOK){e.next=9;break}return e.abrupt("return",a.data.result);case 9:return e.abrupt("return");case 12:e.prev=12,e.t0=e["catch"](1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))()},handleClickPrintListClient:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={},a.header="Client List",a.title="Client List Page ".concat(e.page.pageNumber),a.fileName="Client_List_Page_".concat(e.page.pageNumber),a.columns=[{text:"Client No",width:10},{text:"Client Name",width:30},{text:"Mobile",width:15},{text:"Total Sales",width:20},{text:"Note",width:50},{text:"Registered Date",width:20}],a.rows=[],e.clients.map((function(e){var t,i,n=[];n.push(e.memberNumber),n.push(e.clientName);var o=e.mobileNumber;o&&(o=Qe.commonFunctions.formatPhoneNumber(o)),n.push(null!==(t=o)&&void 0!==t?t:"");var s=Qe.commonFunctions.formatMoneyNumber(e.totalSalesAmount);n.push(null!==s&&void 0!==s?s:0),n.push(null!==(i=e.notes)&&void 0!==i?i:""),n.push(e.registrationDate),a.rows=[].concat((0,Ge.Z)(a.rows),[n])})),Qe.commonFunctions.exportExcel(a);case 8:case"end":return t.stop()}}),t)})))()},handleSetLoading:function(e){this.isLoading=e},onClickSales:function(e){var t=Qe.momentFunctions.DateNowIntoUnix();this.$refs.refSalesAction.showModal({type:0,client:e,invoiceDateTimeTS:t})},onClickCalendar:function(){this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Not Support Yet!"}]})},onResize:function(){this.windowWidth=window.innerWidth},onClickShowInfoClient:function(){this.isShowClientInfo=!this.isShowClientInfo},handleSetAllSetupSales:function(){var e=this;return(0,I.Z)((0,x.Z)().mark((function t(){var a,i;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={status:1,shopId:E.shopSession.getShopId()},e.isLoading=!0,t.prev=2,t.next=5,de.salesApis.getAllSalesSetup(a);case 5:if(i=t.sent,200===i.status){t.next=9;break}throw e.isLoading=!1,i;case 9:if(!i.data.isOK){t.next=14;break}return t.next=12,E.saleSession.setSaleAllSetup(i.data.result);case 12:t.next=15;break;case 14:alert(i.errorMessages);case 15:e.isLoading=!1,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](2),e.isLoading=!1,console.log("errors",t.t0);case 22:case"end":return t.stop()}}),t,null,[[2,18]])})))()}}},bi=_i,Si=(0,c.Z)(bi,gt,vt,!1,null,"e61bbebe",null),Ci=Si.exports;o["default"].use(g.Z);var yi=g.Z.prototype.push;g.Z.prototype.push=function(e){return yi.call(this,e).catch((function(e){return e}))};var wi=[{path:"/",name:"home",component:C},{path:"/login",name:"login",component:ht},{path:"/client",name:"client",component:Ci}],xi=new g.Z({mode:"history",routes:wi});xi.beforeEach((function(e,t,a){"/login"!==e.path&&null===sessionStorage.getItem("shopInfo")?a({name:"login"}):a()}));var Ii=xi,ki=a(63207),Ti=a.n(ki),Ni=a(97345),Di=a(25505);o["default"].use(Ni.Z);var Pi=new Ni.Z({locale:"en",messages:{en:{fields:{user:"User Name",name:"Client Name",password:"Password",number:"Client Number",mobile:"Mobile Number"},validation:Di.s}}}),Gi=a(44493);(0,k.jQ)({defaultMessage:function(e,t){return t._field_=Pi.t("fields.".concat(e)),Pi.t("validation.".concat(t._rule_),t)}}),(0,k.l7)("required",Gi.C1),(0,k.l7)("min",Gi.VV),(0,k.l7)("max",Gi.Fp),(0,k.l7)("min_value",Gi.Gd),(0,k.l7)("max_value",Gi.JC),(0,k.l7)("between",Gi.vX),(0,k.l7)("email",Gi.Do),(0,k.l7)("regex",Gi.Sz),(0,k.l7)("alpha_dash",Gi.E1),o["default"].use(m.XG7),o["default"].use(h.A7),o["default"].use(Ti(),{componentPrefix:"v"}),o["default"].config.productionTip=!1,new o["default"]({render:function(e){return e(p)},router:Ii,i18n:Pi}).$mount("#app")}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,i,n,o){if(!i){var s=1/0;for(c=0;c<e.length;c++){i=e[c][0],n=e[c][1],o=e[c][2];for(var l=!0,r=0;r<i.length;r++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](i[r])}))?i.splice(r--,1):(l=!1,o<s&&(s=o));if(l){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,s=i[0],l=i[1],r=i[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(r)var c=r(a)}for(t&&t(i);d<s.length;d++)o=s[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},i=self["webpackChunksalon_thankz"]=self["webpackChunksalon_thankz"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(48126)}));i=a.O(i)})();
//# sourceMappingURL=app-legacy.cdbcf63f.js.map