(function(){var e={6700:function(e,t,a){var s={"./af":2398,"./af.js":2398,"./ar":4207,"./ar-dz":3382,"./ar-dz.js":3382,"./ar-kw":6525,"./ar-kw.js":6525,"./ar-ly":7098,"./ar-ly.js":7098,"./ar-ma":6483,"./ar-ma.js":6483,"./ar-sa":3961,"./ar-sa.js":3961,"./ar-tn":7401,"./ar-tn.js":7401,"./ar.js":4207,"./az":903,"./az.js":903,"./be":1174,"./be.js":1174,"./bg":4615,"./bg.js":4615,"./bm":225,"./bm.js":225,"./bn":9751,"./bn-bd":544,"./bn-bd.js":544,"./bn.js":9751,"./bo":6894,"./bo.js":6894,"./br":8566,"./br.js":8566,"./bs":959,"./bs.js":959,"./ca":2683,"./ca.js":2683,"./cs":4231,"./cs.js":4231,"./cv":999,"./cv.js":999,"./cy":4302,"./cy.js":4302,"./da":3601,"./da.js":3601,"./de":5509,"./de-at":2479,"./de-at.js":2479,"./de-ch":5948,"./de-ch.js":5948,"./de.js":5509,"./dv":9838,"./dv.js":9838,"./el":5113,"./el.js":5113,"./en-au":7377,"./en-au.js":7377,"./en-ca":9626,"./en-ca.js":9626,"./en-gb":5912,"./en-gb.js":5912,"./en-ie":2931,"./en-ie.js":2931,"./en-il":2243,"./en-il.js":2243,"./en-in":9779,"./en-in.js":9779,"./en-nz":9813,"./en-nz.js":9813,"./en-sg":4318,"./en-sg.js":4318,"./eo":4957,"./eo.js":4957,"./es":9243,"./es-do":7409,"./es-do.js":7409,"./es-mx":5188,"./es-mx.js":5188,"./es-us":6927,"./es-us.js":6927,"./es.js":9243,"./et":7731,"./et.js":7731,"./eu":1072,"./eu.js":1072,"./fa":9462,"./fa.js":9462,"./fi":3368,"./fi.js":3368,"./fil":3626,"./fil.js":3626,"./fo":6421,"./fo.js":6421,"./fr":974,"./fr-ca":7780,"./fr-ca.js":7780,"./fr-ch":9719,"./fr-ch.js":9719,"./fr.js":974,"./fy":8373,"./fy.js":8373,"./ga":3861,"./ga.js":3861,"./gd":4896,"./gd.js":4896,"./gl":739,"./gl.js":739,"./gom-deva":6737,"./gom-deva.js":6737,"./gom-latn":1979,"./gom-latn.js":1979,"./gu":2001,"./gu.js":2001,"./he":9671,"./he.js":9671,"./hi":2038,"./hi.js":2038,"./hr":1228,"./hr.js":1228,"./hu":87,"./hu.js":87,"./hy-am":3569,"./hy-am.js":3569,"./id":1977,"./id.js":1977,"./is":6853,"./is.js":6853,"./it":7859,"./it-ch":5626,"./it-ch.js":5626,"./it.js":7859,"./ja":4123,"./ja.js":4123,"./jv":6457,"./jv.js":6457,"./ka":638,"./ka.js":638,"./kk":6823,"./kk.js":6823,"./km":9493,"./km.js":9493,"./kn":1288,"./kn.js":1288,"./ko":9663,"./ko.js":9663,"./ku":805,"./ku.js":805,"./ky":7550,"./ky.js":7550,"./lb":6272,"./lb.js":6272,"./lo":9135,"./lo.js":9135,"./lt":1452,"./lt.js":1452,"./lv":5782,"./lv.js":5782,"./me":2181,"./me.js":2181,"./mi":258,"./mi.js":258,"./mk":5715,"./mk.js":5715,"./ml":538,"./ml.js":538,"./mn":3086,"./mn.js":3086,"./mr":5663,"./mr.js":5663,"./ms":5100,"./ms-my":2663,"./ms-my.js":2663,"./ms.js":5100,"./mt":880,"./mt.js":880,"./my":9099,"./my.js":9099,"./nb":8709,"./nb.js":8709,"./ne":2201,"./ne.js":2201,"./nl":1016,"./nl-be":1681,"./nl-be.js":1681,"./nl.js":1016,"./nn":5330,"./nn.js":5330,"./oc-lnc":7132,"./oc-lnc.js":7132,"./pa-in":251,"./pa-in.js":251,"./pl":3948,"./pl.js":3948,"./pt":9836,"./pt-br":8831,"./pt-br.js":8831,"./pt.js":9836,"./ro":8443,"./ro.js":8443,"./ru":4,"./ru.js":4,"./sd":4510,"./sd.js":4510,"./se":3148,"./se.js":3148,"./si":542,"./si.js":542,"./sk":7637,"./sk.js":7637,"./sl":5852,"./sl.js":5852,"./sq":611,"./sq.js":611,"./sr":242,"./sr-cyrl":302,"./sr-cyrl.js":302,"./sr.js":242,"./ss":1367,"./ss.js":1367,"./sv":2927,"./sv.js":2927,"./sw":5240,"./sw.js":5240,"./ta":2692,"./ta.js":2692,"./te":2132,"./te.js":2132,"./tet":8300,"./tet.js":8300,"./tg":7211,"./tg.js":7211,"./th":4050,"./th.js":4050,"./tk":3849,"./tk.js":3849,"./tl-ph":3964,"./tl-ph.js":3964,"./tlh":3650,"./tlh.js":3650,"./tr":4195,"./tr.js":4195,"./tzl":5529,"./tzl.js":5529,"./tzm":7520,"./tzm-latn":298,"./tzm-latn.js":298,"./tzm.js":7520,"./ug-cn":4134,"./ug-cn.js":4134,"./uk":5456,"./uk.js":5456,"./ur":5679,"./ur.js":5679,"./uz":9277,"./uz-latn":6446,"./uz-latn.js":6446,"./uz.js":9277,"./vi":3992,"./vi.js":3992,"./x-pseudo":8882,"./x-pseudo.js":8882,"./yo":2899,"./yo.js":2899,"./zh-cn":4017,"./zh-cn.js":4017,"./zh-hk":4831,"./zh-hk.js":4831,"./zh-mo":2881,"./zh-mo.js":2881,"./zh-tw":57,"./zh-tw.js":57};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=o,e.exports=i,i.id=6700},8126:function(e,t,a){"use strict";var s=a(8935),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],n={name:"App"},l=n,d=a(1001),r=(0,d.Z)(l,i,o,!1,null,null,null),c=r.exports,u=a(8262),p=a(3266),m=(a(44),a(2809)),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v(e._s(e.name))])])},g=[],_={name:"HomePage",data(){return{name:"ThankZ"}}},b=_,v=(0,d.Z)(b,h,g,!1,null,"2e0117e9",null),f=v.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("validation-observer",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.invalid;return[a("div",{staticClass:"login-page"},[a("img",{staticClass:"image login-page__image",attrs:{src:"https://www.ahasoft.co.kr/login/images/logo_nobkg.png"}}),a("div",{staticClass:"title login-page__title"},[e._v("SALON ADMIN")]),a("form",{staticClass:"form login-page__form",attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[a("validation-provider",{attrs:{name:"user",rules:"required|min:3|max:16|alpha_dash"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataUser.username,expression:"dataUser.username"}],attrs:{required:"",autofocus:"",maxlength:"16",placeholder:"Ex: ThankZ, ThankZ_Salon"},domProps:{value:e.dataUser.username},on:{input:function(t){t.target.composing||e.$set(e.dataUser,"username",t.target.value)}}}),a("div",{staticClass:"error-message form__error-message",class:{"error-message-text":!!s[0]}},[e._v(" "+e._s(s[0]?s[0]:"Ex: ThankZ, ThankZ_Salon")+" ")])]}}],null,!0)}),a("validation-provider",{attrs:{name:"password",rules:"required|min:8|max:16"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataUser.password,expression:"dataUser.password"}],attrs:{required:"",maxlength:"16",type:"password",autocomplete:"off",placeholder:"Ex: abcd@1234"},domProps:{value:e.dataUser.password},on:{input:function(t){t.target.composing||e.$set(e.dataUser,"password",t.target.value)}}}),a("div",{staticClass:"error-message form__error-message",class:{"error-message-text":!!s[0]}},[e._v(" "+e._s(s[0]?s[0]:"Ex: abcd@1234")+" ")])]}}],null,!0)}),a("button",{staticClass:"login-page__btn",class:{"login-page__btn--disabled":e.disabledBtn||s},attrs:{type:"submit",disabled:e.disabledBtn||s}},[e._v(" Login ")])],1),a("notification-modal",{ref:"notificationRef",attrs:{modalTitle:"Login Failed"}})],1),e.isLoading?a("loading"):e._e()]}}])})},S=[],C=a(1386),w=a(6166),I=a.n(w);const T={getSaleAllSetup(){return JSON.parse(sessionStorage.getItem("saleAllSetup"))},getAllPaymentMethods(){const e=JSON.parse(sessionStorage.getItem("saleAllSetup"));return e?.paymentMethodSetups},setSaleAllSetup(e){return sessionStorage.setItem("saleAllSetup",JSON.stringify(e))},removeSaleAllSetup(){sessionStorage.removeItem("saleAllSetup")}};var N=T;const D={getShopId(){const e=JSON.parse(sessionStorage.getItem("shopInfo"));return e?.shopBasicInfo?.shopId},getChainId(){const e=JSON.parse(sessionStorage.getItem("shopInfo"));return e?.shopBasicInfo?.chainInfo?.chainId},getBranchInfo(){const e=JSON.parse(sessionStorage.getItem("shopInfo"));return{type:e?.shopBasicInfo?.chainInfo?.branchType,number:e?.shopBasicInfo?.chainInfo?.branchNumber}},getSessionToken(){const e=JSON.parse(sessionStorage.getItem("shopInfo"));return e?.userAuthInfo?.session_token},getUserAccount(){const e=JSON.parse(sessionStorage.getItem("shopInfo"));return{name:e?.userAuthInfo?.name??"",id:e?.userAuthInfo?.userAccountId??0}},getShopInfo(){return JSON.parse(sessionStorage.getItem("shopInfo"))},setShopInfo(e){return sessionStorage.setItem("shopInfo",JSON.stringify(e))},removeShopInfo(){sessionStorage.removeItem("shopInfo")},getStaffActive(){return JSON.parse(sessionStorage.getItem("staffActive"))},setStaffActive(e){return sessionStorage.setItem("staffActive",JSON.stringify(e))},removeStaffActive(){sessionStorage.removeItem("staffActive")}};var x=D;const k={getClientSetup(){return JSON.parse(sessionStorage.getItem("clientSetup"))},setClientSetup(e){return sessionStorage.setItem("clientSetup",JSON.stringify(e))},removeClientSetup(){sessionStorage.removeItem("clientSetup")}};var P=k;const G={saleSession:N,shopSession:x,clientSession:P};var A=G;const M={DEFAULT_API_GATEWAY:{LOCAL:"https://localhost:44001",DEV:"https://ahasoft-salon-admin-http-aggregator-dev.azurewebsites.net",PRODUCTION:"https://ahasoft-salon-admin-http-aggregator.azurewebsites.net",STAGING:"https://ahasoft-salon-admin-http-aggregator-staging.azurewebsites.net"},SOLUTION_ID:{SALON_ADMIN:3002},DEFAULT_HEADER:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Origin, Origin, Accept, Content-Type",Accept:"application/json"},DEFAULT_URL_IMAGE:{CLIENT:"https://ahasoftsaloncommondev.blob.core.windows.net/clients"}};var L=M;const $={prepaidCardHistoryType:[{value:1,text:"Sales"},{value:6,text:"Refund"},{value:14,text:"Import"},{value:4,text:"Deduction"},{value:2,text:"Sales Edited"},{value:3,text:"Sales Deleted"},{value:7,text:"Refund Deleted"},{value:12,text:"Balance Edited"},{value:10,text:"Balance Move In"},{value:11,text:"Balance Move Out"},{value:15,text:"Deduction Edited"},{value:5,text:"Deduction Deleted"},{value:8,text:"Refund By Balance"},{value:17,text:"Sales Date Edited"},{value:13,text:"Expiry Date Edited"},{value:9,text:"Refund By Balance Deleted"}],prepaidCardHistoryTypeEnum:{sales:1,refund:6,import:14,deduction:4,salesEdited:2,salesDeleted:3,refundDeleted:7,balanceMoveIn:10,balanceEdited:12,refundByBalance:8,balanceMoveOut:11,discountEdited:16,deductionDeleted:5,deductionEdited:15,salesDateEdited:17,expiryDateEdited:13,refundByBalanceDeleted:9},typePrepaidGood:{card:0,service:1},itemSalesType:{services:{id:1,text:"Services"},products:{id:2,text:"Products"},prepaidCard:{id:3,text:"Prepaid Cards"},prepaidService:{id:4,text:"Prepaid Service"},packages:{id:5,text:"Packages"}},packages:5,services:1,products:2,prepaidCard:3,prepaidService:4};var j=$;const E={screenSize:{maxScreenDesktop:1199.98,maxScreenLaptop:991.98,maxScreenTablet:767.98,maxScreenPhone:575.98},status:{active:1,inactive:0}};var F=E;const O={DEFAULT_PAGE_SIZE:10,DEFAULT_COUNTRY:"VN",DEFAULT_SHOP_LOCATION:"vi-vn",DEFAULT_DATA_CLIENT:{sex:3,email:null,notes:null,birthDD:"0",memberType:1,address1:null,address2:null,birthYear:"0",clientName:"",postcode:null,birthMonth:"0",birthdayType:1,country:"vi-vn",phoneNumber:null,shopLocation:"VN",memberNumber:null,mobileNumber:null,mobileNumber2:null,recommenderId:null,clientGroupId:null,clientRatingId:null,allowedMessageType:1,clientGroupName:null,preferredStaffId:null,clientRatingName:null,preferredStaffName:null,clientReferralSourceId:null,clientReferralSourceName:null,shopId:A?.shopSession?.getShopId()??null,clientInputDateTimeTS:null,sessionToken:A.shopSession.getSessionToken()}};var B=O;const z={DEFAULT_ERROR_MESSAGES:{isShow:!1,errorMessages:[]}};var U=z;const R={api:L,sales:j,common:F,payload:B,message:U};var H=R;const q=I().create({baseURL:H.api.DEFAULT_API_GATEWAY.DEV});q.interceptors.request.use((function(e){const t=A.shopSession.getShopInfo();return e.headers={Authorization:`Bearer ${t?.userAuthInfo?.authToken}`,...H.api.DEFAULT_HEADER},e}));var W=q;const V={login(e){const t="/api/aggr/v1/auth/login/subscriber?culture=en-US&ui-culture=en-US";return W.post(t,e)}};var Y=V;const Z={getStaffActive(e){const t="/api/read/v1/staffs/Staff/Active";return W.post(t,e)},getShopInfo(e){const t="/api/read/v1/clients/Client/ShopInfo";return W.post(t,e)},getNextMemberNumber(e){const t="/api/read/v1/clients/Client/NextMemberNumber";return W.post(t,e)},getSalesSetUp(e){const t="/api/read/v1/sales/SalesSetup/AllSalesSetups/Live";return W.post(t,e)}};var K=Z;const J={getServiceCategory(e){const t="/api/read/v1/goods/ServiceCategory";return W.post(t,e)},getServiceByCategory(e){const t="/api/read/v1/goods/Service";return W.post(t,e)},getProductCategory(e){const t="/api/read/v1/goods/ProductCategory";return W.post(t,e)},getProductByCategory(e){const t="/api/read/v1/inventory/Product";return W.post(t,e)}};var Q=J;const X={getPrepaidServiceHistory(e){const t="/api/read/v1/sales/ClientPrepaidService/ClientPrepaidServiceHistories/Live";return W.post(t,e)},getPrepaidCardHistory(e){const t="/api/read/v1/sales/ClientPrepaidCard/ClientPrepaidCardHistories/Live";return W.post(t,e)},getSalesDetail(e){const t="/api/read/v1/sales/Sales/Sales/Live";return W.post(t,e)},addSales(e){const t="/api/cmd/v1/sales/Sales";return W.post(t,e)},getAllSalesSetup(e){const t="/api/read/v1/sales/SalesSetup/AllSalesSetups/Live";return W.post(t,e)}};var ee=X;const te={getAllClientByShop(e){const t="/api/read/v1/clients/Client/Active";return W.post(t,e)},createNewClient(e){const t="/api/aggr/v1/Client/CreateClient";return W.post(t,e)},editClient(e){const t="/api/aggr/v1/Client/EditClient";return W.put(t,e)},deleteClient(e){const t="/api/aggr/v1/Client/UpdateClientToDeleted";return W.post(t,e)},getNextMemberNumber(e){const t="/api/read/v1/clients/Client/NextMemberNumber";return W.post(t,e)},getClientByClientId(e){const t="/api/aggr/v1/Client/GetClient";return W.post(t,e)},getClientAccount(e){const t="api/read/v1/sales/ClientAccount/ClientAccounts/Live";return W.post(t,e)},uploadClientImage(e){const t="/api/cmd/v1/clients/ClientImage";return W.post(t,e)},deleteClientImage(e){const t="/api/cmd/v1/clients/ClientImage";return W["delete"](t,{data:e})},getClientPrepaidServices(e){const t="/api/read/v1/sales/ClientPrepaidService/ClientPrepaidServices/Live";return W.post(t,e)},getClientPrepaidCards(e){const t="/api/read/v1/sales/ClientPrepaidCard/ClientPrepaidCards/Live";return W.post(t,e)},getTotalValidPrepaidGoods(e){const t="/api/read/v1/sales/SalesSetup/PriorityPrepaidGoodsDisplay/Live";return W.post(t,e)},getClientWithSales(e){const t="/api/read/v1/sales/ClientAccount/ClientAccounts/Live";return W.post(t,e)},getSalesHistoryByClient(e){const t="api/read/v1/sales/Sales/SalesHistoriesByClient/Live";return W.post(t,e)}};var ae=te;const se={userApis:Y,shopApis:K,goodApis:Q,salesApis:ee,clientApis:ae};var ie=se;const oe={S4:le,guid:ne,randomIndex:de};function ne(){return(le()+le()+"-"+le()+"-4"+le().substr(0,3)+"-"+le()+"-"+le()+le()+le()).toLowerCase()}function le(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function de(){return 1e7*Math.random()}var re=oe,ce=a(7133),ue=a.n(ce);const pe={GetHours:ye,FormatDate:be,GetMinutes:Se,DateIntoUnix:me,FormatDateTime:ve,DateNowIntoUnix:he,FormatFullDateTime:fe,UnixSecondsIntoDate:ge,UnixMiliSecondsIntoDate:_e};function me(e){return ue()(e).unix()}function he(){const e=Date.now();return ue()(e).unix()}function ge(e){return ue().unix(1e3*e)._d}function _e(e){return ue().unix(e)._d}function be(e){return ue()(e).format("YYYY-MM-DD")}function ve(e){return ue()(e).format("YYYY-MM-DD HH:MM")}function fe(e){return ue()(e).format("dddd, YYYY-MM-DD")}function ye(){return ue()().hours()}function Se(){return ue()().minutes()}var Ce=pe;const we={ResetDataClient:Ie};function Ie(){return B.DEFAULT_DATA_CLIENT}var Te=we,Ne=a(1642),De=a.n(Ne),xe=a(3706);const ke={concatURL:Me,hourSelect:Oe,exportExcel:$e,minuteSelect:Be,showLongText:je,formatSaleItem:Ee,formatPhoneNumber:Pe,formatMoneyNumber:Ge,trimAllDataObject:Ae,formatPaymentMethod:Fe,covertSizeFileIntoMB:Le};function Pe(e){let t=e.split("");return t.length>9&&t.length<12&&(t.splice(4,0,"-"),t.splice(8,0,"-")),t=t.join(""),t}function Ge(e){return e.toLocaleString("en-US")}function Ae(e){const t=Object.keys(e);for(let a=0;a<t.length;a++)"string"===typeof e[t[a]]&&(e[t[a]]=e[t[a]].trim());return e}function Me({defaultURL:e,pathURL:t}){let a=e;for(let s=0;s<t.length;s++)t[s].trim()&&(a+="/"+t[s].trim());return a}function Le(e){return(e/1024/1024).toFixed(4)}function $e(e){const t=new(De().Workbook);let a=t.addWorksheet(e.title);a.mergeCells("A1:F1");const s=a.getCell("A1");s.value=e.header,s.font={family:4,size:18,bold:!0,name:"Time New Roman"},s.height=40,s.alignment={vertical:"middle",horizontal:"center"};const i=e.columns.map((e=>e.text)),o=a.addRow([...i]);o.height=30,o.alignment={vertical:"middle",horizontal:"center"};for(let n=0;n<e.columns.length;n++)console.log(e.columns[n].width,o),o._cells[n]._column.width=e.columns[n].width,o._cells[n].border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}};e.rows.map((function(e){const t=[...e],s=a.addRow(t);s.height=20;for(let a=0;a<t.length;a++)s._cells[a].alignment={horizontal:"center"},s._cells[a].border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}}})),t.xlsx.writeBuffer().then((t=>(0,xe.saveAs)(new Blob([t]),`${e.fileName}.xlsx`))).catch((e=>console.log("Error writing excel export",e)))}function je(e,t=100){return e&&e.trim().length>t?e.substring(0,t)+"...":e}function Ee(e){let t=0,a="";return 1===e.type&&(t=e.goodInfo.serviceId,a=e.goodInfo.serviceName),2===e.type&&(t=e.goodInfo.productId,a=e.goodInfo.productName),{amount:e.goodInfo.price*e.qty,clientPrepaidGoodsId:0,deductedByPrepaidGoodsGuid:"",deductedPrepaidGoodsRef:0,deductedPrepaidGoodsRefName:"",deductionAmount:0,deductionPoints:0,deductionType:0,discountCategoryId:0,discountCategoryName:"",discountForClient:!1,discountForProduct:0,discountForService:0,discountType:2,discountValue:0,giftCardType:0,goodsCategoryId:e.categoryInfo.id,goodsCategoryName:e.categoryInfo.name,goodsId:t,goodsName:a,goodsType:e.type,isCustomizePrepaidGoods:!1,prepaidCardInitialBalance:0,prepaidCardType:0,prepaidGoodsExpiryDateTS:0,prepaidGoodsGuid:"",prepaidServiceInitialQuantity:0,productCode:"",quantity:e.qty,relatedServiceId:0,relatedServiceName:"",relatedServiceUnitPrice:0,salesItemId:0,salesTypeId:null,salesTypeName:"",smallCutDiscountEnumDefault:0,staffs:[],supplierPrice:0,unitPrice:e.goodInfo.price}}function Fe(e,t){return{paidDateTimeTS:t,paymentAmount:0,paymentMethodId:e.id,paymentMethodName:e.name,paymentType:1,salesPaymentId:0}}function Oe(){const e=[];for(let t=0;t<24;t++)e.push({value:t,text:t});return e}function Be(){const e=[];for(let t=0;t<60;t++)e.push({value:t,text:t});return e}var ze=ke;const Ue={ResetErrorMessages:Re};function Re(){return U.DEFAULT_ERROR_MESSAGES}var He=Ue;const qe={randomFunctions:re,momentFunctions:Ce,clientFunctions:Te,commonFunctions:ze,messageFunctions:He};var We=qe,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notification-modal"},[a("b-modal",{ref:"modal",attrs:{static:"",scrollable:"","hide-footer":"",title:e.modalTitle,"header-bg-variant":"warning","no-close-on-backdrop":!0,"modal-class":"modal notification-modal__modal"}},[e._l(e.listMessage,(function(t){return a("div",{key:t.errorCode,staticClass:"message modal__message"},[e._v(" "+e._s(t.errorMessage)+" ")])})),a("footer",{staticClass:"footer modal__footer"},[a("button",{staticClass:"btn footer__btn",on:{click:e.onCancel}},[e._v("OK")])])],2)],1)},Ye=[],Ze={name:"NotificationModal",data(){return{listMessage:[]}},props:{modalTitle:{type:String,default:"Error"}},methods:{showModal(e){this.listMessage=e.listMessage,this.$refs.modal&&this.$refs.modal.show()},hideModal(){this.$refs.modal&&this.$refs.modal.hide()},onCancel(){this.hideModal()}}},Ke=Ze,Je=(0,d.Z)(Ke,Ve,Ye,!1,null,"dd59c0d6",null),Qe=Je.exports,Xe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},et=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading-component"},[a("div",{staticClass:"loading loading-component__loading"})])}],tt={name:"SalonThankzLoading",data(){return{}},props:{},mounted(){},methods:{}},at=tt,st=(0,d.Z)(at,Xe,et,!1,null,"46036997",null),it=st.exports,ot={name:"LoginPage",data(){return{dataUser:{username:"",password:""},isLoading:!1}},mounted(){A.shopSession.removeShopInfo()},components:{ValidationProvider:C.d_,ValidationObserver:C._j,Loading:it,NotificationModal:Qe},computed:{disabledBtn(){return""===this.dataUser.username||""===this.dataUser.password}},methods:{async onSubmit(){const e={userID:this.dataUser.username.trim(),password:this.dataUser.password.trim(),solutionId:H.api.SOLUTION_ID.SALON_ADMIN};if(""===e.userID.trim()||""===e.password.trim())this.$refs.notificationRef.showModal({listMessage:[{errorCode:"Login",errorMessage:"Username and password cannot be empty"}]});else try{this.isLoading=!0;const t=await ie.userApis.login(e);if(200!==t.status)throw t.statusText;t.data.isOK?(t.data.result.userAuthInfo.session_token=We.randomFunctions.guid(),await A.shopSession.setShopInfo(t.data.result),await this.loadClientSetUp(t.data.result.shopBasicInfo.shopId),this.$router.push("/client"),this.isLoading=!1):(this.isLoading=!1,this.$refs.notificationRef.showModal({listMessage:t.data.errorMessages}))}catch(t){console.log(t)}},async loadClientSetUp(e){const t={shopId:e};try{const e=await ie.shopApis.getShopInfo(t);if(200!==e.status)throw e.message;e.data.isOK?A.clientSession.setClientSetup(e.data.result):alert("Error Set up client")}catch(a){console.log(a)}}}},nt=ot,lt=(0,d.Z)(nt,y,S,!1,null,"22240242",null),dt=lt.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clients-page"},[a("div",{staticClass:"header clients-page__header"},[a("img",{staticClass:"image header__image",attrs:{src:"https://www.ahasoft.co.kr/login/images/logo_nobkg.png"}}),a("button",{staticClass:"header__btn",on:{click:e.clickSignout}},[e._v("Sign out")])]),a("div",{staticClass:"title clients-page__title"},[a("div",{staticClass:"title-text title__title-text"},[e._v("Client")]),a("div",{staticClass:"group-button title__group-button"},[a("button",{staticClass:"btn--print group-button__btn group-button__btn--print",on:{click:e.handleClickPrintListClient}},[e._v(" Export ")]),a("button",{staticClass:"btn--add-client group-button__btn group-button__btn--add-client",on:{click:e.handleClickAddClient}},[e._v(" Add ")])])]),a("div",{staticClass:"content clients-page__content"},[a("label",{staticClass:"title content__title"},[e._v("Total "+e._s(e.clientTotal)+" client(s) searched")]),e.statusScreenLaptop||!e.clients.length?a("table",{staticClass:"table content__table"},[a("thead",[a("tr",[e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),a("th",{attrs:{colspan:"3"}},[e._v("Actions")])],2)]),e.clients.length?a("tbody",e._l(e.clients,(function(t){return a("tr",{key:t.clientId},[a("td",{staticClass:"table-data table-data--registration-date table__table-data table__table-data--registration-date"},[e._v(" "+e._s(t.registrationDate)+" ")]),a("td",{staticClass:"table-data table-data--client-name table__table-data table__table-data--client-name"},[e._v(" "+e._s(e.showLongText(t.clientName,50))+" ")]),a("td",{staticClass:"table-data table-data--phone table__table-data table__table-data--phone"},[e._v(" "+e._s(t.phone)+" ")]),a("td",{staticClass:"table-data table-data--total-sales-amount table__table-data table__table-data--total-sales-amount"},[e._v(" "+e._s(t.totalSales)+" ")]),a("td",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"table-data table-data--notes table__table-data table__table-data--notes",attrs:{title:t.notes&&t.notes.trim().length>50?t.notes:""}},[e._v(" "+e._s(e.showLongText(t.notes,20))+" ")]),a("td",{staticClass:"table-data table-data--btn table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--edit",on:{click:function(){return e.handleClickEditClient(t)}}},[e._v(" Edit ")])]),a("td",{staticClass:"table-data table-data--btn table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--calendar",on:{click:e.onClickCalendar}},[e._v(" Calender ")])]),a("td",{staticClass:"table-data table-data--btn table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--sales",on:{click:function(a){return e.onClickSales(t)}}},[e._v(" Sales ")])])])})),0):a("tbody",[e._m(0)])]):a("div",{staticClass:"client-info content__client-info"},e._l(e.clients,(function(t){return a("div",{key:t.clientId,staticClass:"client-info__info"},[a("client-info",{attrs:{client:t},on:{onClickSales:e.onClickSales,onClickCalendar:e.onClickCalendar,handleClickEditClient:e.handleClickEditClient}})],1)})),0),e.page.pageTotal>1?a("div",{staticClass:"page content__page"},[a("label",{staticClass:"page-total page__page-total"},[e._v("Page "+e._s(e.page.pageNumber)+" of "+e._s(e.page.pageTotal))]),a("button",{staticClass:"page__btn page__btn--go-to-first-page",on:{click:e.clickGoToFirstPage}},[e._v(" << ")]),a("button",{staticClass:"page__btn page__btn--go-to-previous-page",on:{click:e.clickGoToPreviousPage}},[e._v(" < ")]),a("button",{staticClass:"page__btn page__btn--go-to-next-page",on:{click:e.clickGoToNextPage}},[e._v(" > ")]),a("button",{staticClass:"page__btn page__btn--go-to-last-page",on:{click:e.clickGoToLastPage}},[e._v(" >> ")]),a("button",{staticClass:"page__btn page__btn--go-to",on:{click:e.clickGoto}},[e._v(" "+e._s(e.isShowSelectPage?"Goto":"Hide")+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.page.pageSelected,expression:"page.pageSelected"}],attrs:{hidden:e.isShowSelectPage},on:{click:e.clickSelectedPage,change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.page,"pageSelected",t.target.multiple?a:a[0])}}},e._l(e.optionsPage,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)]):e._e()]),a("client-actions",{ref:"clientActionsRef",on:{loadClient:e.loadDataClient,loading:e.handleSetLoading}}),e.isLoading?a("loading",{staticClass:"loading"}):e._e(),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}}),a("sales-action",{ref:"refSalesAction",on:{loading:e.handleSetLoading}})],1)},ct=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"table__table-no-data",attrs:{colspan:"8"}},[e._v("No data")])])}],ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"client-info"},[a("div",{staticClass:"client-info__title"},[a("div",{staticClass:"title__text"},[a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"text__name",attrs:{title:e.client.clientName.length>25?e.client.clientName:""}},[e._v(" "+e._s(e.client.clientName)+" ")]),e.client.phone?a("div",[e._v(e._s("("+e.client.phone+")"))]):e._e(),a("div",{staticClass:"text__date"},[e._v(e._s(e.client.registrationDate))])]),a("div",{staticClass:"title__group-button"},[e.statusScreenTablet?a("div",{staticClass:"group-button-action group-button__group-button-action"},[a("button",{on:{click:e.handleClickEditClient}},[e._v("Edit")]),a("button",{on:{click:e.onClickCalendar}},[e._v("Calendar")]),a("button",{on:{click:e.onClickSales}},[e._v("Sales")])]):e._e(),a("button",{on:{click:e.onClickShowInfoClient}},[e._v(" "+e._s(e.isShowClientInfo?"⇧":"⇨")+" ")])])]),e.isShowClientInfo?a("div",{staticClass:"client-info__content"},[e.client.phone?a("div",{staticClass:"content__data"},[a("div",{staticClass:"data__title"},[e._v("Phone Number")]),a("div",[e._v(e._s(e.client.phone))])]):e._e(),a("div",{staticClass:"content__data"},[a("div",{staticClass:"data__title"},[e._v("Total Sales")]),a("div",[e._v(e._s(e.client.totalSales))])]),e.client.notes?a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"content__data content__data--notes",attrs:{title:e.client.notes.length>30?e.client.notes:""}},[e._v(" "+e._s(e.showLongText(e.client.notes,30))+" ")]):e._e(),a("div",{staticClass:"group-button-action content__group-button"},[a("button",{on:{click:e.handleClickEditClient}},[e._v("Edit")]),a("button",{on:{click:e.onClickCalendar}},[e._v("Calendar")]),a("button",{on:{click:e.onClickSales}},[e._v("Sales")])])]):e._e()])},pt=[],mt={name:"SalonThankzClientInfo",data(){return{isShowClientInfo:!1,windowWidth:window.innerWidth}},props:{client:{type:Object,default:function(){return H.payload.DEFAULT_DATA_CLIENT}}},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},computed:{statusScreenTablet(){return this.windowWidth>1.2*H.common.screenSize.maxScreenPhone}},methods:{showLongText(e,t){return We.commonFunctions.showLongText(e,t)},handleClickEditClient(){this.$emit("handleClickEditClient",this.client)},onClickCalendar(){this.$emit("onClickCalendar")},onClickSales(){this.$emit("onClickSales",this.client)},onClickShowInfoClient(){this.isShowClientInfo=!this.isShowClientInfo},onResize(){this.windowWidth=window.innerWidth}}},ht=mt,gt=(0,d.Z)(ht,ut,pt,!1,null,"1347a55c",null),_t=gt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sales-action"},[a("b-modal",{ref:"salesActionModal",attrs:{static:"",size:"xl","hide-footer":"","header-bg-variant":"info",title:e.typeAction.text,"no-close-on-backdrop":!0,"modal-class":"modal sales-action-modal__modal"},on:{hide:e.resetModal}},[e.typeAction.type?a("div",[a("div",[e._v("Edit Sales")])]):a("div",{staticClass:"modal__add-sales"},[a("div",{staticClass:"add-sales__client-name"},[e._v(" "+e._s(e.dataClient.clientName)+" ")]),a("div",{staticClass:"add-sales__select-item"},[a("div",{staticClass:"select-item__list-category"},[a("good-type",{attrs:{goodTypeSelected:e.goodTypeSelected},on:{handleGoodTypeSelect:e.handleGetGoodCategory,handleShowSelectSalesItem:e.handleShowSelectSalesItem}})],1),a("div",{staticClass:"select-item__table"},[a("table",[a("thead",[a("tr",e._l(e.fields,(function(t){return a("th",{key:t.text+e.handleRandomIndex()},[e._v(" "+e._s(t.text)+" ")])})),0)]),e.isShow?a("tbody",e._l(e.goodListSelectedShow,(function(t,s){return a("tr",{key:s+e.handleRandomIndex()},[a("td",{staticClass:"table__table-data table__table-data--sales-item"},[e._v(" "+e._s(t.showDataTable.salesItem)+" ")]),a("td",{staticClass:"table__table-data table__table-data--unit-price"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.showDataTable.unitPrice,expression:"good.showDataTable.unitPrice"}],attrs:{min:"1",type:"number"},domProps:{value:t.showDataTable.unitPrice},on:{change:function(a){return e.handleUnitPrice(t.showDataTable.goodId,t.showDataTable.unitPrice)},input:function(a){a.target.composing||e.$set(t.showDataTable,"unitPrice",a.target.value)}}})]),a("td",{staticClass:"table__table-data table__table-data--qty"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.showDataTable.qTy,expression:"good.showDataTable.qTy"}],attrs:{min:"1",type:"number"},domProps:{value:t.showDataTable.qTy},on:{change:function(a){return e.handleQty(t.showDataTable.goodId,t.showDataTable.qTy)},input:function(a){a.target.composing||e.$set(t.showDataTable,"qTy",a.target.value)}}})]),a("td",{staticClass:"table__table-data table__table-data--unit-discount",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.discount)+" ")]),a("td",{staticClass:"table__table-data table__table-data--amount"},[e._v(" "+e._s(t.showDataTable.amount)+" ")]),a("td",{staticClass:"table__table-data table__table-data--staff",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.staff)+" ")]),a("td",{staticClass:"table__table-data table__table-data--sales-type",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.salesType)+" ")]),a("td",{staticClass:"table__table-data table__table-data--points-deduct",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.pointDeduct)+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance-deduct",on:{click:e.handleNotification}},[e._v(" "+e._s(t.showDataTable.balanceDeduct)+" ")]),a("td",{staticClass:"table__table-data table__table-data--delete",on:{click:function(a){return e.handleDeleteItemSelected(t.showDataTable.goodId)}}},[e._v(" X ")])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"10"}},[e._v("No data")])])])])])]),a("div",{staticClass:"add-sales__content-footer"},[a("div",{staticClass:"content-footer__title"},[e._v("Payment")]),a("div",{staticClass:"content-footer__detail"},[a("div",{staticClass:"detail__payment-detail"},[a("div",{staticClass:"payment-detail__total-amount"},[a("span",{staticClass:"payment-detail__title"},[e._v("Total Amount")]),a("span",{staticClass:"payment-detail__data"},[e._v(e._s(e.totalAmount))])]),a("div",{staticClass:"payment-detail__point-deduction"},[a("span",{staticClass:"payment-detail__title"},[e._v("Point Deduction")]),a("span",[e._v("0")])]),a("div",{staticClass:"payment-detail__balance-deduction"},[a("span",{staticClass:"payment-detail__title"},[e._v("Balance Deduction")]),a("span",[e._v("0")])]),a("div",{staticClass:"payment-detail__outstanding"},[a("span",{staticClass:"payment-detail__title"},[e._v("Outstanding")]),a("span",[e._v(e._s(e.outstanding))])]),a("div",{staticClass:"payment-detail__earn-loyalty-points"},[a("span",{staticClass:"payment-detail__title"},[e._v("Earn Loyalty Points")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.salesLoyaltyPoint,expression:"salesLoyaltyPoint"}],attrs:{type:"number",min:"0"},domProps:{value:e.salesLoyaltyPoint},on:{input:function(t){t.target.composing||(e.salesLoyaltyPoint=t.target.value)}}})])]),a("div",{staticClass:"detail__deduction-notes-payment-date"},[a("div",{staticClass:"deduction-notes-payment__deduction"},[a("div",{staticClass:"deduction__text"},[e._v("DEDUCTION")]),a("div",{staticClass:"deduction__group-button"},[a("button",{staticClass:"group-button__btn group-button__btn--point",on:{click:e.handleNotification}},[e._v(" Point ")]),a("button",{staticClass:"group-button__btn group-button__btn--balance",on:{click:e.handleNotification}},[e._v(" Balance ")])])]),a("div",{staticClass:"deduction-notes-payment-date__payment"},[a("div",{staticClass:"payment__title"},[e._v("PAYMENT")]),a("div",{staticClass:"payment__payment-method"},e._l(e.paymentMethods,(function(t){return a("button",{key:t.id+e.handleRandomIndex(),staticClass:"payment-method__button",on:{click:function(a){return e.handlePaymentSelected(t)}}},[e._v(" "+e._s(t.name)+" ")])})),0)]),a("div",{staticClass:"deduction-notes-payment-date__notes"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.salesNotes,expression:"salesNotes"}],attrs:{rows:"2"},domProps:{value:e.salesNotes},on:{input:function(t){t.target.composing||(e.salesNotes=t.target.value)}}})]),a("div",{staticClass:"deduction-notes-payment-date__date"},[a("span",{staticClass:"date__tittle"},[e._v("Sales Date")]),a("v-date-picker",{staticClass:"date-picker date__date-picker",attrs:{masks:e.masks},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents;return[a("input",e._g({staticClass:"input-date-picker date-picker__input-date-picker",domProps:{value:s}},i))]}}],null,!1,1686376726),model:{value:e.registeredDate,callback:function(t){e.registeredDate=t},expression:"registeredDate"}}),a("div",{staticClass:"date__time"},[a("b-form-select",{attrs:{options:e.hourOptions},model:{value:e.hoursSales,callback:function(t){e.hoursSales=t},expression:"hoursSales"}}),e._v(" : "),a("b-form-select",{attrs:{options:e.minuteOptions},model:{value:e.minutesSales,callback:function(t){e.minutesSales=t},expression:"minutesSales"}})],1)],1)])]),a("div",{staticClass:"content-footer__group-button"},[a("group-button",{attrs:{isShowButton:e.isShowButton},on:{confirm:e.handleAddSales,cancel:e.hideModal}})],1)])])]),a("select-sales-item",{ref:"refSelectSalesItem",attrs:{dataGoodList:e.goodList,dataCategories:e.categories},on:{loading:e.handleSetLoading,resetGoodType:e.handleResetGoodType,getServiceCategory:e.handleGetServiceCategory,getProductCategory:e.handleGetProductCategory,confirmItemSelected:e.handleConfirmItemSelected,getProductByCategory:e.handleGetProductByCategory,getServiceByCategory:e.handleGetServiceByCategory,resetDataCategoryGood:e.handleResetDataCategoryGood}}),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}})],1)},vt=[],ft=(a(6699),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-good-type"},e._l(Object.values(e.goodTypes),(function(t,s){return a("div",{key:s,staticClass:"good-type",class:{"good-type--selected":e.handleGoodTypeSelected(t.id)},on:{click:function(){return e.handleClickGoodType(t)}}},[e._v(" "+e._s(t.text)+" ")])})),0)}),yt=[],St={name:"SalonThankzGoodType",data(){return{windowWidth:window.innerWidth,goodTypes:Object.assign({},H.sales.itemSalesType)}},props:{goodTypeSelected:{type:Number,default:Object.values(H.sales.itemSalesType)[0].id}},components:{},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},computed:{statusScreenLaptop(){return this.windowWidth>H.common.screenSize.maxScreenLaptop}},methods:{handleGoodTypeSelected(e){return e===this.goodTypeSelected},handleClickGoodType(e){this.$emit("handleGoodTypeSelect",e.id),this.$emit("handleShowSelectSalesItem")}}},Ct=St,wt=(0,d.Z)(Ct,ft,yt,!1,null,"32b1c798",null),It=wt.exports,Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group-button"},[e.isShowButton.confirm?a("button",{staticClass:"btn--confirm group-button__btn group-button__btn--confirm",class:{"group-button__btn--disable":e.disableConfirm},attrs:{disabled:e.disableConfirm},on:{click:e.handleClickConfirm}},[e._v(" "+e._s(e.nameButton.confirm)+" ")]):e._e(),e.isShowButton.delete?a("button",{staticClass:"btn--delete group-button__btn group-button__btn--delete",on:{click:e.handleClickDelete}},[e._v(" "+e._s(e.nameButton.delete)+" ")]):e._e(),e.isShowButton.cancel?a("button",{staticClass:"btn--cancel group-button__btn group-button__btn--cancel",on:{click:e.handleClickCancel}},[e._v(" "+e._s(e.nameButton.cancel)+" ")]):e._e()])},Nt=[],Dt={name:"SalonThankzGroupButton",data(){return{}},props:{disableConfirm:{type:Boolean,default:!1},isShowButton:{type:Object,default:function(){return{delete:!0,cancel:!0,confirm:!0}}},nameButton:{type:Object,default:function(){return{confirm:"Save",delete:"Delete",cancel:"Cancel"}}}},mounted(){},methods:{handleClickConfirm(){this.$emit("confirm")},handleClickDelete(){this.$emit("delete")},handleClickCancel(){this.$emit("cancel")}}},xt=Dt,kt=(0,d.Z)(xt,Tt,Nt,!1,null,"26cfd588",null),Pt=kt.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-sales-item"},[a("b-modal",{ref:"selectSalesItemModal",attrs:{static:"",size:"xl","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal select-sales-item-modal__modal"},on:{hide:e.resetModal}},[a("div",{staticClass:"modal__content"},[a("div",{staticClass:"content__list-good"},[a("good-type",{attrs:{goodTypeSelected:e.goodTypeSelected},on:{handleGoodTypeSelect:e.handleGetGoodCategory}})],1),a("div",{staticClass:"content__body"},[a("div",{staticClass:"body__category-item"},[a("category-good",{attrs:{typeGood:e.typeGood,goodList:e.dataGoodList,categories:e.dataCategories,categorySelected:e.categorySelected},on:{handleAddGoodSelected:e.handleAddGoodSelected,handleGetServiceByCategory:e.handleGetServiceByCategory,handleGetProductByCategory:e.handleGetProductByCategory}})],1),a("div",{staticClass:"body__group-button-list-item-select"},[a("div",{staticClass:"group-button-list-item-select__group-button"},[a("group-button",{attrs:{nameButton:e.nameButton,isShowButton:e.isShowButton},on:{cancel:e.handleCloseModal,confirm:e.handleConfirmItemSelected}})],1),a("div",{staticClass:"group-button-list-item-select__list-item-select"},[a("div",{staticClass:"list-item-select__select-staff"}),e.iShowSelectedItem?a("div",{staticClass:"list-item-select__list-item"},[a("div",{staticClass:"list-item__title"},[e._v(e._s(e.goodTypeSelectedName)+" Selected")]),a("good-selected",{attrs:{isTypeGood:e.isTypeGood,goodListSelected:e.goodListSelectedShow},on:{handleDeleteItemSelected:e.handleDeleteItemSelected}})],1):e._e()])])])])]),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}})],1)},At=[],Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"good-selected"},[e.isTypeGood.services?a("div",{staticClass:"good-selected__good-type"},[a("table",[a("thead",[a("tr",e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),0)]),a("tbody",e._l(e.goodListSelected,(function(t,s){return a("tr",{key:s,staticClass:"good-type__table-data"},[a("td",{staticClass:"table-data__name"},[e._v(e._s(t.goodInfo.serviceName))]),a("td",{staticClass:"table-data__qty"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"goodSelected.qty"}],staticClass:"item__qty",attrs:{min:"1",type:"number"},domProps:{value:t.qty},on:{input:function(a){a.target.composing||e.$set(t,"qty",a.target.value)}}})]),a("td",{staticClass:"table-data__btn"},[a("button",{staticClass:"btn--del",on:{click:function(a){return e.handleDeleteItem(t,1)}}},[e._v("X")])])])})),0)])]):e._e(),e.isTypeGood.products?a("div",{staticClass:"good-selected__good-type"},[a("table",[a("thead",[a("tr",e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),0)]),a("tbody",e._l(e.goodListSelected,(function(t,s){return a("tr",{key:s,staticClass:"good-type__table-data"},[a("td",{staticClass:"table-data__name"},[e._v(e._s(e.showLongText(t.goodInfo.productName,15)))]),a("td",{staticClass:"table-data__qty"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"goodSelected.qty"}],staticClass:"item__qty",attrs:{min:"1",type:"number"},domProps:{value:t.qty},on:{input:function(a){a.target.composing||e.$set(t,"qty",a.target.value)}}})]),a("td",{staticClass:"table-data__btn"},[a("button",{staticClass:"btn--del",on:{click:function(a){return e.handleDeleteItem(t,2)}}},[e._v("X")])])])})),0)])]):e._e(),e.isTypeGood.prepaidCard?a("div",{staticClass:"good-selected__good-type"}):e._e(),e.isTypeGood.prepaidService?a("div",{staticClass:"good-selected__good-type"}):e._e(),e.isTypeGood.packages?a("div",{staticClass:"good-selected__good-type"}):e._e()])},Lt=[];const $t={item:{text:"Selected Items"},qty:{text:"Qty"},del:{text:"Del"}};var jt={data(){return{fields:Object.assign({},$t)}},mounted(){},props:{isTypeGood:{type:Object,default:function(){return{}}},goodListSelected:{type:Array,default:function(){return[]}}},computed:{},methods:{handleDeleteItem(e,t){1===t&&this.$emit("handleDeleteItemSelected",e.goodInfo.serviceId.toString()),2===t&&this.$emit("handleDeleteItemSelected",e.goodInfo.productId.toString())},showLongText(e,t){return We.commonFunctions.showLongText(e,t)}}},Et=jt,Ft=(0,d.Z)(Et,Mt,Lt,!1,null,"734167de",null),Ot=Ft.exports,Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category-good"},[a("div",{staticClass:"category"},[a("div",{staticClass:"category__title"},[e._v("Category")]),e.isTypeGood.products?a("div",e._l(e.categories,(function(t){return a("div",{key:t.orderNo,staticClass:"category__item",class:{"category__item--selected":t.productCategoryId===e.isCategorySelected},on:{click:function(){return e.handleGetProductByCategory(t.productCategoryId,t.productCategoryName)}}},[e._v(" "+e._s(t.productCategoryName)+" ")])})),0):e._e(),e.isTypeGood.services?a("div",e._l(e.categories,(function(t){return a("div",{key:t.orderNo,staticClass:"category__item",class:{"category__item--selected":t.serviceCategoryId===e.isCategorySelected},on:{click:function(){return e.handleGetServiceByCategory(t.serviceCategoryId,t.serviceCategoryName)}}},[e._v(" "+e._s(t.serviceCategoryName)+" ")])})),0):e._e(),e.isTypeGood.prepaidCard?a("div"):e._e(),e.isTypeGood.prepaidService?a("div"):e._e(),e.isTypeGood.packages?a("div"):e._e()]),a("div",{staticClass:"good"},[e.isTypeGood.products?a("div",[a("div",{staticClass:"good__title"},[e._v(e._s(e.categorySelected.id?e.categorySelected.name:e.categories.length&&e.categories[0].productCategoryName))]),e._l(e.goodList,(function(t){return a("div",{key:t.productId,staticClass:"good__item",on:{click:function(a){return e.handleAddGood(t,2,e.categorySelected)}}},[a("span",[e._v(e._s(t.productName))]),a("span",{staticClass:"item__price"},[e._v("("+e._s(e.handleFormatNumber(t.retailPrice))+")")])])}))],2):e._e(),e.isTypeGood.services?a("div",[a("div",{staticClass:"good__title"},[e._v(e._s(e.categorySelected.id?e.categorySelected.name:e.categories.length&&e.categories[0].serviceCategoryName))]),e._l(e.goodList,(function(t){return a("div",{key:t.serviceId,staticClass:"good__item",on:{click:function(a){return e.handleAddGood(t,1,e.categorySelected)}}},[a("span",[e._v(e._s(t.serviceName))]),a("span",{staticClass:"item__price"},[e._v("("+e._s(e.handleFormatNumber(t.price))+")")])])}))],2):e._e(),e.isTypeGood.prepaidCard?a("div"):e._e(),e.isTypeGood.prepaidService?a("div"):e._e(),e.isTypeGood.packages?a("div"):e._e()])])},zt=[],Ut={name:"SalonThankzCategoryGood",data(){return{}},props:{categories:{type:Array,default:function(){return[]}},goodList:{type:Array,default:function(){return[]}},typeGood:{type:Number,default:1},categorySelected:{type:Object,default:function(){return{id:0,name:""}}}},computed:{isTypeGood(){return{products:this.typeGood===H.sales.products,packages:this.typeGood===H.sales.packages,services:this.typeGood===H.sales.services,prepaidCard:this.typeGood===H.sales.prepaidCard,prepaidService:this.typeGood===H.sales.prepaidService}},isCategorySelected(){return 0===this.categorySelected.id?1===this.typeGood?this.categories?.[0]?.serviceCategoryId:this.categories?.[0]?.productCategoryId:this.categorySelected.id}},mounted(){},methods:{handleGetServiceByCategory(e,t){this.$emit("handleGetServiceByCategory",{serviceCategoryId:e,serviceCategoryName:t})},handleGetProductByCategory(e,t){this.$emit("handleGetProductByCategory",{productCategoryId:e,productCategoryName:t})},handleFormatNumber(e){let t=0;return e>0&&(t=We.commonFunctions.formatMoneyNumber(e)),t},handleAddGood(e=null,t=0,a=null){let s={id:0,name:null};0===a.id?(1===t&&(s.id=this.categories[0].serviceCategoryId,s.name=this.categories[0].serviceCategoryName),2===t&&(s.id=this.categories[0].productCategoryId,s.name=this.categories[0].productCategoryName)):s=a,this.$emit("handleAddGoodSelected",{good:e,type:t,category:s})}}},Rt=Ut,Ht=(0,d.Z)(Rt,Bt,zt,!1,null,"232cc8cd",null),qt=Ht.exports;const Wt={id:0,name:""};var Vt={name:"SalonThankzSalesAction",data(){return{typeGood:1,goodList:[],categories:[],goodListSelected:{},goodListSelectedShow:[],iShowSelectedItem:!1,title:"Select Sales Item",windowWidth:window.innerWidth,categorySelected:Object.assign({},Wt),goodTypeSelected:Object.values(H.sales.itemSalesType)[0].id,goodTypeSelectedName:Object.values(H.sales.itemSalesType)[0].text}},components:{GoodType:It,GroupButton:Pt,CategoryGood:qt,GoodSelected:Ot,Notification:Qe},props:{dataCategories:{type:Array,default:function(){return[]}},dataGoodList:{type:Array,default:function(){return[]}}},mounted(){this.handleGetServiceCategory(),this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},computed:{statusScreenLaptop(){return this.windowWidth>H.common.screenSize.maxScreenLaptop},isShowModal(){return this.dataCategories},isShowButton(){return{confirm:!0,delete:!1,cancel:!0}},nameButton(){return{confirm:"Confirm",cancel:"Cancel"}},isTypeGood(){return{products:this.typeGood===H.sales.products,packages:this.typeGood===H.sales.packages,services:this.typeGood===H.sales.services,prepaidCard:this.typeGood===H.sales.prepaidCard,prepaidService:this.typeGood===H.sales.prepaidService}}},watch:{goodTypeSelected:function(e,t){e!==t&&(this.goodListSelected={},this.iShowSelectedItem=!1,this.goodListSelectedShow=[])}},methods:{showModal(e){this.typeGood=e.typeGood,this.goodList=e.goodList,this.categories=e.categories,this.goodTypeSelected=e.typeGood;const t=Object.values(H.sales.itemSalesType);this.goodTypeSelectedName=t[t.findIndex((e=>e.id===this.goodTypeSelected))].text,this.isShowModal&&this.$refs.selectSalesItemModal&&this.$refs.selectSalesItemModal.show()},hideModal(){this.$refs.selectSalesItemModal&&this.$refs.selectSalesItemModal.hide()},handleGetGoodCategory(e){if(e===H.sales.services||e===H.sales.products){if(!0===confirm("Change Data")){this.typeGood=e,this.goodTypeSelected=e;const t=Object.values(H.sales.itemSalesType);this.goodTypeSelectedName=t[t.findIndex((e=>e.id===this.goodTypeSelected))].text,e===H.sales.services&&(this.categorySelected=Object.assign({},Wt),this.handleGetServiceCategory()),e===H.sales.products&&(this.categorySelected=Object.assign({},Wt),this.handleGetProductCategory())}}else this.handleNotification()},async handleGetServiceCategory(){this.$emit("getServiceCategory")},async handleGetProductCategory(){this.$emit("getProductCategory")},async handleGetProductByCategory({productCategoryId:e=0,productCategoryName:t=""}){this.categorySelected={id:e,name:t},this.$emit("getProductByCategory",e)},async handleGetServiceByCategory({serviceCategoryId:e=0,serviceCategoryName:t=""}){this.categorySelected={id:e,name:t},this.$emit("getServiceByCategory",e)},resetModal(){this.typeGood=1,this.goodListSelected={},this.iShowSelectedItem=!1,this.categorySelected=Object.assign({},Wt),this.goodTypeSelected=Object.values(H.sales.itemSalesType)[0].id,this.goodTypeSelectedName=Object.values(H.sales.itemSalesType)[0].text,this.$emit("resetGoodType"),this.$emit("resetDataCategoryGood")},handleAddGoodSelected({good:e,type:t,category:a}){let s;1===t?s=e.serviceId.toString():2===t&&(s=e.productId.toString()),this.goodListSelected[s]?this.goodListSelected[s].qty+=1:this.goodListSelected[s]={qty:1,type:t,goodInfo:e,categoryInfo:a},this.goodListSelectedShow=Object.values(this.goodListSelected),this.iShowSelectedItem=!0},handleDeleteItemSelected(e){delete this.goodListSelected[e],this.goodListSelectedShow=Object.values(this.goodListSelected),this.goodListSelectedShow.length||(this.iShowSelectedItem=!1)},handleConfirmItemSelected(){this.$emit("confirmItemSelected",this.goodListSelected),this.$refs.selectSalesItemModal.hide()},handleCloseModal(){this.hideModal()},handleNotification(){this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Not Support Yet!"}]})}}},Yt=Vt,Zt=(0,d.Z)(Yt,Gt,At,!1,null,"6f913054",null),Kt=Zt.exports;const Jt=[{type:0,text:"Add Sales"},{type:1,text:"Edit Sales"}],Qt={id:0,name:""},Xt={salesItem:{text:"Sales Items"},unitPrice:{text:"Unit Price"},qTy:{text:"Q'ty"},discount:{text:"Discount"},amount:{text:"Amount"},staff:{text:"Staff"},salesType:{text:"Sales Type"},pointDeduct:{text:"Points Deduct"},balanceDeduct:{text:"Balance Deduct"},delete:{text:"Delete"}};var ea={name:"SalonThankzSalesAction",data(){return{title:"",typeGood:1,goodList:[],salesPaid:0,salesNotes:"",hoursSales:0,categories:[],typeAction:{},dataClient:{},totalAmount:0,outstanding:0,minutesSales:0,paymentMethods:[],paymentSelected:[],goodListSelected:{},invoiceDateTimeTS:0,salesLoyaltyPoint:0,goodListSelectedShow:[],registeredDate:Date.now(),registeredTime:Date.now(),windowWidth:window.innerWidth,fields:Object.assign({},Xt),categorySelected:Object.assign({},Qt),goodTypeSelected:Object.values(H.sales.itemSalesType)[0].id,masks:{input:"YYYY-MM-DD"}}},components:{GoodType:It,GroupButton:Pt,Notification:Qe,SelectSalesItem:Kt},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},computed:{statusScreenLaptop(){return this.windowWidth>H.common.screenSize.maxScreenLaptop},isShow(){return this.goodListSelectedShow.length},isShowButton(){return{confirm:!0,delete:!1,cancel:!0}},minuteOptions(){return We.commonFunctions.minuteSelect()},hourOptions(){return We.commonFunctions.hourSelect()}},methods:{showModal(e){this.hoursSales=We.momentFunctions.GetHours(),this.minutesSales=We.momentFunctions.GetMinutes();const t=["Cash","Credit Card"],a=A.saleSession.getAllPaymentMethods();a.forEach((e=>{t.includes(e.name)&&this.paymentMethods.push(e)})),this.dataClient=e.client,this.invoiceDateTimeTS=e.invoiceDateTimeTS,this.typeAction=Jt[Jt.findIndex((t=>t.type===e.type))],this.$refs.salesActionModal&&this.$refs.salesActionModal.show(),this.typeAction.type||(this.handleGetServiceCategory(),this.$refs.refSelectSalesItem&&this.$refs.refSelectSalesItem.showModal({typeGood:1,goodList:this.goodList,categories:this.categories}))},hideModal(){this.resetModal(),this.$refs.salesActionModal&&this.$refs.salesActionModal.hide()},handleSetLoading(e){this.$emit("loading",e)},async handleGetServiceCategory(){const e={status:1,pageSize:100,pageNumber:1,shopId:A.shopSession.getShopId()};this.$emit("loading",!0);try{const t=await ie.goodApis.getServiceCategory(e);if(200!==t.status)throw this.$emit("loading",!1),t;return t.data.isOK?(this.categories=t.data.result.items,this.handleGetServiceByCategory(t.data.result.items[0]?.serviceCategoryId)):console.log("error",t),void this.$emit("loading",!1)}catch(t){console.log("errors",t)}},async handleGetProductCategory(){const e={pageNumber:1,pageSize:100,shopId:A.shopSession.getShopId(),status:1};this.$emit("loading",!0);try{const t=await ie.goodApis.getProductCategory(e);if(200!==t.status)throw this.$emit("loading",!1),t;t.data.isOK?(this.handleGetProductByCategory(),this.categories=t.data.result.items):console.log("error",t),this.$emit("loading",!1)}catch(t){console.log("errors",t)}},async handleGetProductByCategory(e=0){const t={status:1,keyWord:"",pageSize:100,pageNumber:1,usageStatus:"1,3",isCalculateValuation:!1,productCategoryId:e,shopId:A.shopSession.getShopId()};this.$emit("loading",!0);try{const e=await ie.goodApis.getProductByCategory(t);if(200!==e.status)throw this.$emit("loading",!1),e;e.data.isOK?this.goodList=e.data.result.items:console.log("error",e),this.$emit("loading",!1)}catch(a){console.log("errors",a)}},async handleGetServiceByCategory(e=0){const t={status:1,pageSize:100,pageNumber:1,serviceCategoryId:e,shopId:A.shopSession.getShopId()};this.$emit("loading",!0);try{const e=await ie.goodApis.getServiceByCategory(t);if(200!==e.status)throw this.$emit("loading",!1),e;e.data.isOK?this.goodList=e.data.result.items:console.log("error",e),this.$emit("loading",!1)}catch(a){console.log("errors",a)}},handleResetDataCategoryGood(){this.goodList=[],this.categories=[]},async handleAddSales(){if(Object.values(this.goodListSelected).length){const t=We.momentFunctions.FormatDate(this.registeredDate),a=`${t}  ${this.hoursSales}:${this.minutesSales}`,s=We.momentFunctions.DateIntoUnix(a);if(s>We.momentFunctions.DateIntoUnix())return void this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Can not add sales in future."}]});const i=Object.values(this.goodListSelected).map((e=>{const t=We.commonFunctions.formatSaleItem(e);return t}));this.paymentSelected[0]&&(this.paymentSelected[0].paymentAmount=this.salesPaid);const o={balanceDeduction:0,balanceMoves:[],bookingId:0,branchNumber:A.shopSession.getBranchInfo().number,chainId:A.shopSession.chainId,clientId:this.dataClient.clientId,createdById:A.shopSession.getUserAccount().id,createdByName:A.shopSession.getUserAccount().name,createdDateTimeTS:s,deductionPoints:0,deletedById:0,deletedByName:"",deletedDateTimeTS:0,earnedPoints:this.salesLoyaltyPoint,editedById:0,editedByName:"",editedDateTimeTS:0,editedSalesId:0,hourOfDay:We.momentFunctions.GetHours(),invoiceDateTimeTS:this.invoiceDateTimeTS,isSalesConnect:!1,notes:this.salesNotes.trim(),outstanding:this.outstanding,payments:this.paymentSelected,salesId:0,salesItems:i,salesNumber:"",sessionToken:A.shopSession.getSessionToken(),shopId:A.shopSession.getShopId(),shopLocation:H.payload.DEFAULT_SHOP_LOCATION,status:0,totalAmount:this.totalAmount};if(this.$emit("loading",!0),this.outstanding>0)if(!0===confirm(`The outstanding is ${this.handleFormatNumber(this.outstanding)}. Do you want to save?`)){try{const e=await ie.salesApis.addSales(o);if(200!==e.status)throw this.$emit("loading",!1),e;e.data.isOK?(this.hideModal(),this.resetModal()):alert(e.data.errorMessages),this.$emit("loading",!1)}catch(e){console.log("errors",e)}this.$emit("loading",!1)}else this.$emit("loading",!1);else{try{const e=await ie.salesApis.addSales(o);if(200!==e.status)throw this.$emit("loading",!1),e;e.data.isOK?(this.hideModal(),this.resetModal()):alert(e.data.errorMessages),this.$emit("loading",!1)}catch(e){console.log("errors",e)}this.$emit("loading",!1)}}else this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Sales items list can not be empty."}]})},resetModal(){this.salesPaid=0,this.hoursSales=0,this.dataClient={},this.outstanding=0,this.totalAmount=0,this.salesNotes="",this.minutesSales=0,this.paymentSelected=[],this.goodListSelected={},this.salesLoyaltyPoint=0,this.goodListSelectedShow=[]},handleConfirmItemSelected(e={}){Object.keys(e).forEach((t=>{this.goodListSelected[t]?this.goodListSelected[t].qty+=e[t].qty:this.goodListSelected[t]=e[t]})),this.goodListSelectedShow=this.handleFormatDataSalesItem()},handleDeleteItemSelected(e){delete this.goodListSelected[e],this.goodListSelectedShow=Object.values(this.goodListSelected)},handlePaymentSelected(e){this.outstanding=0,this.salesPaid=this.totalAmount;const t=We.momentFunctions.DateIntoUnix(),a=We.commonFunctions.formatPaymentMethod(e,t);this.paymentSelected=[a]},handleGetGoodCategory(e){this.typeGood=e,this.goodTypeSelected=e,e===H.sales.services&&(this.categorySelected=Object.assign({},Qt),this.handleGetServiceCategory()),e===H.sales.products&&(this.categorySelected=Object.assign({},Qt),this.handleGetProductCategory())},handleShowSelectSalesItem(){this.typeGood===H.sales.services||this.typeGood===H.sales.products?this.$refs.refSelectSalesItem&&this.$refs.refSelectSalesItem.showModal({typeGood:this.typeGood,goodList:this.goodList,categories:this.categories}):this.handleNotification()},handleResetGoodType(){this.typeGood=1,this.goodTypeSelected=Object.values(H.sales.itemSalesType)[0].id},handleQty(e,t){this.goodListSelected[e.toString()].qty=t,this.goodListSelectedShow=this.handleFormatDataSalesItem()},handleUnitPrice(e,t){const a=this.goodListSelected[e.toString()].type;1===a&&(this.goodListSelected[e.toString()].goodInfo.price=t),2===a&&(this.goodListSelected[e.toString()].goodInfo.retailPrice=t),this.goodListSelectedShow=this.handleFormatDataSalesItem()},handleFormatDataSalesItem(){this.totalAmount=0,this.outstanding=0;const e=Object.values(this.goodListSelected).map((e=>(e.showDataTable={goodId:0,salesItem:"",unitPrice:0,qTy:0,discount:0,amount:0,staff:"",salesType:"",pointDeduct:0,balanceDeduct:0},e.type===H.sales.services&&(e.showDataTable.qTy=e.qty,e.showDataTable.goodId=e.goodInfo.serviceId,e.showDataTable.unitPrice=e.goodInfo.price,e.showDataTable.salesItem=e.goodInfo.serviceName,e.showDataTable.amount=e.goodInfo.price*e.qty),e.type===H.sales.products&&(e.showDataTable.qTy=e.qty,e.showDataTable.goodId=e.goodInfo.productId,e.showDataTable.unitPrice=e.goodInfo.retailPrice,e.showDataTable.salesItem=e.goodInfo.productName,e.showDataTable.amount=e.goodInfo.retailPrice*e.qty),this.totalAmount+=e.showDataTable.unitPrice*e.showDataTable.qTy,e)));return this.outstanding=this.totalAmount-this.salesPaid,e},handleFormatNumber(e){let t=0;return e>0&&(t=We.commonFunctions.formatMoneyNumber(e)),t},handleNotification(){this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Not Support Yet!"}]})},handleRandomIndex(){const e=We.randomFunctions.randomIndex();return e}}},ta=ea,aa=(0,d.Z)(ta,bt,vt,!1,null,"7d746379",null),sa=aa.exports,ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"client-actions-modal"},[a("validation-observer",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.invalid;return[a("b-modal",{ref:"clientActionsModal",attrs:{static:"","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,size:e.typeModal?"xl":"lg","modal-class":"modal client-actions-modal__modal"},on:{hide:e.handleResetData}},[a("div",{staticClass:"content modal__content",class:{"modal__content--add-client":!e.typeModal}},[a("div",{staticClass:"data-input content__data-input"},[a("div",{staticClass:"group-input group-input--name data-input__group-input data-input__group-input--name"},[a("validation-provider",{attrs:{name:"name",rules:"required|min:3|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("label",[e._v("Client Name "),a("span",[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataClient.clientName,expression:"dataClient.clientName"}],attrs:{maxlength:"50",placeholder:"Ex: ThankZ"},domProps:{value:e.dataClient.clientName},on:{input:function(t){t.target.composing||e.$set(e.dataClient,"clientName",t.target.value)}}}),a("div",{staticClass:"error-text group-input__error-text"},[e._v(" "+e._s(s[0])+" ")])]}}],null,!0)})],1),a("div",{staticClass:"group-input group-input--number data-input__group-input data-input__group-input--number"},[a("validation-provider",{attrs:{name:"number",rules:"required|max:16"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("label",[e._v("Client Number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataClient.memberNumber,expression:"dataClient.memberNumber"}],attrs:{minlength:"1",type:"number",maxlength:"16",placeholder:"Ex: 1703",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"},domProps:{value:e.dataClient.memberNumber},on:{input:function(t){t.target.composing||e.$set(e.dataClient,"memberNumber",t.target.value)}}}),a("div",{staticClass:"error-text group-input__error-text"},[e._v(" "+e._s(s[0])+" ")])]}}],null,!0)})],1),a("div",{staticClass:"group-input group-input--mobile data-input__group-input data-input__group-input--mobile"},[a("validation-provider",{attrs:{name:"mobile",rules:"min:10|max:11"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("label",[e._v("Mobile Number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataClient.mobileNumber,expression:"dataClient.mobileNumber"}],staticClass:"no-arrow group-input--no-arrow",attrs:{type:"number",minlength:"10",maxlength:"11",placeholder:"Ex: 0385076161",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"},domProps:{value:e.dataClient.mobileNumber},on:{input:function(t){t.target.composing||e.$set(e.dataClient,"mobileNumber",t.target.value)}}}),a("div",{staticClass:"error-text group-input__error-text"},[e._v(" "+e._s(s[0])+" ")])]}}],null,!0)})],1),a("div",{staticClass:"group-input group-input--sex data-input__group-input data-input__group-input--sex"},[a("label",[e._v("Gender")]),a("b-form-radio",{attrs:{name:"sex-radios",value:"1"},model:{value:e.dataClient.sex,callback:function(t){e.$set(e.dataClient,"sex",t)},expression:"dataClient.sex"}},[e._v("Male")]),a("b-form-radio",{attrs:{name:"sex-radios",value:"2"},model:{value:e.dataClient.sex,callback:function(t){e.$set(e.dataClient,"sex",t)},expression:"dataClient.sex"}},[e._v("Female")])],1),a("div",{staticClass:"group-input group-input--group data-input__group-input data-input__group-input--group"},[a("label",[e._v("Client Group")]),a("b-form-select",{attrs:{options:e.clientGroupOptions},model:{value:e.groupClient,callback:function(t){e.groupClient=t},expression:"groupClient"}})],1),a("div",{staticClass:"group-input group-input--register-date data-input__group-input data-input__group-input--register-date"},[a("label",[e._v("Registered Date "),a("span",[e._v("*")])]),a("v-date-picker",{staticClass:"date-picker group-input--register-date__date-picker",attrs:{masks:e.masks},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents;return[a("input",e._g({staticClass:"input-date-picker date-picker__input-date-picker",domProps:{value:s}},i))]}}],null,!0),model:{value:e.registeredDate,callback:function(t){e.registeredDate=t},expression:"registeredDate"}})],1),e.errorActionClient.isShow?a("div",{staticClass:"error-client data-input__error-client"},e._l(e.errorActionClient.errorMessages,(function(t){return a("div",{key:t.errorCode},[e._v(" "+e._s(t.errorMessage)+" ")])})),0):e._e()]),e.typeModal&&e.statusScreenLaptop?a("div",{staticClass:"avatar-image content__avatar-image",on:{click:e.showUploadImageModal}},[""===e.urlImageAvatar?a("div",{staticClass:"message avatar-image__message"},[e._v(" Click here to upload avatar ")]):e._e(),""!==e.urlImageAvatar?a("img",{staticClass:"avatar-image__img-avatar",attrs:{src:e.urlImageAvatar}}):e._e()]):e._e()]),a("footer",{staticClass:"footer modal__footer"},[e.statusScreenLaptop?e._e():a("button",{staticClass:"footer__btn-upload-image",on:{click:e.showUploadImageModal}},[e._v(" "+e._s(""===e.urlImageAvatar?"Add Avatar":"View Avatar")+" ")]),a("group-button",{staticClass:"footer__group-button",attrs:{isShowButton:e.isShowButton,disableConfirm:s},on:{cancel:e.onClickCancel,confirm:e.onClickConfirm,delete:e.onClickDelete}})],1),a("div",[e.typeModal?a("client-tabs",{ref:"refClientTabs",attrs:{dataSalesHistory:e.dataSalesHistory,dataPrepaidCards:e.dataPrepaidCards,dataPrepaidServices:e.dataPrepaidServices},on:{loading:e.handleLoading,getPrepaidCard:e.handleGetPrepaidCard,getSalesHistory:e.handleGetSalesHistory,getPrepaidService:e.handleGetPrepaidService}}):e._e()],1)])]}}])}),a("upload-image-modal",{ref:"uploadImageModal",on:{loading:e.handleLoading,uploadImage:e.handleUploadAvatar,deleteImage:e.handleDeleteAvatar,updateUrlImage:e.updateUrlImageAvatar}}),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}}),a("confirm-modal",{ref:"refConfirmModal",on:{confirm:e.handleDeleteClient}})],1)},oa=[],na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"client-tabs"},[a("b-tabs",{staticClass:"client-tabs__tabs",attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Sales History"},on:{click:e.handleGetSalesHistory}},[a("div",{staticClass:"tabs__tab"},[a("div",{staticClass:"tab__sales-history"},[a("span",{staticClass:"sales-history__title"},[e._v(" "+e._s(e.dataSalesHistory.pagingInfo&&"All "+e.dataSalesHistory.pagingInfo.totalItems+" records")+" ")]),a("div",{staticClass:"tab__checkbox"},[a("b-form-checkbox",{attrs:{value:"true","unchecked-value":"false",id:"checkbox-sales-history",name:"checkbox-sales-history"},model:{value:e.isShowHistoryDeleted,callback:function(t){e.isShowHistoryDeleted=t},expression:"isShowHistoryDeleted"}},[e._v(" Show Deleted ")])],1)]),a("div",{staticClass:"tab__table"},[a("table",{staticClass:"table tab__table"},[a("thead",[a("tr",e._l(e.fields.salesHistory,(function(t){return a("th",{key:t.text,class:{"th-no-data":e.statusScreenPhone}},[e._v(" "+e._s(t.text)+" ")])})),0)]),e.isShow.salesHistory?a("tbody",e._l(e.dataSalesHistory.items,(function(t){return a("tr",{key:t.salesNumber,class:{"is-expired":null!==t.deletedById}},[a("td",{staticClass:"table__table-data table__table-data--sales-history-date"},[e._v(" "+e._s(e.handleFormatDate(t.createdDateTimeTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--sales-history-items"},e._l(t.items,(function(t,s){return a("div",{key:s},[e._v(" "+e._s(e.showLongText(t.itemName,15))+" ")])})),0),a("td",{staticClass:"table__table-data table__table-data--sales-history-amount"},[e._v(" "+e._s(e.handleFormatNumber(t.totalAmount))+" ")]),a("td",{staticClass:"table__table-data table__table-data--sales-history-payment"},e._l(t.payments,(function(t){return a("div",{key:t.paymentMethodId},[e._v(" "+e._s(t&&e.showLongText(t.paymentMethodName,10))+" ")])})),0),a("td",{staticClass:"table__table-data table__table-data--sales-history-pay-amount"},[t.outstanding?a("div",[e._v(" -"+e._s(e.handleFormatNumber(t.outstanding))+" ")]):a("div",[e._v(" "+e._s(e.handleFormatNumber(t.totalAmount))+" ")])]),a("td",{staticClass:"table__table-data table__table-data--sales-history-notes"},[e._v(" "+e._s(e.showLongText(t.notes,15))+" ")]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--view",on:{click:function(a){return e.onClickShowSalesDetail(t)}}},[e._v(" View ")])])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"9"}},[e._v("No data")])])])])]),e.page.pageTotal>1?a("paging",{attrs:{page:e.page},on:{handlePaging:e.handleGetSalesHistory}}):e._e()],1)]),a("b-tab",{attrs:{title:"Bookings",disabled:""}}),a("b-tab",{attrs:{title:"Prepaid Cards",active:""},on:{click:e.handleGetPrepaidCard}},[a("div",{staticClass:"tabs__tab tabs__tab--prepaid-card"},[a("div",{staticClass:"tab__checkbox"},[a("b-form-checkbox",{attrs:{value:"true",id:"checkbox-card","unchecked-value":"false",name:"checkbox-expired"},model:{value:e.expired.card,callback:function(t){e.$set(e.expired,"card",t)},expression:"expired.card"}},[e._v(" Show Expired ")])],1),e.statusScreenLaptop||!e.isShow.card?a("table",{staticClass:"table tab__table"},[a("thead",[a("tr",[e._l(e.fields.prepaidCard,(function(t){return a("th",{key:t.text,class:{"th-no-data":e.statusScreenPhone}},[e._v(" "+e._s(t.text)+" ")])})),a("th",{attrs:{colspan:"2"}},[e._v("Actions")])],2)]),e.isShow.card?a("tbody",e._l(e.dataPrepaidGoods.cards,(function(t){return a("tr",{key:t.id,class:{"is-expired":e.handleGoodExpired(e.good=t,e.type=e.typePrepaidGood.card)}},[a("td",{staticClass:"table__table-data table__table-data--prepaid-name"},[e._v(" "+e._s(t.prepaidCardName)+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance"},[e._v(" "+e._s(e.handleFormatNumber(t.balance))+" ")]),a("td",{staticClass:"table__table-data table__table-data--date"},[e._v(" "+e._s(e.handleFormatDate(t.expiryDateTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance"},[e._v(" "+e._s(e.handleFormatNumber(t.initialBalance))+" ")]),a("td",{staticClass:"table__table-data table__table-data--discount"},[e._v(" "+e._s(e.handleFormatDiscount(t.discountForService))+" ")]),a("td",{staticClass:"table__table-data table__table-data--discount"},[e._v(" "+e._s(e.handleFormatDiscount(t.discountForProduct))+" ")]),a("td",{staticClass:"table__table-data table__table-data--date"},[e._v(" "+e._s(e.handleFormatDate(t.invoiceDateTimeTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--edit",on:{click:e.handleClickEdit}},[e._v(" Edit ")])]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--view",on:{click:function(){return e.onClickShowHistoryPrepaidGood(t)}}},[e._v(" View ")])])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"9"}},[e._v("No data")])])])]):e._l(e.dataPrepaidGoods.cards,(function(t){return a("div",{key:t.id},[a("prepaid-good-view",{attrs:{"prepaid-good-info":t,"prepaid-good-field":e.fields.prepaidCard,"type-prepaid-good":e.typePrepaidGood.card},on:{handleEdit:e.handleClickEdit,handleView:function(){return e.onClickShowHistoryPrepaidGood(t)}},scopedSlots:e._u([{key:"balance",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatNumber(t.balance)))])]}},{key:"expiryDateTS",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDate(t.expiryDateTS)))])]}},{key:"initialBalance",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatNumber(t.initialBalance)))])]}},{key:"discountForService",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDiscount(t.discountForService)))])]}},{key:"discountForProduct",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDiscount(t.discountForProduct)))])]}},{key:"invoiceDateTimeTS",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDate(t.invoiceDateTimeTS)))])]}}],null,!0)})],1)})),e.page.pageTotal>1?a("paging",{attrs:{page:e.page},on:{handlePaging:e.handleGetPrepaidCard}}):e._e()],2)]),a("b-tab",{attrs:{title:"Prepaid Service"},on:{click:e.handleGetPrepaidService}},[a("div",{staticClass:"tabs__tab tabs__tab--prepaid-service"},[a("div",{staticClass:"tab__checkbox"},[a("b-form-checkbox",{attrs:{value:"true",id:"checkbox-service","unchecked-value":"false",name:"checkbox-expired"},model:{value:e.expired.service,callback:function(t){e.$set(e.expired,"service",t)},expression:"expired.service"}},[e._v(" Show Expired ")])],1),e.statusScreenLaptop||!e.isShow.service?a("table",{staticClass:"table tab__table",attrs:{responsive:""}},[a("thead",[a("tr",[e._l(e.fields.prepaidService,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),a("th",{attrs:{colspan:"2"}},[e._v("Actions")])],2)]),e.isShow.service?a("tbody",e._l(e.dataPrepaidGoods.services,(function(t){return a("tr",{key:t.id,class:{"is-expired":e.handleGoodExpired(e.good=t,e.type=e.typePrepaidGood.service)}},[a("td",{staticClass:"table__table-data table__table-data--prepaid-name"},[e._v(" "+e._s(t.prepaidServiceName)+" ")]),a("td",{staticClass:"table__table-data table__table-data--quantity"},[e._v(" "+e._s(e.handleFormatNumber(t.quantity))+" "),a("button",{staticClass:"data--btn__btn data--btn__btn--deduct",on:{click:e.onClickDeduct}},[e._v(" Deduct ")])]),a("td",{staticClass:"table__table-data table__table-data--date"},[e._v(" "+e._s(e.handleFormatDate(t.expiryDateTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--quantity"},[e._v(" "+e._s(e.handleFormatNumber(t.initialQuantity))+" ")]),a("td",{staticClass:"table__table-data table__table-data--date"},[e._v(" "+e._s(e.handleFormatDate(t.invoiceDateTimeTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--edit",on:{click:e.handleClickEdit}},[e._v(" Edit ")])]),a("td",{staticClass:"table__table-data table__table-data--btn"},[a("button",{staticClass:"data--btn__btn data--btn__btn--view",on:{click:e.onClickViewPrepaidService}},[e._v(" View ")])])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"6"}},[e._v("No data")])])])]):e._l(e.dataPrepaidGoods.services,(function(t){return a("div",{key:t.id},[a("prepaid-good-view",{attrs:{"prepaid-good-info":t,"prepaid-good-field":e.fields.prepaidService,"type-prepaid-good":e.typePrepaidGood.service},on:{handleEdit:e.handleClickEdit,handleDeduct:e.onClickDeduct,handleView:e.onClickViewPrepaidService},scopedSlots:e._u([{key:"quantity",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatNumber(t.quantity)))])]}},{key:"expiryDateTS",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDate(t.expiryDateTS)))])]}},{key:"initialQuantity",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatNumber(t.initialQuantity)))])]}},{key:"invoiceDateTimeTS",fn:function(t){return[a("div",[e._v(e._s(e.handleFormatDate(t.invoiceDateTimeTS)))])]}}],null,!0)})],1)})),e.page.pageTotal>1?a("paging",{attrs:{page:e.page},on:{handlePaging:e.handleGetPrepaidService}}):e._e()],2)]),a("b-tab",{attrs:{title:"Messages",disabled:""}}),a("b-tab",{attrs:{title:"Photos",disabled:""}})],1),a("prepaid-good-history",{ref:"refPrepaidGoodHistory",on:{loading:e.handleLoading,showHistoryPrepaidGoodPaging:e.onClickShowHistoryPrepaidGoodPaging}}),a("sales-detail",{ref:"refSalesDetail"}),a("notification",{ref:"refNotification",attrs:{modalTitle:"Notification"}})],1)},la=[],da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paging"},[a("label",{staticClass:"page-total paging__page-total"},[e._v("Page "+e._s(e.page.pageNumber)+" of "+e._s(e.page.pageTotal))]),a("button",{staticClass:"paging__btn paging__btn--go-to-first-page",on:{click:e.clickGoToFirstPage}},[e._v(" << ")]),a("button",{staticClass:"paging__btn paging__btn--go-to-previous-page",on:{click:e.clickGoToPreviousPage}},[e._v(" < ")]),a("button",{staticClass:"paging__btn paging__btn--go-to-next-page",on:{click:e.clickGoToNextPage}},[e._v(" > ")]),a("button",{staticClass:"paging__btn paging__btn--go-to-last-page",on:{click:e.clickGoToLastPage}},[e._v(" >> ")]),a("button",{staticClass:"paging__btn paging__btn--go-to",on:{click:e.clickGoto}},[e._v(" "+e._s(e.isShowSelectPage?"Goto":"Hide")+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.pageSelected,expression:"pageSelected"}],attrs:{hidden:e.isShowSelectPage},on:{click:e.clickSelectedPage,change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageSelected=t.target.multiple?a:a[0]}}},e._l(e.optionsPage,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)])},ra=[];const ca={pageTotal:1,pageNumber:1};var ua={name:"SalonThankzPaging",data(){return{pageSelected:1,isShowSelectPage:!0}},props:{page:{type:Object,default:function(){return Object.assign({},ca)}}},computed:{optionsPage(){const e=[];for(let t=1;t<=this.page.pageTotal;t++)e.push({text:t,value:t});return e}},mounted(){},methods:{clickGoToFirstPage(){this.pageSelected=1,this.$emit("handlePaging",{pageNumber:1})},clickGoToPreviousPage(){this.page.pageNumber>1&&(this.pageSelected=this.page.pageNumber-1,this.$emit("handlePaging",{pageNumber:this.page.pageNumber-1}))},clickGoToNextPage(){this.page.pageNumber<this.page.pageTotal&&(this.pageSelected=this.page.pageNumber+1,this.$emit("handlePaging",{pageNumber:this.page.pageNumber+1}))},clickGoToLastPage(){this.pageSelected=this.page.pageTotal,this.$emit("handlePaging",{pageNumber:this.page.pageTotal})},clickSelectedPage(){this.pageSelected!==this.page.pageNumber&&this.$emit("handlePaging",{pageNumber:this.pageSelected})},clickGoto(){this.isShowSelectPage=!this.isShowSelectPage}}},pa=ua,ma=(0,d.Z)(pa,da,ra,!1,null,"4f6935fa",null),ha=ma.exports,ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sales-detail"},[a("b-modal",{ref:"salesDetailModal",attrs:{static:"",size:"xl","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal sales-detail-modal__modal"}},[a("div",{staticClass:"content modal__content"},[a("div",{staticClass:"title content__title"},[e._v(e._s(e.title))]),a("div",{staticClass:"client-name content__client-name"},[e._v(" "+e._s(!!e.salesDetail&&e.salesDetail.clientName)+" ")]),a("div",{staticClass:"sales-date content__sales-date"},[e._v(" "+e._s(!!e.salesDetail&&e.handleFormatDate(e.salesDetail.createdDateTimeTS))+" ")]),e.salesDetail&&e.statusScreenLaptop?a("table",{staticClass:"table tab__table"},[a("thead",[a("tr",e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),0)]),a("tbody",e._l(e.salesDetail.salesItems,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"table__table-data table__table-data--name"},[e._v(" "+e._s(e.showLongText(t.goodsName,20))+" ")]),a("td",{staticClass:"table__table-data table__table-data--price"},[e._v(" "+e._s(e.handleNumber(t.unitPrice))+" ")]),a("td",{staticClass:"table__table-data table__table-data--quantity"},[e._v(" "+e._s(e.handleNumber(t.quantity))+" ")]),a("td",{staticClass:"table__table-data table__table-data--discount"},[e._v(" "+e._s(t.discountValue?t.discountValue+"%":"")+" ")]),a("td",{staticClass:"table__table-data table__table-data--price"},[e._v(" "+e._s(e.handleNumber(t.amount))+" "),a("div",{staticClass:"table-data--price--initial"},[e._v(" "+e._s(t.prepaidCardInitialBalance?"("+e.handleNumber(t.prepaidCardInitialBalance)+")":"")+" ")])]),a("td",{staticClass:"table__table-data table__table-data--staff"},[e._v(" "+e._s(t.staffs)+" ")]),a("td",{staticClass:"table__table-data table__table-data--sales-type"},[e._v(" "+e._s(t.salesTypeName)+" ")]),a("td",{staticClass:"table__table-data table__table-data--point-deduct"},[e._v(" "+e._s(t.deductionPoints?e.handleNumber(t.deductionPoints):"")+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance-deduct"},[e._v(" "+e._s(t.deductionAmount?e.handleNumber(t.deductionAmount):"")+" ")])])})),0)]):e._e(),e.salesDetail&&!e.statusScreenLaptop?a("div",{staticClass:"modal__content-small"},e._l(e.salesDetail.salesItems,(function(t,s){return a("div",{key:s,staticClass:"content-small__detail"},[a("div",{staticClass:"detail__title"},[a("div",{staticClass:"title__good-name"},[e._v(" "+e._s(e.showLongText(t.goodsName,20))+", ")]),a("div",{staticClass:"title__good-amount"},[e._v("   Amount "+e._s(e.handleNumber(t.amount))+" ")])]),a("div",{staticClass:"detail__more"},[a("div",{staticClass:"more__price"},[e._v(" Unit Price "+e._s(e.handleNumber(t.unitPrice))+" ")]),a("div",{staticClass:"more__quatity"},[e._v("   Q'ty "+e._s(e.handleNumber(t.quantity))+" ")]),a("div",{staticClass:"more__discount"},[e._v("   Discount "+e._s(t.discountValue?t.discountValue:0)+" ")])])])})),0):e._e()]),a("div",{staticClass:"footer modal__footer"},[a("div",{staticClass:"payment-name footer__payment-name"},[e._v("Payment")]),a("div",{staticClass:"payment-notes footer__payment-notes"},[a("div",{staticClass:"total-sales payment-notes__total-sales"},[a("div",{staticClass:"total-amount total-sales__total-amount"},[a("span",{staticClass:"payment-method-name"},[e._v("Total Amount")]),e._v(" "+e._s(!!e.salesDetail&&e.handleNumber(e.salesDetail.totalAmount))+" ")]),a("div",{staticClass:"point total-sales__point"},[a("span",{staticClass:"payment-method-name"},[e._v("Point Deduction")]),e._v(" "+e._s(!!e.salesDetail&&e.handleNumber(e.salesDetail.deductionPoints))+" ")]),a("div",{staticClass:"balance total-sales__balance"},[e._v("Balance Deduction 0")]),e._l(!!e.salesDetail&&e.salesDetail.payments,(function(t,s){return a("div",{key:s,staticClass:"payment-used total-sales__payment-used"},[a("div",{staticClass:"payment-type payment-used__payment-type"},[a("div",{staticClass:"payment-name payment-type__payment-name"},[a("span",{staticClass:"payment-method-name"},[e._v(" "+e._s(t.paymentMethodName)+" ")])]),a("div",{staticClass:"payment-value payment-type__payment-value"},[e._v(" "+e._s(e.handleNumber(t.paymentAmount))+" ")])]),a("div",{staticClass:"payment-date payment-used__payment-date"},[e._v(" "+e._s("[Paid ] "+e.handleFormatDateTime(t.paidDateTimeTS))+" ")])])})),a("div",{staticClass:"outstanding total-sales__outstanding"},[a("span",{staticClass:"payment-method-name"},[e._v("Outstanding")]),e._v(" "+e._s(!!e.salesDetail&&e.handleNumber(e.salesDetail.outstanding))+" ")]),a("div",{staticClass:"loyalty-point total-sales__loyalty-point"},[a("span",{staticClass:"payment-method-name"},[e._v("Earn Loyalty Points")]),e._v(" "+e._s(!!e.salesDetail&&e.handleNumber(e.salesDetail.earnedPoints))+" ")])],2),a("div",{staticClass:"notes payment-notes__text-notes"},[a("textarea",{attrs:{disabled:""},domProps:{value:e.salesDetail&&e.salesDetail.notes}})]),a("div",{staticClass:"payment-notes__button--close"},[a("group-button",{attrs:{nameButton:e.nameButton,isShowButton:e.isShowGroupButton},on:{cancel:e.onClickCancel}})],1)])])])],1)},_a=[];const ba={salesItems:{text:"Sales Items"},unitPrice:{text:"Unit Price"},quantity:{text:"Q'ty"},discount:{text:"Discount"},amount:{text:"Amount"},staff:{text:"Staff"},salesType:{text:"Sales Type"},pointsDeduct:{text:"Points Deduct"},balanceDeduct:{text:"Balance Deduct"}};var va={name:"SalonThankzSalesDetail",data(){return{title:"",salesDetail:null,windowWidth:window.innerWidth,fields:Object.assign({},ba),isShowGroupButton:{cancel:!0,delete:!1,confirm:!1}}},components:{GroupButton:Pt},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},computed:{nameButton(){return{confirm:"Save",cancel:"Close",delete:"Delete"}},statusScreenLaptop(){return this.windowWidth>H.common.screenSize.maxScreenLaptop}},methods:{showModal(e){this.title=e.title,this.salesDetail=e.salesDetail,this.$refs.salesDetailModal&&this.$refs.salesDetailModal.show()},hideModal(){this.$refs.salesDetailModal&&this.$refs.salesDetailModal.hide()},onClickCancel(){this.hideModal()},handleFormatDate(e){return We.momentFunctions.FormatFullDateTime(We.momentFunctions.UnixMiliSecondsIntoDate(e))},handleFormatDateTime(e){return We.momentFunctions.FormatDateTime(We.momentFunctions.UnixMiliSecondsIntoDate(e))},handleNumber(e){const t=!!e&&We.commonFunctions.formatMoneyNumber(e);return e>0?t:!1===t?0:t},onResize(){this.windowWidth=window.innerWidth},showLongText(e,t=20){return We.commonFunctions.showLongText(e,t)}}},fa=va,ya=(0,d.Z)(fa,ga,_a,!1,null,"0473f11c",null),Sa=ya.exports,Ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"prepaid-good-info",class:{"is-expired":e.isExpired}},[a("div",{staticClass:"prepaid-good-info__title"},[a("div",{staticClass:"title__name"},[a("div",{staticClass:"name__text"},[e._v(" "+e._s(e.prepaidGoodInfo[Object.keys(e.prepaidGoodField)[0]])+" ")]),a("div",{staticClass:"name__button"},[a("button",{on:{click:e.onClickShowPrepaidGood}},[e._v(" "+e._s(e.isShowPrepaidGood?"⇧":"⇨")+" ")])])]),e._l(Object.keys(e.prepaidGoodField).slice(1,3),(function(t){return a("div",{key:t,staticClass:"title__more"},[a("div",{staticClass:"more__title"},[e._t(t+"Field",(function(){return[e._v(" "+e._s(e.prepaidGoodField[t].text)+" ")]}),e._d({},[t,e.prepaidGoodField[t]]))],2),a("div",{staticClass:"more__detail"},[e._t(t,(function(){return[e._v(" "+e._s(e.prepaidGoodInfo[t])+" ")]}),e._d({},[t,e.prepaidGoodInfo[t]]))],2)])}))],2),e.isShowPrepaidGood?a("div",{staticClass:"prepaid-good-info__more"},[e._l(Object.keys(e.prepaidGoodField).slice(3),(function(t){return a("div",{key:t,staticClass:"more__detail"},[a("div",{staticClass:"detail__title"},[e._t(t+"Field",(function(){return[e._v(" "+e._s(e.prepaidGoodField[t].text)+" ")]}),e._d({},[t,e.prepaidGoodField[t]]))],2),a("div",{staticClass:"detail__detail"},[e._t(t,(function(){return[e._v(" "+e._s(e.prepaidGoodInfo[t])+" ")]}),e._d({},[t,e.prepaidGoodInfo[t]]))],2)])})),a("div",{staticClass:"more__group-button"},[e.typePrepaidGood&&!e.isExpired?a("button",{on:{click:e.handleDeduct}},[e._v(" Deduct ")]):e._e(),a("button",{on:{click:e.handleView}},[e._v("View")]),a("button",{on:{click:e.handleEdit}},[e._v("Edit")])])],2):e._e(),a("hr")])},wa=[],Ia={name:"SalonThankzPrepaidGoodView",data(){return{isShowPrepaidGood:!1}},props:{prepaidGoodInfo:{type:Object,default:function(){return{}}},prepaidGoodField:{type:Object,default:function(){return{}}},typePrepaidGood:{type:Number,default:H.sales.typePrepaidGood.card}},mounted(){},computed:{isExpired(){return!this.typePrepaidGood&&this.prepaidGoodInfo?.isExpired||this.typePrepaidGood&&(0===this.prepaidGoodInfo?.quantity||-1!==this.prepaidGoodInfo?.expiryDateTS&&this.prepaidGoodInfo?.expiryDateTS<We.momentFunctions.DateNowIntoUnix())}},methods:{onClickShowPrepaidGood(){this.isShowPrepaidGood=!this.isShowPrepaidGood},handleDeduct(){this.$emit("handleDeduct")},handleView(){this.$emit("handleView")},handleEdit(){this.$emit("handleEdit")}}},Ta=Ia,Na=(0,d.Z)(Ta,Ca,wa,!1,null,"201b2df0",null),Da=Na.exports,xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"prepaid-good-history-modal"},[a("b-modal",{ref:"prepaidGoodHistoryModal",attrs:{static:"",size:"xl","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal prepaid-good-history-modal__modal",hide:"onReset"}},[a("div",{staticClass:"good-name modal__good-name"},[e._v(" "+e._s(!!e.infoPrepaidGood&&e.infoPrepaidGood[0]&&e.showLongText(e.infoPrepaidGood[0].cardName,40))+" ")]),!e.infoPrepaidGood||!e.statusScreenLaptop&&e.isShowHistory?e._e():a("table",{staticClass:"table tab__table"},[a("thead",[a("tr",[e._l(e.fields,(function(t){return a("th",{key:t.text},[e._v(" "+e._s(t.text)+" ")])})),a("th",[e._v("Detail")])],2)]),e.isShowHistory?a("tbody",e._l(e.infoPrepaidGood,(function(t){return a("tr",{key:t.id},[a("td",{staticClass:"table__table-data table__table-data--created-date-time"},[e._v(" "+e._s(e.handleFormatDateTime(t.createdDateTimeTS))+" ")]),a("td",{staticClass:"table__table-data table__table-data--action"},[e._v(" "+e._s(t.actionHistoryText)+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance"},[e._v(" "+e._s(e.handleFormatChangeBalance(e.handleFormatNumber(t.balance-t.balanceBeforeChange)))+" ")]),a("td",{staticClass:"table__table-data table__table-data--balance"},[e._v(" "+e._s(e.handleFormatNumber(t.balance))+" ")]),a("td",{staticClass:"table__table-data table__table-data--notes"},[e._v(" "+e._s(!!t.notes&&t.notes.systemNotes)+" ")]),a("td",{staticClass:"table__table-data table__table-data--btn"},[e.handleShowButtonView(t.prepaidCardHistoryType)?a("button",{staticClass:"data--btn__btn data--btn__btn--view",on:{click:function(){return e.onClickShowSalesDetail(t)}}},[e._v(" View ")]):e._e()])])})),0):a("tbody",[a("tr",[a("td",{staticClass:"table__no-data",attrs:{colspan:"6"}},[e._v("No data")])])])]),e.infoPrepaidGood&&!e.statusScreenLaptop&&e.isShowHistory?a("div",{staticClass:"small-screen"},e._l(e.infoPrepaidGood,(function(t){return a("div",{key:t.id,staticClass:"small-screen__prepaid-good"},[a("div",{staticClass:"prepaid-good__header"},[a("div",[e._v(" "+e._s(e.handleFormatDateTime(t.createdDateTimeTS))+" ")]),a("div",[e._v(" "+e._s(t.actionHistoryText)+" ")])]),a("div",{staticClass:"prepaid-good__balance"},[e._v(" Balance: "+e._s(e.handleFormatNumber(t.balanceBeforeChange))+" → "+e._s(e.handleFormatNumber(t.balance))+" ")]),a("div",{staticClass:"prepaid-good__notes"},[e._v(" "+e._s(!!t.notes&&e.showLongText(t.notes.systemNotes,30))+" ")]),e.handleShowButtonView(t.prepaidCardHistoryType)?a("button",{staticClass:"prepaid-good__btn",on:{click:function(){return e.onClickShowSalesDetail(t)}}},[e._v(" View ")]):e._e(),a("hr")])})),0):e._e(),e.page.pageTotal>1?a("paging",{attrs:{page:e.page},on:{handlePaging:e.handleGetHistoryPrepaidGood}}):e._e(),a("footer",{staticClass:"footer modal__footer"},[a("group-button",{attrs:{isShowButton:e.isShowGroupButton},on:{cancel:e.onClickCancel}})],1)],1),a("sales-detail",{ref:"refSalesDetail"})],1)},ka=[];const Pa={createdDateTime:{text:"Created Date Time"},action:{text:"Action"},change:{text:"Change"},balance:{text:"Balance"},notes:{text:"Notes"}},Ga={cancel:!0,delete:!1,confirm:!1},Aa={pageTotal:1,pageNumber:1};var Ma={name:"SalonThankzPrepaidGoodHistory",data(){return{title:"",infoPrepaidGood:null,windowWidth:window.innerWidth,page:Object.assign({},Aa),fields:Object.assign({},Pa),isShowGroupButton:Object.assign({},Ga)}},components:{Paging:ha,GroupButton:Pt,SalesDetail:Sa},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},computed:{isShowHistory(){return this.infoPrepaidGood.length},statusScreenLaptop(){return this.windowWidth>H.common.screenSize.maxScreenLaptop}},methods:{showModal(e){this.title=e.title,this.infoPrepaidGood=e.dataPrepaidCard.items,this.page={pageTotal:Math.ceil(e.dataPrepaidCard?.pagingInfo?.totalItems/e.dataPrepaidCard?.pagingInfo?.pageSize),pageNumber:e.dataPrepaidCard?.pagingInfo?.pageNumber},this.infoPrepaidGood.map((e=>{const t=H.sales.prepaidCardHistoryType.find((t=>t.value===e.prepaidCardHistoryType));t&&(e.actionHistoryText=t?.text)})),this.$refs.prepaidGoodHistoryModal&&this.$refs.prepaidGoodHistoryModal.show()},hideModal(){this.$refs.prepaidGoodHistoryModal&&this.$refs.prepaidGoodHistoryModal.hide()},onClickCancel(){this.hideModal()},async onClickShowSalesDetail(e){const t={status:e.salesStatus,salesNumber:e.salesNumber,shopId:A.shopSession.getShopId()};try{this.$emit("loading",!0);const e=await ie.salesApis.getSalesDetail(t);if(200!==e.status)throw this.$emit("loading",!1),e;if(e.data.isOK){const t=e.data.result;this.$emit("loading",!1),this.$refs.refSalesDetail.showModal({title:"Sales Detail",salesDetail:t})}else console.log(e,t),this.$emit("loading",!1)}catch(a){console.log(a)}},handleFormatDateTime(e){return We.momentFunctions.FormatDateTime(We.momentFunctions.UnixMiliSecondsIntoDate(e))},handleFormatNumber(e){const t=!!e&&We.commonFunctions.formatMoneyNumber(e);return e>0?t:!1===t?0:t},handleFormatChangeBalance(e){return"-"!==e[0]&&0!==e?`+${e}`:e},handleShowButtonView(e){return[H.sales.prepaidCardHistoryTypeEnum.sales,H.sales.prepaidCardHistoryTypeEnum.refund,H.sales.prepaidCardHistoryTypeEnum.deduction,H.sales.prepaidCardHistoryTypeEnum.salesEdited,H.sales.prepaidCardHistoryTypeEnum.salesDeleted,H.sales.prepaidCardHistoryTypeEnum.refundDeleted,H.sales.prepaidCardHistoryTypeEnum.deductionEdited,H.sales.prepaidCardHistoryTypeEnum.deductionDeleted].includes(e)},handleGetHistoryPrepaidGood({pageNumber:e=1}){this.$emit("showHistoryPrepaidGoodPaging",{pageNumber:e,id:this.infoPrepaidGood[this.infoPrepaidGood.length-1].clientPrepaidCardId,clientId:this.infoPrepaidGood[this.infoPrepaidGood.length-1].clientId})},onResize(){this.windowWidth=window.innerWidth},onReset(){this.infoPrepaidGood=null},showLongText(e,t=20){return We.commonFunctions.showLongText(e,t)}}},La=Ma,$a=(0,d.Z)(La,xa,ka,!1,null,"5f7cb343",null),ja=$a.exports;const Ea={prepaidCard:{prepaidCardName:{text:"Card Name"},balance:{text:"Balance"},expiryDateTS:{text:"Expiry Date"},initialBalance:{text:"Earned Amount"},discountForService:{text:"Service DC"},discountForProduct:{text:"Product DC"},invoiceDateTimeTS:{text:"Issue Date"}},prepaidService:{prepaidServiceName:{text:"Prepaid Service Name"},quantity:{text:"Remaining Quantity"},expiryDateTS:{text:"Expiry Date"},initialQuantity:{text:"Initial Quantity"},invoiceDateTimeTS:{text:"Issue Date"}},salesHistory:{invoiceDateTimeTS:{text:"Date"},itemName:{text:"Sales Items"},totalAmount:{text:"Amount"},payments:{text:"Payment Method"},payAmount:{text:"Pay Amount"},notes:{text:"Notes"},detail:{text:"Detail"}}},Fa={pageTotal:1,pageNumber:1},Oa={card:!1,service:!1},Ba={card:H.sales.typePrepaidGood.card,service:H.sales.typePrepaidGood.service};var za={name:"SalonThankzClientTabs",data(){return{dataPrepaidGoods:{},dataSalesHistory:{},isShowHistoryDeleted:!1,windowWidth:window.innerWidth,page:Object.assign({},Fa),expired:Object.assign({},Oa),fields:Object.assign({},Ea),typePrepaidGood:Object.assign({},Ba)}},props:{},components:{Paging:ha,SalesDetail:Sa,Notification:Qe,PrepaidGoodView:Da,"prepaid-good-history":ja},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},computed:{isShow(){return{card:this.dataPrepaidGoods?.cards?.length,service:this.dataPrepaidGoods?.services?.length,salesHistory:this.dataSalesHistory?.items?.length}},statusScreenLaptop(){return this.windowWidth>H.common.screenSize.maxScreenLaptop},statusScreenPhone(){return this.windowWidth<=H.common.screenSize.maxScreenPhone}},watch:{"expired.card":function(e,t){e!==t&&this.handleGetPrepaidCard({pageNumber:1})},"expired.service":function(e,t){e!==t&&this.handleGetPrepaidService({pageNumber:1})},isShowHistoryDeleted:function(e,t){e!==t&&this.handleGetSalesHistory({pageNumber:1})}},methods:{handleGetPrepaidCard({pageNumber:e=1}){this.$emit("getPrepaidCard",{expired:this.expired.card,pageNumber:e})},handleGetPrepaidService({pageNumber:e=1}){this.$emit("getPrepaidService",{expired:this.expired.service,pageNumber:e})},handleGetSalesHistory({pageNumber:e=1}){this.$emit("getSalesHistory",{fromDateTS:1,pageNumber:e,includeDeleted:this.isShowHistoryDeleted})},handleSetPrepaidGoods(e){this.dataPrepaidGoods=e,this.page={pageTotal:Math.ceil(e?.pagingInfo?.totalItems/e?.pagingInfo?.pageSize),pageNumber:e?.pagingInfo?.pageNumber}},handleSetSalesHistory(e){this.dataSalesHistory=e,this.page={pageTotal:Math.ceil(e?.pagingInfo?.totalItems/e?.pagingInfo?.pageSize),pageNumber:e?.pagingInfo?.pageNumber}},handleFormatDate(e){return-1===e?"No Limit":We.momentFunctions.FormatDate(We.momentFunctions.UnixMiliSecondsIntoDate(e))},handleFormatNumber(e){return-1===e?"No Limit":We.commonFunctions.formatMoneyNumber(e)},handleFormatDiscount(e){return e?e+"%":""},async onClickShowHistoryPrepaidGood(e){const t={clientId:e.clientId,clientPrepaidCardId:e.id,pageNumber:1,pageSize:10,shopId:A.shopSession.getShopId()};try{this.$emit("loading",!0);const e=await ie.salesApis.getPrepaidCardHistory(t);if(200!==e.status)throw this.$emit("loading",!1),e;if(e.data.isOK){const t=e.data.result;this.$emit("loading",!1),this.$refs.refPrepaidGoodHistory.showModal({title:"Prepaid Card Balance History",dataPrepaidCard:t})}else console.log(e),this.$emit("loading",!1)}catch(a){console.log(a)}},async onClickShowHistoryPrepaidGoodPaging(e={clientId:0,id:0,pageNumber:1}){const t={clientId:e.clientId,clientPrepaidCardId:e.id,pageNumber:e.pageNumber,pageSize:10,shopId:A.shopSession.getShopId()};try{this.$emit("loading",!0);const e=await ie.salesApis.getPrepaidCardHistory(t);if(200!==e.status)throw this.$emit("loading",!1),e;if(e.data.isOK){const t=e.data.result;this.$emit("loading",!1),this.$refs.refPrepaidGoodHistory.showModal({title:"Prepaid Card Balance History",dataPrepaidCard:t})}else console.log(e),this.$emit("loading",!1)}catch(a){console.log(a)}},handleClickEdit(){this.handleNotification()},onClickViewPrepaidService(){this.handleNotification()},onClickDeduct(){this.handleNotification()},handleNotification(){this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Not Support Yet!"}]})},handleLoading(e){this.$emit("loading",e)},onResize(){this.windowWidth=window.innerWidth},handleGoodExpired(e={},t=null){return t?-1!==e?.expiryDateTS&&e?.expiryDateTS<We.momentFunctions.DateNowIntoUnix():e?.isExpired},showLongText(e,t){return We.commonFunctions.showLongText(e,t)},async onClickShowSalesDetail(e){const t={status:e.refStatus,salesNumber:e.salesNumber,shopId:A.shopSession.getShopId()};try{this.$emit("loading",!0);const e=await ie.salesApis.getSalesDetail(t);if(200!==e.status)throw this.$emit("loading",!1),e;if(e.data.isOK){const t=e.data.result;this.$emit("loading",!1),this.$refs.refSalesDetail.showModal({title:"Sales Detail",salesDetail:t})}else console.log(e,t),this.$emit("loading",!1)}catch(a){console.log(a)}}}},Ua=za,Ra=(0,d.Z)(Ua,na,la,!1,null,"d0a47990",null),Ha=Ra.exports,qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"confirm-modal"},[a("b-modal",{ref:"confirmModal",attrs:{static:"","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal confirm-modal__modal"}},[a("div",{staticClass:"message modal__message"},[e._v(e._s(e.message))]),a("group-button",{attrs:{isShowButton:e.isShowGroupButton},on:{cancel:e.onClickCancel,delete:e.onClickDelete}})],1)],1)},Wa=[],Va={name:"SalonThankzConfirmModal",data(){return{title:"",message:"",isShowGroupButton:{cancel:!0,delete:!0,confirm:!1}}},props:{},components:{GroupButton:Pt},created(){},mounted(){},computed:{},methods:{showModal(e){this.title=e.title,this.message=e.message,this.$refs.confirmModal&&this.$refs.confirmModal.show()},hideModal(){this.$refs.confirmModal&&this.$refs.confirmModal.hide()},onClickDelete(){this.$emit("confirm"),this.hideModal()},onClickCancel(){this.hideModal()}}},Ya=Va,Za=(0,d.Z)(Ya,qa,Wa,!1,null,"2475510b",null),Ka=Za.exports,Ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-image-modal"},[a("b-modal",{ref:"uploadImageModal",attrs:{static:"","hide-footer":"",title:e.title,"header-bg-variant":"info","no-close-on-backdrop":!0,"modal-class":"modal upload-image-modal__modal"}},[a("input",{ref:"inputFileImage",attrs:{hidden:"",type:"file",accept:"image/*"},on:{change:e.onClickChangeFile}}),e.typeUploadImage?a("div",{staticClass:"input-data modal__input-data"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.file,expression:"file"}],attrs:{readonly:""},domProps:{value:e.file},on:{input:function(t){t.target.composing||(e.file=t.target.value)}}}),a("button",{on:{click:e.onClickSelectImage}},[e._v("Search Image")])]):e._e(),a("div",{staticClass:"preview-avatar modal__preview-avatar"},[e.urlImage?a("img",{attrs:{src:e.urlImage}}):e._e()]),a("group-button",{attrs:{disableConfirm:!e.file,isShowButton:e.isShowGroupButton},on:{cancel:e.onClickCancel,confirm:e.onClickSaveImage,delete:e.onClickDeleteImage}})],1),a("confirm-modal",{ref:"confirmModal",on:{confirm:e.handleDeleteImage}}),a("notification",{ref:"notificationModal",attrs:{modalTitle:"Error Image Action"}})],1)},Qa=[],Xa={name:"SalonThankzUploadImage",data(){return{file:"",title:"",urlImage:"",dataClient:null,typeUploadImage:1,isShowGroupButton:{cancel:!0,delete:!0,confirm:!0}}},props:{},components:{GroupButton:Pt,ConfirmModal:Ka,Notification:Qe},created(){},mounted(){},computed:{},methods:{showModal(e){this.title=e.title,this.dataClient=e.dataClient,this.urlImage=e.urlImageAvatar,e.urlImageAvatar?this.typeUploadImage=0:this.typeUploadImage=1,this.isShowGroupButton.delete=!!this.urlImage,this.isShowGroupButton.confirm=!this.urlImage,this.$refs.uploadImageModal&&this.$refs.uploadImageModal.show()},hideModal(){this.$refs.uploadImageModal&&this.$refs.uploadImageModal.hide()},onClickSelectImage(){this.$refs.inputFileImage.click()},async onClickSaveImage(){const[e]=this.$refs.inputFileImage.files||[];e&&(await this.$emit("uploadImage",e),this.hideModal(),this.handleReset())},onClickCancel(){this.hideModal(),this.handleReset()},onClickDeleteImage(){this.$refs.confirmModal.showModal({title:"Delete Avatar Client",message:"Are you sure you want to delete this avatar?"})},async handleDeleteImage(){await this.$emit("deleteImage"),this.hideModal(),this.handleReset()},onClickChangeFile(e){const t=e.target.files[0],a=We.commonFunctions.covertSizeFileIntoMB(t.size);if(a>=1)return this.$refs.notificationModal.showModal({listMessage:[{errorCode:"FileSize",errorMessage:"Data size is not larger than 1M"}]}),void this.handleReset();if(t){this.file=t?.name;const e=URL.createObjectURL(t);e&&e!==this.urlImage&&(URL.revokeObjectURL(this.urlImage),this.urlImage=e)}},handleReset(){this.file="",this.$refs.inputFileImage.value=""}}},es=Xa,ts=(0,d.Z)(es,Ja,Qa,!1,null,"7c8a7208",null),as=ts.exports;const ss=["Add Client","Edit Client"],is={sex:3,email:null,notes:null,birthDD:"0",memberType:1,address1:null,address2:null,postcode:null,clientName:"",birthYear:"0",birthMonth:"0",birthdayType:1,memberNumber:6,phoneNumber:null,mobileNumber:null,mobileNumber2:null,recommenderId:null,clientGroupId:null,clientRatingId:null,allowedMessageType:1,clientGroupName:null,preferredStaffId:null,clientRatingName:null,preferredStaffName:null,clientReferralSourceId:null,clientReferralSourceName:null,shopId:A.shopSession.getShopId(),country:H.payload.DEFAULT_COUNTRY,sessionToken:A.shopSession.getSessionToken(),clientInputDateTimeTS:1654095624,shopLocation:H.payload.DEFAULT_SHOP_LOCATION},os={clientGroupId:null,clientGroupName:null},ns={isShow:!1,errorMessages:[]};var ls={name:"SalonThankzClientActions",data(){return{typeModal:0,urlImageAvatar:"",dataSalesHistory:{},dataPrepaidCards:{},dataPrepaidServices:{},registeredDate:Date.now(),windowWidth:window.innerWidth,groupClient:Object.assign({},os),dataClient:Object.assign({},is),errorActionClient:Object.assign({},ns),inputProps:{class:"input"},masks:{input:"YYYY-MM-DD"}}},props:{},components:{ClientTabs:Ha,GroupButton:Pt,Notification:Qe,ConfirmModal:Ka,UploadImageModal:as,ValidationProvider:C.d_,ValidationObserver:C._j},created(){},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},computed:{title(){return ss[this.typeModal]},clientGroupOptions(){const e=A.clientSession.getClientSetup().clientGroup.map((function(e){return{value:{clientGroupName:e.itemName,clientGroupId:e.clientGroupId},text:e.itemName}}));return[{value:{clientGroupId:null,clientGroupName:null},text:"Select"},...e]},statusScreenLaptop(){return this.windowWidth>H.common.screenSize.maxScreenLaptop},statusScreenPhone(){return this.windowWidth<H.common.screenSize.maxScreenPhone},isShowButton(){return{delete:this.typeModal,cancel:!0,confirm:!0}}},methods:{async showModal(e){if(this.typeModal=e.typeModal,this.dataClient.memberNumber=e?.memberNumber||0,e.dataClient&&null!==e.dataClient&&(this.dataClient=Object.assign(is,e.dataClient),this.groupClient={clientGroupId:e?.dataClient?.clientGroupId,clientGroupName:e?.dataClient?.clientGroupName},this.registeredDate=We.momentFunctions.UnixMiliSecondsIntoDate(e?.dataClient?.clientInputDateTimeTS)),this.dataClient.imageName&&this.dataClient.imagePath){const e=[this.dataClient.imagePath,this.dataClient.imageName];this.urlImageAvatar=We.commonFunctions.concatURL({defaultURL:H.api.DEFAULT_URL_IMAGE.CLIENT,pathURL:e})}await this.handleGetPrepaidCard(),this.$refs.clientActionsModal&&this.$refs.clientActionsModal.show()},hideModal(){this.$refs.clientActionsModal&&this.$refs.clientActionsModal.hide()},async onClickConfirm(){this.dataClient.clientGroupId=this.groupClient.clientGroupId,this.dataClient.clientGroupName=this.groupClient.clientGroupName,this.dataClient.clientInputDateTimeTS=We.momentFunctions.DateIntoUnix(We.momentFunctions.FormatDate(this.registeredDate));const e=We.momentFunctions.DateNowIntoUnix();if(e<this.dataClient.clientInputDateTimeTS)alert("Registered Date Client cannot be greater than current time");else try{let e;if(this.$emit("loading",!0),this.typeModal?(this.dataClient.editedDateTimeTS=We.momentFunctions.DateNowIntoUnix(),this.dataClient=We.commonFunctions.trimAllDataObject(this.dataClient),e=await ie.clientApis.editClient(this.dataClient)):(this.dataClient.createdDateTimeTS=We.momentFunctions.DateNowIntoUnix(),this.dataClient=We.commonFunctions.trimAllDataObject(this.dataClient),e=await ie.clientApis.createNewClient(this.dataClient)),200!==e.status)throw e.message;e.data.isOK?(this.$emit("loadClient"),this.$emit("loading",!1),this.hideModal(),this.errorActionClient.isShow=!1):(this.$emit("loading",!1),this.errorActionClient.isShow=!0,this.errorActionClient.errorMessages=[...e.data.errorMessages])}catch(t){console.log(t)}},onClickCancel(){this.hideModal(),this.handleResetData()},handleResetData(){this.groupClient=Object.assign({},os),this.dataClient=Object.assign({},We.clientFunctions.ResetDataClient()),this.registeredDate=Date.now(),this.errorActionClient=Object.assign({},We.messageFunctions.ResetErrorMessages()),this.urlImageAvatar="",this.dataSalesHistory={},this.dataPrepaidCards={},this.dataPrepaidServices={}},showUploadImageModal(){const e={clientId:this.dataClient.clientId,clientImageId:this.dataClient.clientImageId};this.$refs.uploadImageModal.showModal({dataClient:e,title:this.urlImageAvatar?"Delete Avatar Image":"Upload Avatar Image",urlImageAvatar:this.urlImageAvatar})},updateUrlImageAvatar({clientImageId:e,urlImageAvatar:t}){this.urlImageAvatar=t,this.dataClient.clientImageId=e},handleLoading(e){this.$emit("loading",e)},async handleUploadAvatar(e){const t=new FormData;t.append("fomrFile",e),t.append("clientId",this.dataClient.clientId),t.append("shopId",A.shopSession.getShopId()),t.append("countryCode",H.payload.DEFAULT_COUNTRY),this.$emit("loading",!0);try{const e=await ie.clientApis.uploadClientImage(t);if(200!==e.status)throw e;if(e.data.isOK){const t=[e.data.result.imagePath,e.data.result.imageName];this.urlImageAvatar=We.commonFunctions.concatURL({defaultURL:H.api.DEFAULT_URL_IMAGE.CLIENT,pathURL:t}),this.dataClient.clientImageId=e.data.result.clientImageId,this.$emit("loading",!1)}else this.$emit("loading",!1),console.log(e.data)}catch(a){console.log("errors",a)}},async handleDeleteAvatar(){const e={shopId:A.shopSession.getShopId(),clientImageId:this.dataClient.clientImageId};this.$emit("loading",!0);try{const t=await ie.clientApis.deleteClientImage(e);if(200!==t.status)throw t;t.data.isOK?(this.urlImageAvatar="",this.dataClient.clientImageId=null,this.$emit("loading",!1)):(this.$emit("loading",!1),console.log(t))}catch(t){console.log(t)}},async handleGetPrepaidCard(e={pageNumber:1,expired:!1}){const t={pageSize:10,prepaidCardType:-1,includeFamilyService:!0,pageNumber:e.pageNumber,includeExpired:e.expired,clientId:this.dataClient.clientId,shopId:A.shopSession.getShopId()};try{this.$emit("loading",!0);const e=await ie.clientApis.getClientPrepaidCards(t);if(200!==e.status)throw this.$emit("loading",!1),e;e.data.isOK?(this.dataPrepaidCards=e.data.result,this.dataPrepaidCards.cards=e.data.result.items,this.$refs.refClientTabs&&this.$refs.refClientTabs.handleSetPrepaidGoods(this.dataPrepaidCards),this.$emit("loading",!1)):this.$emit("loading",!1)}catch(a){console.log(a),this.$emit("loading",!1)}},async handleGetPrepaidService(e={expired:!1,pageNumber:1}){const t={pageSize:10,includeFamilyService:!0,pageNumber:e.pageNumber,includeExpired:e.expired,clientId:this.dataClient.clientId,shopId:A.shopSession.getShopId()};try{this.$emit("loading",!0);const e=await ie.clientApis.getClientPrepaidServices(t);if(200!==e.status)throw this.$emit("loading",!1),e;e.data.isOK?(this.dataPrepaidServices=e.data.result,this.dataPrepaidServices.services=e.data.result.items,this.$refs.refClientTabs&&this.$refs.refClientTabs.handleSetPrepaidGoods(this.dataPrepaidServices),this.$emit("loading",!1)):this.$emit("loading",!1)}catch(a){console.log(a),this.$emit("loading",!1)}},async handleGetSalesHistory({pageNumber:e=1,fromDateTS:t=1,includeDeleted:a=!1}){const s={pageSize:10,pageNumber:e,fromDateTS:t,includeDeleted:a,clientId:this.dataClient.clientId,clientShopId:this.dataClient.shopId,shopId:A.shopSession.getShopId(),toDateTS:We.momentFunctions.DateNowIntoUnix()};try{this.$emit("loading",!0);const e=await ie.clientApis.getSalesHistoryByClient(s);if(200!==e.status)throw this.$emit("loading",!1),e;e.data.isOK?(this.dataSalesHistory=e.data.result,this.$refs.refClientTabs&&this.$refs.refClientTabs.handleSetSalesHistory(this.dataSalesHistory),this.$emit("loading",!1)):this.$emit("loading",!1)}catch(i){console.log(i),this.$emit("loading",!1)}},onClickDelete(){this.$refs.refConfirmModal.showModal({title:"Delete Client",message:`Are you sure you want to delete client ${this.dataClient.clientName} ?`})},async handleDeleteClient(){const e={clientId:this.dataClient.clientId,shopId:A.shopSession.getShopId(),country:H.payload.DEFAULT_COUNTRY,sessionToken:A.shopSession.getSessionToken(),shopLocation:H.payload.DEFAULT_SHOP_LOCATION};this.$emit("loading",!0);try{const t=await ie.clientApis.deleteClient(e);if(200!==t.status)throw this.$emit("loading",!1),this.$refs.refNotification.showModal({listMessage:t.errorMessages});t.data.isOK?(this.$emit("loadClient"),this.$emit("loading",!1),this.hideModal()):(this.$emit("loading",!1),this.$refs.refNotification.showModal({listMessage:t.errorMessages}))}catch(t){this.$refs.refNotification.showModal({listMessage:t})}},onResize(){this.windowWidth=window.innerWidth}}},ds=ls,rs=(0,d.Z)(ds,ia,oa,!1,null,"1d91c664",null),cs=rs.exports,us={name:"ClientPage",data(){return{clients:[],name:"ThankZ",clientTotal:0,isLoading:!1,isShowSelectPage:!0,isShowClientInfo:!1,windowWidth:window.innerWidth,page:{pageTotal:1,pageNumber:1,pageSelected:1,pageSize:H.payload.DEFAULT_PAGE_SIZE},fields:{registrationDate:{text:"Registered Date"},clientName:{text:"Client Name"},mobileNumber:{text:"Mobile / Phone"},totalSalesAmount:{text:"Total Sales"},notes:{text:"Notes"}}}},props:{},components:{Loading:it,ClientInfo:_t,SalesAction:sa,Notification:Qe,ClientActions:cs},created(){this.loadStaffActive()},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize)})),this.loadDataClient(),this.handleSetAllSetupSales()},beforeDestroy(){window.removeEventListener("resize",this.onResize)},computed:{optionsPage(){const e=[];for(let t=1;t<=this.page.pageTotal;t++)e.push({text:t,value:t});return e},statusScreenLaptop(){return this.windowWidth>H.common.screenSize.maxScreenTablet},statusScreenTablet(){return this.windowWidth>H.common.screenSize.maxScreenPhone}},methods:{async loadDataClient(){const e={pageSize:this.page.pageSize,pageNumber:this.page.pageNumber,shopId:A.shopSession.getShopId()};let t=Object.keys(this.fields);this.isLoading=!0;try{const a=await ie.clientApis.getAllClientByShop(e);if(200!==a.status)throw this.isLoading=!1,a;a.data.isOK?(this.clientTotal=a.data.result.pagingInfo.totalItems,this.page.pageTotal=Math.ceil(a.data.result.pagingInfo.totalItems/a.data.result.pagingInfo.pageSize),this.clients=a.data.result.items.map((function(e){let a={};a["clientId"]=e.clientId,a["memberNumber"]=e.memberNumber;for(let s in t)a[t[s]]=e[t[s]];return a.mobileNumber2=e.mobileNumber2,a.registrationDate=ue()(We.momentFunctions.UnixMiliSecondsIntoDate(e.clientInputDateTimeTS)).format("YYYY-MM-DD"),a.phone="",null!==a.mobileNumber&&(a.phone+=We.commonFunctions.formatPhoneNumber(a.mobileNumber)),null!==a.mobileNumber2&&(a.phone+=We.commonFunctions.formatPhoneNumber(a.mobileNumber2)),"/"===a.phone[0]&&a.phone.splice(0,1),a.totalSales=We.commonFunctions.formatMoneyNumber(a.totalSalesAmount),a})),this.isLoading=!1):(this.isLoading=!1,console.log(a.data))}catch(a){console.log(a)}},async loadStaffActive(){const e={shopId:A.shopSession.getShopId()};try{const t=await ie.shopApis.getStaffActive(e);if(200!==t.status)throw t.message;t.data.isOK?A.shopSession.setStaffActive(t.data.result):alert("Error Staff Active")}catch(t){console.log(t)}},clickGoToFirstPage(){this.page.pageNumber=1,this.page.pageSelected=this.page.pageNumber,this.loadDataClient()},clickGoToPreviousPage(){1!==this.page.pageNumber&&(this.page.pageNumber-=1,this.page.pageSelected=this.page.pageNumber),this.loadDataClient()},clickGoToNextPage(){this.page.pageNumber!==this.page.pageTotal&&(this.page.pageNumber+=1,this.page.pageSelected=this.page.pageNumber),this.loadDataClient()},clickGoToLastPage(){this.page.pageNumber=this.page.pageTotal,this.page.pageSelected=this.page.pageNumber,this.loadDataClient()},clickGoto(){this.isShowSelectPage=!this.isShowSelectPage},clickSelectedPage(){this.page.pageSelected!==this.page.pageNumber&&(this.page.pageNumber=this.page.pageSelected,this.loadDataClient())},clickSignout(){A.shopSession.removeShopInfo(),A.shopSession.removeStaffActive(),A.saleSession.removeSaleAllSetup(),A.clientSession.removeClientSetup(),this.$router.push("/login")},showLongText(e,t){return e&&e.trim().length>t?e.substring(0,t)+"...":e},async handleClickAddClient(){const e=await this.getNextMemberNumber();this.$refs.clientActionsRef.showModal({typeModal:0,memberNumber:e})},async handleClickEditClient(e){const t={clientId:e.clientId,shopId:A.shopSession.getShopId()};try{const e=await ie.clientApis.getClientByClientId(t);if(200!==e.status)throw e.message;e.data.isOK?this.$refs.clientActionsRef.showModal({typeModal:1,dataClient:e.data.result}):alert("Get Client Error")}catch(a){console.log("Errors",a)}},async getNextMemberNumber(){const e={shopId:A.shopSession.getShopId()};try{const t=await ie.clientApis.getNextMemberNumber(e);if(200!==t.status)throw t.message;return t.data.isOK?t.data.result:void 0}catch(t){console.log(t)}},async handleClickPrintListClient(){const e={header:"Client List"};e.title=`Client List Page ${this.page.pageNumber}`,e.fileName=`Client_List_Page_${this.page.pageNumber}`,e.columns=[{text:"Client No",width:10},{text:"Client Name",width:30},{text:"Mobile",width:15},{text:"Total Sales",width:20},{text:"Note",width:50},{text:"Registered Date",width:20}],e.rows=[],this.clients.map((function(t){const a=[];a.push(t.memberNumber),a.push(t.clientName);let s=t.mobileNumber;s&&(s=We.commonFunctions.formatPhoneNumber(s)),a.push(s??"");let i=We.commonFunctions.formatMoneyNumber(t.totalSalesAmount);a.push(i??0),a.push(t.notes??""),a.push(t.registrationDate),e.rows=[...e.rows,a]})),We.commonFunctions.exportExcel(e)},handleSetLoading(e){this.isLoading=e},onClickSales(e){const t=We.momentFunctions.DateNowIntoUnix();this.$refs.refSalesAction.showModal({type:0,client:e,invoiceDateTimeTS:t})},onClickCalendar(){this.$refs.refNotification.showModal({listMessage:[{errorCode:"Error",errorMessage:"Not Support Yet!"}]})},onResize(){this.windowWidth=window.innerWidth},onClickShowInfoClient(){this.isShowClientInfo=!this.isShowClientInfo},async handleSetAllSetupSales(){const e={status:1,shopId:A.shopSession.getShopId()};this.isLoading=!0;try{const t=await ie.salesApis.getAllSalesSetup(e);if(200!==t.status)throw this.isLoading=!1,t;t.data.isOK?await A.saleSession.setSaleAllSetup(t.data.result):alert(t.errorMessages),this.isLoading=!1}catch(t){this.isLoading=!1,console.log("errors",t)}}}},ps=us,ms=(0,d.Z)(ps,rt,ct,!1,null,"e61bbebe",null),hs=ms.exports;s["default"].use(m.Z);const gs=m.Z.prototype.push;m.Z.prototype.push=function(e){return gs.call(this,e).catch((e=>e))};const _s=[{path:"/",name:"home",component:f},{path:"/login",name:"login",component:dt},{path:"/client",name:"client",component:hs}],bs=new m.Z({mode:"history",routes:_s});bs.beforeEach(((e,t,a)=>{"/login"!==e.path&&null===sessionStorage.getItem("shopInfo")?a({name:"login"}):a()}));var vs=bs,fs=a(3207),ys=a.n(fs),Ss=a(7345),Cs=a(5505);s["default"].use(Ss.Z);const ws=new Ss.Z({locale:"en",messages:{en:{fields:{user:"User Name",name:"Client Name",password:"Password",number:"Client Number",mobile:"Mobile Number"},validation:Cs.s}}});var Is=a(4493);(0,C.jQ)({defaultMessage:(e,t)=>(t._field_=ws.t(`fields.${e}`),ws.t(`validation.${t._rule_}`,t))}),(0,C.l7)("required",Is.C1),(0,C.l7)("min",Is.VV),(0,C.l7)("max",Is.Fp),(0,C.l7)("min_value",Is.Gd),(0,C.l7)("max_value",Is.JC),(0,C.l7)("between",Is.vX),(0,C.l7)("email",Is.Do),(0,C.l7)("regex",Is.Sz),(0,C.l7)("alpha_dash",Is.E1),s["default"].use(u.XG7),s["default"].use(p.A7),s["default"].use(ys(),{componentPrefix:"v"}),s["default"].config.productionTip=!1,new s["default"]({render:e=>e(c),router:vs,i18n:ws}).$mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,o){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],o=e[c][2];for(var l=!0,d=0;d<s.length;d++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[d])}))?s.splice(d--,1):(l=!1,o<n&&(n=o));if(l){e.splice(c--,1);var r=i();void 0!==r&&(t=r)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,i,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,o,n=s[0],l=s[1],d=s[2],r=0;if(n.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(d)var c=d(a)}for(t&&t(s);r<n.length;r++)o=n[r],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=self["webpackChunksalon_thankz"]=self["webpackChunksalon_thankz"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8126)}));s=a.O(s)})();
//# sourceMappingURL=app.5deb35e0.js.map